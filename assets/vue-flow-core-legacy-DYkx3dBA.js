!function(){const e=["eventFilter"],t=["eventFilter"],n=["id"],o=["computedPosition","handleBounds","selected","dimensions","isParent","resizing","dragging","events"],i=["selected","sourceNode","targetNode","events"];function r(e,t,n,o,i,r,a){try{var l=e[r](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(o,i)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}System.register(["./index-legacy-BVk_Mtvn.js"],function(a,u){"use strict";var c,d,v,f,h,p,g,m,y,w,b,x,_,E,S,N,k,M,C,I,P,T,O,A,D,$,z,B,V,L,R,H,Y,G,F,X,U,j,Z,K,W,q,J,Q,ee,te,ne;return{setters:[e=>{c=e.E,d=e.a6,v=e.an,f=e.o,h=e.c,p=e.d,g=e.w,m=e.a4,y=e.a5,w=e.G,b=e.n,x=e.ao,_=e.ap,E=e.I,S=e.a8,N=e.H,k=e.a1,M=e.aq,C=e.ar,I=e.b,P=e.F,T=e.q,O=e.p,A=e.aa,D=e.a3,$=e.as,z=e.e,B=e.i,V=e.K,L=e.t,R=e.a2,H=e.at,Y=e.au,G=e.ab,F=e.a9,X=e.av,U=e.aw,j=e.ax,Z=e.ay,K=e.az,W=e.aA,q=e.aB,J=e.r,Q=e.aC,ee=e.v,te=e.a7,ne=e.h}],execute:function(){function u(e){return!!H()&&(Y(e),!0)}function oe(e){return"function"==typeof e?e():y(e)}const ie="undefined"!=typeof window&&"undefined"!=typeof document,re=Object.prototype.toString,ae=()=>{};const le=e=>e();function ue(e,t=!1,n="Timeout"){return new Promise((o,i)=>{t?setTimeout(()=>i(n),e):setTimeout(o,e)})}function se(t,n,o={}){const{eventFilter:i=le}=o,r=s(o,e);return N(t,(a=i,l=n,function(...e){return new Promise((t,n)=>{Promise.resolve(a(()=>l.apply(this,e),{fn:l,thisArg:this,args:e})).then(t).catch(n)})}),r);var a,l}function ce(e,n,o={}){const{eventFilter:i}=o,r=s(o,t),{eventFilter:a,pause:u,resume:c,isActive:d}=function(e=le){const t=E(!0);return{isActive:W(t),pause:function(){t.value=!1},resume:function(){t.value=!0},eventFilter:(...n)=>{t.value&&e(...n)}}}(i);return{stop:se(e,n,l(l({},r),{},{eventFilter:a})),pause:u,resume:c,isActive:d}}function de(e,t=!1){function n(n,{flush:o="sync",deep:i=!1,timeout:r,throwOnTimeout:a}={}){let l=null;const u=[new Promise(r=>{l=N(e,e=>{n(e)!==t&&(null==l||l(),r(e))},{flush:o,deep:i,immediate:!0})})];return null!=r&&u.push(ue(r,a).then(()=>oe(e)).finally(()=>null==l?void 0:l())),Promise.race(u)}function o(o,i){if(!j(o))return n(e=>e===o,i);const{flush:r="sync",deep:a=!1,timeout:l,throwOnTimeout:u}=null!=i?i:{};let s=null;const c=[new Promise(n=>{s=N([e,o],([e,o])=>{t!==(e===o)&&(null==s||s(),n(e))},{flush:r,deep:a,immediate:!0})})];return null!=l&&c.push(ue(l,u).then(()=>oe(e)).finally(()=>(null==s||s(),oe(e)))),Promise.race(c)}function i(e){return r(1,e)}function r(e=1,t){let o=-1;return n(()=>(o+=1,o>=e),t)}if(Array.isArray(oe(e))){return{toMatch:n,toContains:function(e,t){return n(t=>{const n=Array.from(t);return n.includes(e)||n.includes(oe(e))},t)},changed:i,changedTimes:r,get not(){return de(e,!t)}}}return{toMatch:n,toBe:o,toBeTruthy:function(e){return n(e=>Boolean(e),e)},toBeNull:function(e){return o(null,e)},toBeNaN:function(e){return n(Number.isNaN,e)},toBeUndefined:function(e){return o(void 0,e)},changed:i,changedTimes:r,get not(){return de(e,!t)}}}function ve(e){return de(e)}function fe(e){var t;const n=oe(e);return null!=(t=null==n?void 0:n.$el)?t:n}const he=ie?window:void 0;function pe(...e){let t,n,o,i;if("string"==typeof e[0]||Array.isArray(e[0])?([n,o,i]=e,t=he):[t,n,o,i]=e,!t)return ae;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],a=()=>{r.forEach(e=>e()),r.length=0},s=N(()=>[fe(t),oe(i)],([e,t])=>{if(a(),!e)return;const i=(u=t,"[object Object]"===re.call(u)?l({},t):t);var u;r.push(...n.flatMap(t=>o.map(n=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,t,n,i))))},{immediate:!0,flush:"post"}),c=()=>{s(),a()};return u(c),c}function ge(...e){let t,n,o={};3===e.length?(t=e[0],n=e[1],o=e[2]):2===e.length?"object"==typeof e[1]?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=he,eventName:r="keydown",passive:a=!1,dedupe:l=!1}=o,u="function"==typeof(s=t)?s:"string"==typeof s?e=>e.key===s:Array.isArray(s)?e=>s.includes(e.key):()=>!0;var s;return pe(i,r,e=>{e.repeat&&oe(l)||u(e)&&n(e)},a)}function me(e,t,n,o={}){var i,r,a;const{clone:l=!1,passive:u=!1,eventName:s,deep:c=!1,defaultValue:d,shouldEmit:v}=o,f=R(),h=n||(null==f?void 0:f.emit)||(null==(i=null==f?void 0:f.$emit)?void 0:i.bind(f))||(null==(a=null==(r=null==f?void 0:f.proxy)?void 0:r.$emit)?void 0:a.bind(null==f?void 0:f.proxy));let p=s;t||(t="modelValue"),p=p||`update:${t.toString()}`;const g=e=>{return l?"function"==typeof l?l(e):(t=e,JSON.parse(JSON.stringify(t))):e;var t},m=()=>void 0!==e[t]?g(e[t]):d,y=e=>{v?v(e)&&h(p,e):h(p,e)};if(u){const n=m(),o=E(n);let i=!1;return N(()=>e[t],e=>{i||(i=!0,o.value=g(e),A(()=>i=!1))}),N(o,n=>{i||n===e[t]&&!c||y(n)},{deep:c}),o}return S({get:()=>m(),set(e){y(e)}})}var ye={value:()=>{}};function we(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new be(o)}function be(e){this._=e}function xe(e,t){for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).name===t)return n.value}function _e(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=ye,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}be.prototype=we.prototype={constructor:be,on:function(e,t){var n,o,i=this._,r=(o=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,l=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=r[a]).type)i[n]=_e(i[n],e.name,t);else if(null==t)for(n in i)i[n]=_e(i[n],e.name,null);return this}for(;++a<l;)if((n=(e=r[a]).type)&&(n=xe(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new be(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,i=new Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,n=(o=this._[e]).length;r<n;++r)o[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};var Ee="http://www.w3.org/1999/xhtml";const Se={svg:"http://www.w3.org/2000/svg",xhtml:Ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ne(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Se.hasOwnProperty(t)?{space:Se[t],local:e}:e}function ke(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ee&&t.documentElement.namespaceURI===Ee?t.createElement(e):t.createElementNS(n,e)}}function Me(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ce(e){var t=Ne(e);return(t.local?Me:ke)(t)}function Ie(){}function Pe(e){return null==e?Ie:function(){return this.querySelector(e)}}function Te(){return[]}function Oe(e){return null==e?Te:function(){return this.querySelectorAll(e)}}function Ae(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function De(e){return function(){return this.matches(e)}}function $e(e){return function(t){return t.matches(e)}}var ze=Array.prototype.find;function Be(){return this.firstElementChild}var Ve=Array.prototype.filter;function Le(){return Array.from(this.children)}function Re(e){return new Array(e.length)}function He(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Ye(e,t,n,o,i,r){for(var a,l=0,u=t.length,s=r.length;l<s;++l)(a=t[l])?(a.__data__=r[l],o[l]=a):n[l]=new He(e,r[l]);for(;l<u;++l)(a=t[l])&&(i[l]=a)}function Ge(e,t,n,o,i,r,a){var l,u,s,c=new Map,d=t.length,v=r.length,f=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(f[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?i[l]=u:c.set(s,u));for(l=0;l<v;++l)s=a.call(e,r[l],l,r)+"",(u=c.get(s))?(o[l]=u,u.__data__=r[l],c.delete(s)):n[l]=new He(e,r[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(f[l])===u&&(i[l]=u)}function Fe(e){return e.__data__}function Xe(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Ue(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function je(e){return function(){this.removeAttribute(e)}}function Ze(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ke(e,t){return function(){this.setAttribute(e,t)}}function We(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Je(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function et(e){return function(){this.style.removeProperty(e)}}function tt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function nt(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ot(e,t){return e.style.getPropertyValue(t)||Qe(e).getComputedStyle(e,null).getPropertyValue(t)}function it(e){return function(){delete this[e]}}function rt(e,t){return function(){this[e]=t}}function at(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function lt(e){return e.trim().split(/^|\s+/)}function ut(e){return e.classList||new st(e)}function st(e){this._node=e,this._names=lt(e.getAttribute("class")||"")}function ct(e,t){for(var n=ut(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function dt(e,t){for(var n=ut(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function vt(e){return function(){ct(this,e)}}function ft(e){return function(){dt(this,e)}}function ht(e,t){return function(){(t.apply(this,arguments)?ct:dt)(this,e)}}function pt(){this.textContent=""}function gt(e){return function(){this.textContent=e}}function mt(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function yt(){this.innerHTML=""}function wt(e){return function(){this.innerHTML=e}}function bt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function xt(){this.nextSibling&&this.parentNode.appendChild(this)}function _t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Et(){return null}function St(){var e=this.parentNode;e&&e.removeChild(this)}function Nt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mt(e){return function(){var t=this.__on;if(t){for(var n,o=0,i=-1,r=t.length;o<r;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Ct(e,t,n){return function(){var o,i=this.__on,r=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),void(o.value=t);this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function It(e,t,n){var o=Qe(e),i=o.CustomEvent;"function"==typeof i?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Pt(e,t){return function(){return It(this,e,t)}}function Tt(e,t){return function(){return It(this,e,t.apply(this,arguments))}}He.prototype={constructor:He,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},st.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ot=[null];function At(e,t){this._groups=e,this._parents=t}function Dt(){return new At([[document.documentElement]],Ot)}function $t(e){return"string"==typeof e?new At([[document.querySelector(e)]],[document.documentElement]):new At([[e]],Ot)}function zt(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}At.prototype=Dt.prototype={constructor:At,select:function(e){"function"!=typeof e&&(e=Pe(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a,l=t[i],u=l.length,s=o[i]=new Array(u),c=0;c<u;++c)(r=l[c])&&(a=e.call(r,r.__data__,c,l))&&("__data__"in r&&(a.__data__=r.__data__),s[c]=a);return new At(o,this._parents)},selectAll:function(e){e="function"==typeof e?Ae(e):Oe(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a,l=t[r],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),i.push(a));return new At(o,i)},selectChild:function(e){return this.select(null==e?Be:function(e){return function(){return ze.call(this.children,e)}}("function"==typeof e?e:$e(e)))},selectChildren:function(e){return this.selectAll(null==e?Le:function(e){return function(){return Ve.call(this.children,e)}}("function"==typeof e?e:$e(e)))},filter:function(e){"function"!=typeof e&&(e=De(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,u=o[i]=[],s=0;s<l;++s)(r=a[s])&&e.call(r,r.__data__,s,a)&&u.push(r);return new At(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Fe);var n,o=t?Ge:Ye,i=this._parents,r=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=r.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=i[c],v=r[c],f=v.length,h=Xe(e.call(d,d&&d.__data__,c,i)),p=h.length,g=u[c]=new Array(p),m=l[c]=new Array(p);o(d,v,g,m,s[c]=new Array(f),h,t);for(var y,w,b=0,x=0;b<p;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(w=m[x])&&++x<p;);y._next=w||null}}return(l=new At(l,i))._enter=u,l._exit=s,l},enter:function(){return new At(this._enter||this._groups.map(Re),this._parents)},exit:function(){return new At(this._exit||this._groups.map(Re),this._parents)},join:function(e,t,n){var o=this.enter(),i=this,r=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?r.remove():n(r),o&&i?o.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),l=new Array(i),u=0;u<a;++u)for(var s,c=n[u],d=o[u],v=c.length,f=l[u]=new Array(v),h=0;h<v;++h)(s=c[h]||d[h])&&(f[h]=s);for(;u<i;++u)l[u]=n[u];return new At(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,i=e[t],r=i.length-1,a=i[r];--r>=0;)(o=i[r])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ue);for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a,l=n[r],u=l.length,s=i[r]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new At(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i,r=t[n],a=0,l=r.length;a<l;++a)(i=r[a])&&e.call(i,i.__data__,a,r);return this},attr:function(e,t){var n=Ne(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Ze:je:"function"==typeof t?n.local?Je:qe:n.local?We:Ke)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?et:"function"==typeof t?nt:tt)(e,t,null==n?"":n)):ot(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?it:"function"==typeof t?at:rt)(e,t)):this.node()[e]},classed:function(e,t){var n=lt(e+"");if(arguments.length<2){for(var o=ut(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?ht:t?vt:ft)(n,t))},text:function(e){return arguments.length?this.each(null==e?pt:("function"==typeof e?mt:gt)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?yt:("function"==typeof e?bt:wt)(e)):this.node().innerHTML},raise:function(){return this.each(xt)},lower:function(){return this.each(_t)},append:function(e){var t="function"==typeof e?e:Ce(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Ce(e),o=null==t?Et:"function"==typeof t?t:Pe(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function(){return this.each(St)},clone:function(e){return this.select(e?kt:Nt)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,i,r=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=r.length;if(!(arguments.length<2)){for(l=t?Ct:Mt,o=0;o<a;++o)this.each(l(r[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?Tt:Pt)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,i=e[t],r=0,a=i.length;r<a;++r)(o=i[r])&&(yield o)}};const Bt={passive:!1},Vt={capture:!0,passive:!1};function Lt(e){e.stopImmediatePropagation()}function Rt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ht(e){var t=e.document.documentElement,n=$t(e).on("dragstart.drag",Rt,Vt);"onselectstart"in t?n.on("selectstart.drag",Rt,Vt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Yt(e,t){var n=e.document.documentElement,o=$t(e).on("dragstart.drag",null);t&&(o.on("click.drag",Rt,Vt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Gt=e=>()=>e;function Ft(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function Xt(e){return!e.ctrlKey&&!e.button}function Ut(){return this.parentNode}function jt(e,t){return null==t?{x:e.x,y:e.y}:t}function Zt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wt(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function qt(){}Ft.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Jt=.7,Qt=1/Jt,en="\\s*([+-]?\\d+)\\s*",tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",on=/^#([0-9a-f]{3,8})$/,rn=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),an=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),ln=new RegExp(`^rgba\\(${en},${en},${en},${tn}\\)$`),un=new RegExp(`^rgba\\(${nn},${nn},${nn},${tn}\\)$`),sn=new RegExp(`^hsl\\(${tn},${nn},${nn}\\)$`),cn=new RegExp(`^hsla\\(${tn},${nn},${nn},${tn}\\)$`),dn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vn(){return this.rgb().formatHex()}function fn(){return this.rgb().formatRgb()}function hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=on.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?pn(t):3===n?new yn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?gn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=rn.exec(e))?new yn(t[1],t[2],t[3],1):(t=an.exec(e))?new yn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ln.exec(e))?gn(t[1],t[2],t[3],t[4]):(t=un.exec(e))?gn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=sn.exec(e))?Sn(t[1],t[2]/100,t[3]/100,1):(t=cn.exec(e))?Sn(t[1],t[2]/100,t[3]/100,t[4]):dn.hasOwnProperty(e)?pn(dn[e]):"transparent"===e?new yn(NaN,NaN,NaN,0):null}function pn(e){return new yn(e>>16&255,e>>8&255,255&e,1)}function gn(e,t,n,o){return o<=0&&(e=t=n=NaN),new yn(e,t,n,o)}function mn(e,t,n,o){return 1===arguments.length?((i=e)instanceof qt||(i=hn(i)),i?new yn((i=i.rgb()).r,i.g,i.b,i.opacity):new yn):new yn(e,t,n,null==o?1:o);var i}function yn(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function wn(){return`#${En(this.r)}${En(this.g)}${En(this.b)}`}function bn(){const e=xn(this.opacity);return`${1===e?"rgb(":"rgba("}${_n(this.r)}, ${_n(this.g)}, ${_n(this.b)}${1===e?")":`, ${e})`}`}function xn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _n(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function En(e){return((e=_n(e))<16?"0":"")+e.toString(16)}function Sn(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kn(e,t,n,o)}function Nn(e){if(e instanceof kn)return new kn(e.h,e.s,e.l,e.opacity);if(e instanceof qt||(e=hn(e)),!e)return new kn;if(e instanceof kn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,l=r-i,u=(r+i)/2;return l?(a=t===r?(n-o)/l+6*(n<o):n===r?(o-t)/l+2:(t-n)/l+4,l/=u<.5?r+i:2-r-i,a*=60):l=u>0&&u<1?0:a,new kn(a,l,u,e.opacity)}function kn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function Mn(e){return(e=(e||0)%360)<0?e+360:e}function Cn(e){return Math.max(0,Math.min(1,e||0))}function In(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Kt(qt,hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vn,formatHex:vn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Nn(this).formatHsl()},formatRgb:fn,toString:fn}),Kt(yn,mn,Wt(qt,{brighter(e){return e=null==e?Qt:Math.pow(Qt,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Jt:Math.pow(Jt,e),new yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yn(_n(this.r),_n(this.g),_n(this.b),xn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wn,formatHex:wn,formatHex8:function(){return`#${En(this.r)}${En(this.g)}${En(this.b)}${En(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:bn,toString:bn})),Kt(kn,function(e,t,n,o){return 1===arguments.length?Nn(e):new kn(e,t,n,null==o?1:o)},Wt(qt,{brighter(e){return e=null==e?Qt:Math.pow(Qt,e),new kn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Jt:Math.pow(Jt,e),new kn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new yn(In(e>=240?e-240:e+120,i,o),In(e,i,o),In(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new kn(Mn(this.h),Cn(this.s),Cn(this.l),xn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xn(this.opacity);return`${1===e?"hsl(":"hsla("}${Mn(this.h)}, ${100*Cn(this.s)}%, ${100*Cn(this.l)}%${1===e?")":`, ${e})`}`}}));const Pn=e=>()=>e;function Tn(e){return 1===(e=+e)?On:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Pn(isNaN(t)?n:t)}}function On(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Pn(isNaN(e)?t:e)}const An=function e(t){var n=Tn(t);function o(e,t){var o=n((e=mn(e)).r,(t=mn(t)).r),i=n(e.g,t.g),r=n(e.b,t.b),a=On(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Dn(e,t){t||(t=[]);var n,o=e?Math.min(t.length,e.length):0,i=t.slice();return function(r){for(n=0;n<o;++n)i[n]=e[n]*(1-r)+t[n]*r;return i}}function $n(e,t){var n,o=t?t.length:0,i=e?Math.min(o,e.length):0,r=new Array(i),a=new Array(o);for(n=0;n<i;++n)r[n]=Yn(e[n],t[n]);for(;n<o;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=r[n](e);return a}}function zn(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Bn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Vn(e,t){var n,o={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?o[n]=Yn(e[n],t[n]):i[n]=t[n];return function(e){for(n in o)i[n]=o[n](e);return i}}var Ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rn=new RegExp(Ln.source,"g");function Hn(e,t){var n,o,i,r=Ln.lastIndex=Rn.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=Ln.exec(e))&&(o=Rn.exec(t));)(i=o.index)>r&&(i=t.slice(r,i),l[a]?l[a]+=i:l[++a]=i),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:Bn(n,o)})),r=Rn.lastIndex;return r<t.length&&(i=t.slice(r),l[a]?l[a]+=i:l[++a]=i),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}function Yn(e,t){var n,o,i=typeof t;return null==t||"boolean"===i?Pn(t):("number"===i?Bn:"string"===i?(n=hn(t))?(t=n,An):Hn:t instanceof hn?An:t instanceof Date?zn:(o=t,!ArrayBuffer.isView(o)||o instanceof DataView?Array.isArray(t)?$n:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Vn:Bn:Dn))(e,t)}var Gn,Fn=180/Math.PI,Xn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Un(e,t,n,o,i,r){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Fn,skewX:Math.atan(u)*Fn,scaleX:a,scaleY:l}}function jn(e,t,n,o){function i(e){return e.length?e.pop()+" ":""}return function(r,a){var l=[],u=[];return r=e(r),a=e(a),function(e,o,i,r,a,l){if(e!==i||o!==r){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:Bn(e,i)},{i:u-2,x:Bn(o,r)})}else(i||r)&&a.push("translate("+i+t+r+n)}(r.translateX,r.translateY,a.translateX,a.translateY,l,u),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(i(n)+"rotate(",null,o)-2,x:Bn(e,t)})):t&&n.push(i(n)+"rotate("+t+o)}(r.rotate,a.rotate,l,u),function(e,t,n,r){e!==t?r.push({i:n.push(i(n)+"skewX(",null,o)-2,x:Bn(e,t)}):t&&n.push(i(n)+"skewX("+t+o)}(r.skewX,a.skewX,l,u),function(e,t,n,o,r,a){if(e!==n||t!==o){var l=r.push(i(r)+"scale(",null,",",null,")");a.push({i:l-4,x:Bn(e,n)},{i:l-2,x:Bn(t,o)})}else 1===n&&1===o||r.push(i(r)+"scale("+n+","+o+")")}(r.scaleX,r.scaleY,a.scaleX,a.scaleY,l,u),r=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Zn=jn(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xn:Un(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Kn=jn(function(e){return null==e?Xn:(Gn||(Gn=document.createElementNS("http://www.w3.org/2000/svg","g")),Gn.setAttribute("transform",e),(e=Gn.transform.baseVal.consolidate())?Un((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Xn)},", ",")",")");function Wn(e){return((e=Math.exp(e))+1/e)/2}const qn=function e(t,n,o){function i(e,i){var r,a,l=e[0],u=e[1],s=e[2],c=i[0],d=i[1],v=i[2],f=c-l,h=d-u,p=f*f+h*h;if(p<1e-12)a=Math.log(v/s)/t,r=function(e){return[l+e*f,u+e*h,s*Math.exp(t*e*a)]};else{var g=Math.sqrt(p),m=(v*v-s*s+o*p)/(2*s*n*g),y=(v*v-s*s-o*p)/(2*v*n*g),w=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/t,r=function(e){var o,i=e*a,r=Wn(w),c=s/(n*g)*(r*(o=t*i+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[l+c*f,u+c*h,s*r/Wn(t*i+w)]}}return r.duration=1e3*a*t/Math.SQRT2,r}return i.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},i}(Math.SQRT2,2,4);var Jn,Qn,eo=0,to=0,no=0,oo=0,io=0,ro=0,ao="object"==typeof performance&&performance.now?performance:Date,lo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function uo(){return io||(lo(so),io=ao.now()+ro)}function so(){io=0}function co(){this._call=this._time=this._next=null}function vo(e,t,n){var o=new co;return o.restart(e,t,n),o}function fo(){io=(oo=ao.now())+ro,eo=to=0;try{!function(){uo(),++eo;for(var e,t=Jn;t;)(e=io-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eo}()}finally{eo=0,function(){var e,t,n=Jn,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Jn=t);Qn=e,po(o)}(),io=0}}function ho(){var e=ao.now(),t=e-oo;t>1e3&&(ro-=t,oo=e)}function po(e){eo||(to&&(to=clearTimeout(to)),e-io>24?(e<1/0&&(to=setTimeout(fo,e-ao.now()-ro)),no&&(no=clearInterval(no))):(no||(oo=ao.now(),no=setInterval(ho,1e3)),eo=1,lo(fo)))}function go(e,t,n){var o=new co;return t=null==t?0:+t,o.restart(n=>{o.stop(),e(n+t)},t,n),o}co.prototype=vo.prototype={constructor:co,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?uo():+n)+(null==t?0:+t),this._next||Qn===this||(Qn?Qn._next=this:Jn=this,Qn=this),this._call=e,this._time=n,po()},stop:function(){this._call&&(this._call=null,this._time=1/0,po())}};var mo=we("start","end","cancel","interrupt"),yo=[];function wo(e,t,n,o,i,r){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,i=e.__transition;function r(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(r){var s,c,d,v;if(1!==n.state)return u();for(s in i)if((v=i[s]).name===n.name){if(3===v.state)return go(a);4===v.state?(v.state=6,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete i[s]):+s<t&&(v.state=6,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete i[s])}if(go(function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(r))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(v=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=v);o.length=c+1}}function l(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),r=-1,a=o.length;++r<a;)o[r].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=vo(r,0,n.time)}(e,n,{name:t,index:o,group:i,on:mo,tween:yo,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function bo(e,t){var n=_o(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function xo(e,t){var n=_o(e,t);if(n.state>3)throw new Error("too late; already running");return n}function _o(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Eo(e,t){var n,o,i,r=e.__transition,a=!0;if(r){for(i in t=null==t?null:t+"",r)(n=r[i]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]):a=!1;a&&delete e.__transition}}function So(e,t){var n,o;return function(){var i=xo(this,e),r=i.tween;if(r!==n)for(var a=0,l=(o=n=r).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}i.tween=o}}function No(e,t,n){var o,i;if("function"!=typeof n)throw new Error;return function(){var r=xo(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=l;break}u===s&&i.push(l)}r.tween=i}}function ko(e,t,n){var o=e._id;return e.each(function(){var e=xo(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return _o(e,o).value[t]}}function Mo(e,t){var n;return("number"==typeof t?Bn:t instanceof hn?An:(n=hn(t))?(t=n,An):Hn)(e,t)}function Co(e){return function(){this.removeAttribute(e)}}function Io(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Po(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function To(e,t,n){var o,i,r=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function Oo(e,t,n){var o,i,r;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===i?r:(i=l,r=t(o=a,u));this.removeAttribute(e)}}function Ao(e,t,n){var o,i,r;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===i?r:(i=l,r=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function Do(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function $o(e,t){var n,o;function i(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function zo(e,t){return function(){bo(this,e).delay=+t.apply(this,arguments)}}function Bo(e,t){return t=+t,function(){bo(this,e).delay=t}}function Vo(e,t){return function(){xo(this,e).duration=+t.apply(this,arguments)}}function Lo(e,t){return t=+t,function(){xo(this,e).duration=t}}var Ro=Dt.prototype.constructor;function Ho(e){return function(){this.style.removeProperty(e)}}var Yo=0;function Go(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Fo(){return++Yo}var Xo=Dt.prototype;Go.prototype={constructor:Go,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Pe(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l,u,s=o[a],c=s.length,d=r[a]=new Array(c),v=0;v<c;++v)(l=s[v])&&(u=e.call(l,l.__data__,v,s))&&("__data__"in l&&(u.__data__=l.__data__),d[v]=u,wo(d[v],t,n,v,d,_o(l,n)));return new Go(r,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Oe(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var v,f=e.call(u,u.__data__,d,s),h=_o(u,n),p=0,g=f.length;p<g;++p)(v=f[p])&&wo(v,t,n,p,f,h);r.push(f),a.push(u)}return new Go(r,a,t,n)},selectChild:Xo.selectChild,selectChildren:Xo.selectChildren,filter:function(e){"function"!=typeof e&&(e=De(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r,a=t[i],l=a.length,u=o[i]=[],s=0;s<l;++s)(r=a[s])&&e.call(r,r.__data__,s,a)&&u.push(r);return new Go(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var u,s=t[l],c=n[l],d=s.length,v=a[l]=new Array(d),f=0;f<d;++f)(u=s[f]||c[f])&&(v[f]=u);for(;l<o;++l)a[l]=t[l];return new Go(a,this._parents,this._name,this._id)},selection:function(){return new Ro(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Fo(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=_o(a,t);wo(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Go(o,this._parents,e,n)},call:Xo.call,nodes:Xo.nodes,node:Xo.node,size:Xo.size,empty:Xo.empty,each:Xo.each,on:function(e,t){var n=this._id;return arguments.length<2?_o(this.node(),n).on.on(e):this.each(function(e,t,n){var o,i,r=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?bo:xo;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=Ne(e),o="transform"===n?Kn:Mo;return this.attrTween(e,"function"==typeof t?(n.local?Ao:Oo)(n,o,ko(this,"attr."+e,t)):null==t?(n.local?Io:Co)(n):(n.local?To:Po)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=Ne(e);return this.tween(n,(o.local?Do:$o)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?Zn:Mo;return null==t?this.styleTween(e,function(e,t){var n,o,i;return function(){var r=ot(this,e),a=(this.style.removeProperty(e),ot(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}(e,o)).on("end.style."+e,Ho(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,i,r;return function(){var a=ot(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=ot(this,e)),a===u?null:a===o&&u===i?r:(i=u,r=t(o=a,l))}}(e,o,ko(this,"style."+e,t))).each(function(e,t){var n,o,i,r,a="style."+t,l="end."+a;return function(){var u=xo(this,e),s=u.on,c=null==u.value[a]?r||(r=Ho(t)):void 0;s===n&&i===c||(o=(n=s).copy()).on(l,i=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,i,r=n+"";return function(){var a=ot(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,i;function r(){var r=t.apply(this,arguments);return r!==i&&(o=(i=r)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,r,n)),o}return r._value=t,r}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ko(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,i=_o(this.node(),n).tween,r=0,a=i.length;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((null==t?So:No)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?zo:Bo)(t,e)):_o(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Vo:Lo)(t,e)):_o(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){xo(this,e).ease=t}}(t,e)):_o(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;xo(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,a){var l={value:a},u={value:function(){0===--i&&r()}};n.each(function(){var n=xo(this,o),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t}),0===i&&r()})},[Symbol.iterator]:Xo[Symbol.iterator]};var Uo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function jo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Dt.prototype.interrupt=function(e){return this.each(function(){Eo(this,e)})},Dt.prototype.transition=function(e){var t,n;e instanceof Go?(t=e._id,e=e._name):(t=Fo(),(n=Uo).time=uo(),e=null==e?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a,l=o[r],u=l.length,s=0;s<u;++s)(a=l[s])&&wo(a,e,t,s,l,n||jo(a,t));return new Go(o,this._parents,e,t)};const Zo=e=>()=>e;function Ko(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Wo(e,t,n){this.k=e,this.x=t,this.y=n}Wo.prototype={constructor:Wo,scale:function(e){return 1===e?this:new Wo(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Wo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qo=new Wo(1,0,0);function Jo(e){e.stopImmediatePropagation()}function Qo(e){e.preventDefault(),e.stopImmediatePropagation()}function ei(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function ti(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function ni(){return this.__zoom||qo}function oi(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ii(){return navigator.maxTouchPoints||"ontouchstart"in this}function ri(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}Wo.prototype;var ai=a("P",(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ai||{})),li=(e=>(e.Partial="partial",e.Full="full",e))(li||{}),ui=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ui||{}),si=(e=>(e.Strict="strict",e.Loose="loose",e))(si||{}),ci=a("M",(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(ci||{})),di=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(di||{});const vi=["INPUT","SELECT","TEXTAREA"],fi="undefined"!=typeof document?document:null;function hi(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,i="function"==typeof(null==o?void 0:o.hasAttribute)&&o.hasAttribute("contenteditable"),r="function"==typeof(null==o?void 0:o.closest)?o.closest(".nokey"):null;return vi.includes(null==o?void 0:o.nodeName)||i||!!r}function pi(e,t,n,o){const i=t.replace("+","\n").replace("\n\n","\n+").split("\n").map(e=>e.trim().toLowerCase());if(1===i.length)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=i.every((e,t)=>n.has(e)&&Array.from(n.values())[t]===i[t]);return o&&n.delete(e.toLowerCase()),r}function gi(e,t){const n=S(()=>{var e;return null!==(e=X(null==t?void 0:t.target))&&void 0!==e?e:fi}),o=V(!0===X(e));let i=!1;const r=new Set;let a=u(X(e));function l(){i=!1,r.clear(),o.value=!0===X(e)}function u(e){return null===e?(l(),()=>!1):"boolean"==typeof e?(l(),o.value=e,()=>!1):Array.isArray(e)||"string"==typeof e?function(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=(i=n.code,e.includes(i)?"code":"key");var i;return Array.isArray(e)?e.some(e=>pi(n[o],e,t,"keyup"===n.type)):pi(n[o],e,t,"keyup"===n.type)}}(e,r):e}return N(()=>X(e),(e,t)=>{"boolean"==typeof t&&"boolean"!=typeof e&&l(),a=u(e)},{immediate:!0}),pe(["blur","contextmenu"],l),ge((...e)=>a(...e),e=>{var n,r,a,l;const u=null===(n=X(null==t?void 0:t.actInsideInputWithModifier))||void 0===n||n,s=null!==(r=X(null==t?void 0:t.preventDefault))&&void 0!==r&&r;var c;i=(c=e).ctrlKey||c.metaKey||c.shiftKey||c.altKey;if((!i||i&&!u)&&hi(e))return;const d=(null==(l=null==(a=e.composedPath)?void 0:a.call(e))?void 0:l[0])||e.target,v="BUTTON"===(null==d?void 0:d.nodeName)||"A"===(null==d?void 0:d.nodeName);s||!i&&v||e.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),ge((...e)=>a(...e),e=>{var n;const r=null===(n=X(null==t?void 0:t.actInsideInputWithModifier))||void 0===n||n;if(o.value){if((!i||i&&!r)&&hi(e))return;i=!1,o.value=!1}},{eventName:"keyup",target:n}),o}const mi="vue-flow__node-desc",yi="vue-flow__edge-desc",wi=["Enter"," ","Escape"],bi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function xi(e){return l(l({},e.computedPosition||{x:0,y:0}),{},{width:e.dimensions.width||0,height:e.dimensions.height||0})}function _i(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Ei(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Si(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Ni(e,t){return{x:Si(e.x,t[0][0],t[1][0]),y:Si(e.y,t[0][1],t[1][1])}}function ki(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Mi(e){return e&&"object"==typeof e&&"id"in e&&"source"in e&&"target"in e}function Ci(e){return e&&"object"==typeof e&&"id"in e&&"position"in e&&!Mi(e)}function Ii(e){return Ci(e)&&"computedPosition"in e}function Pi(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Ti(e,t,n){var o;const i={id:e.id.toString(),type:null!==(o=e.type)&&void 0!==o?o:"default",dimensions:q({width:0,height:0}),computedPosition:q(l({z:0},e.position)),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Or(e.data)?e.data:{},events:q(Or(e.events)?e.events:{})};return Object.assign(null!=t?t:i,e,{id:e.id.toString(),parentNode:n})}function Oi(e,t,n){var o,i,r,a,u,s,c,d,v;const f=l({id:e.id.toString(),type:null!==(o=null!==(i=e.type)&&void 0!==i?i:null==t?void 0:t.type)&&void 0!==o?o:"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:null==(d=e.sourceHandle)?void 0:d.toString(),targetHandle:null==(v=e.targetHandle)?void 0:v.toString(),updatable:null!==(r=e.updatable)&&void 0!==r?r:null==n?void 0:n.updatable,selectable:null!==(a=e.selectable)&&void 0!==a?a:null==n?void 0:n.selectable,focusable:null!==(u=e.focusable)&&void 0!==u?u:null==n?void 0:n.focusable,data:Or(e.data)?e.data:{},events:q(Or(e.events)?e.events:{}),label:null!==(s=e.label)&&void 0!==s?s:"",interactionWidth:null!==(c=e.interactionWidth)&&void 0!==c?c:null==n?void 0:n.interactionWidth},null!=n?n:{});return Object.assign(null!=t?t:f,e,{id:e.id.toString()})}function Ai(e,t,n,o){const i="string"==typeof e?e:e.id,r=new Set,a="source"===o?"target":"source";for(const l of n)l[a]===i&&r.add(l[o]);return t.filter(e=>r.has(e.id))}function Di({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${null!=t?t:""}-${n}${null!=o?o:""}`}function $i({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function zi({x:e,y:t},{x:n,y:o,zoom:i},r=!1,a=[1,1]){const l={x:(e-n)/i,y:(t-o)/i};return r?wr(l,a):l}function Bi(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Vi({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Li(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=Bi(t,Vi(l(l({},o.computedPosition),o.dimensions)))}return function({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}(t)}function Ri(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r=l(l({},zi(t,n)),{},{width:t.width/n.zoom,height:t.height/n.zoom}),a=[];for(const l of e){var u,s,c,d;const{dimensions:e,selectable:t=!0,hidden:n=!1}=l,v=null!==(u=null!==(s=e.width)&&void 0!==s?s:l.width)&&void 0!==u?u:null,f=null!==(c=null!==(d=e.height)&&void 0!==d?d:l.height)&&void 0!==c?c:null;if(i&&!t||n)continue;const h=_i(r,xi(l));(null===v||null===f||o&&h>0||h>=(null!=v?v:0)*(null!=f?f:0)||l.dragging)&&a.push(l)}return a}function Hi(e,t){const n=new Set;if("string"==typeof e)n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(e=>n.has(e.source)||n.has(e.target))}function Yi(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=Number.parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Cr(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Gi(e,t,n,o,i,r=.1){const a=function(e,t,n){if("string"==typeof e||"number"==typeof e){const o=Yi(e,n),i=Yi(e,t);return{top:o,right:i,bottom:o,left:i,x:2*i,y:2*o}}if("object"==typeof e){var o,i,r,a,l,u,s,c;const d=Yi(null!==(o=null!==(i=e.top)&&void 0!==i?i:e.y)&&void 0!==o?o:0,n),v=Yi(null!==(r=null!==(a=e.bottom)&&void 0!==a?a:e.y)&&void 0!==r?r:0,n),f=Yi(null!==(l=null!==(u=e.left)&&void 0!==u?u:e.x)&&void 0!==l?l:0,t),h=Yi(null!==(s=null!==(c=e.right)&&void 0!==c?c:e.x)&&void 0!==s?s:0,t);return{top:d,right:h,bottom:v,left:f,x:f+h,y:d+v}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(r,t,n),l=(t-a.x)/e.width,u=(n-a.y)/e.height,s=Si(Math.min(l,u),o,i),c=t/2-(e.x+e.width/2)*s,d=n/2-(e.y+e.height/2)*s,v=function(e,t,n,o,i,r){const{x:a,y:l}=$i(e,{x:t,y:n,zoom:o}),{x:u,y:s}=$i({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=i-u,d=r-s;return{left:Math.floor(a),top:Math.floor(l),right:Math.floor(c),bottom:Math.floor(d)}}(e,c,d,s,t,n),f=Math.min(v.left-a.left,0),h=Math.min(v.top-a.top,0);return{x:c-f+Math.min(v.right-a.right,0),y:d-h+Math.min(v.bottom-a.bottom,0),zoom:s}}function Fi(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return!!n&&(!!n.selected||Fi(n,t))}function Xi(e,t){if(void 0===e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}function Ui(e){const t=e.ctrlKey&&yr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t}function ji(e,t,n){return e<t?Si(Math.abs(e-t),1,t)/t:e>n?-Si(Math.abs(e-n),1,t)/t:0}function Zi(e,t,n=15,o=40){return[ji(e.x,o,t.width-o)*n,ji(e.y,o,t.height-o)*n]}function Ki(e,t){if(t){const i=e.position.x+e.dimensions.width-t.dimensions.width,r=e.position.y+e.dimensions.height-t.dimensions.height;if(i>0||r>0||e.position.x<0||e.position.y<0){var n,o;let a={};if("function"==typeof t.style?a=l({},t.style(t)):t.style&&(a=l({},t.style)),a.width=null!==(n=a.width)&&void 0!==n?n:`${t.dimensions.width}px`,a.height=null!==(o=a.height)&&void 0!==o?o:`${t.dimensions.height}px`,i>0)if("string"==typeof a.width){const e=Number(a.width.replace("px",""));a.width=`${e+i}px`}else a.width+=i;if(r>0)if("string"==typeof a.height){const e=Number(a.height.replace("px",""));a.height=`${e+r}px`}else a.height+=r;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"==typeof a.width){const e=Number(a.width.replace("px",""));a.width=`${e+n}px`}else a.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"==typeof a.height){const e=Number(a.height.replace("px",""));a.height=`${e+n}px`}else a.height+=n;e.position.y=0}t.dimensions.width=Number(a.width.toString().replace("px","")),t.dimensions.height=Number(a.height.toString().replace("px","")),"function"==typeof t.style?t.style=e=>l(l({},(0,t.style)(e)),a):t.style=l(l({},t.style),a)}}}function Wi(e,t){var n,o;const i=e.filter(e=>"add"===e.type||"remove"===e.type);for(const a of i)if("add"===a.type){-1===t.findIndex(e=>e.id===a.item.id)&&t.push(a.item)}else if("remove"===a.type){const e=t.findIndex(e=>e.id===a.id);-1!==e&&t.splice(e,1)}const r=t.map(e=>e.id);for(const a of t)for(const i of e)if(i.id===a.id)switch(i.type){case"select":a.selected=i.selected;break;case"position":if(Ii(a)&&(void 0!==i.position&&(a.position=i.position),void 0!==i.dragging&&(a.dragging=i.dragging),a.expandParent&&a.parentNode)){const e=t[r.indexOf(a.parentNode)];e&&Ii(e)&&Ki(a,e)}break;case"dimensions":if(Ii(a)&&(void 0!==i.dimensions&&(a.dimensions=i.dimensions),void 0!==i.updateStyle&&i.updateStyle&&(a.style=l(l({},a.style||{}),{},{width:`${null==(n=i.dimensions)?void 0:n.width}px`,height:`${null==(o=i.dimensions)?void 0:o.height}px`})),void 0!==i.resizing&&(a.resizing=i.resizing),a.expandParent&&a.parentNode)){const e=t[r.indexOf(a.parentNode)];if(e&&Ii(e)){!!e.dimensions.width&&!!e.dimensions.height?Ki(a,e):A(()=>{Ki(a,e)})}}}return t}function qi(e,t){return{id:e,type:"select",selected:t}}function Ji(e){return{item:e,type:"add"}}function Qi(e){return{id:e,type:"remove"}}function er(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function tr(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const e=t.has(i);void 0===r.selected&&!e||r.selected===e||(n&&(r.selected=e),o.push(qi(r.id,e)))}return o}const nr=()=>{};function or(e){const t=new Set;let n=nr,o=()=>!1;const i=()=>t.size>0||o(),r=e=>{t.delete(e)};return{on:e=>{t.add(e);const n=()=>r(e);return u(n),{off:n}},off:r,trigger:o=>{const r=[n];return i()?r.push(...t):e&&r.push(e),Promise.allSettled(r.map(e=>e(o)))},hasListeners:i,listeners:t,setEmitter:e=>{n=e},removeEmitter:()=>{n=nr},setHasEmitListeners:e=>{o=e},removeHasEmitListeners:()=>{o=()=>!1}}}function ir(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function rr({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const e=n(i.id);e&&o.push(e)}return[e?o.find(t=>t.id===e):o[0],o]}function ar(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function lr(e,t,n,o){let i=e.extent||n;if("parent"!==i&&(Array.isArray(i)||"parent"!==(null==i?void 0:i.range))||e.expandParent){if(Array.isArray(i)){const e=(null==o?void 0:o.computedPosition.x)||0,t=(null==o?void 0:o.computedPosition.y)||0;i=[[i[0][0]+e,i[0][1]+t],[i[1][0]+e,i[1][1]+t]]}else if("parent"!==i&&(null==i?void 0:i.range)&&Array.isArray(i.range)){const[e,t,n,r]=ar(i.padding),a=(null==o?void 0:o.computedPosition.x)||0,l=(null==o?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+a+r,i.range[0][1]+l+e],[i.range[1][0]+a-t,i.range[1][1]+l-n]]}}else if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const e=function(e,t,n){const[o,i,r,a]="string"!=typeof e?ar(e.padding):[0,0,0,0];return!(!n||void 0===n.computedPosition.x||void 0===n.computedPosition.y||void 0===n.dimensions.width||void 0===n.dimensions.height)&&[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]}(i,0,o);e&&(i=e)}else t(new pr(fr.NODE_EXTENT_INVALID,e.id)),i=n;return"parent"===i?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function ur(e,t,n,o,i){const r=Ni(t,function({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}(e.dimensions,lr(e,n,o,i)));return{position:{x:r.x-((null==i?void 0:i.computedPosition.x)||0),y:r.y-((null==i?void 0:i.computedPosition.y)||0)},computedPosition:r}}function sr(e,t,n=ai.Left,o=!1){var i,r,a;const l=(null!==(i=null==t?void 0:t.x)&&void 0!==i?i:0)+e.computedPosition.x,u=(null!==(r=null==t?void 0:t.y)&&void 0!==r?r:0)+e.computedPosition.y,{width:s,height:c}=null!=t?t:function(e){var t,n,o,i,r,a;return{width:null!==(t=null!==(n=null==(r=e.dimensions)?void 0:r.width)&&void 0!==n?n:e.width)&&void 0!==t?t:0,height:null!==(o=null!==(i=null==(a=e.dimensions)?void 0:a.height)&&void 0!==i?i:e.height)&&void 0!==o?o:0}}(e);if(o)return{x:l+s/2,y:u+c/2};switch(null!==(a=null==t?void 0:t.position)&&void 0!==a?a:n){case ai.Top:return{x:l+s/2,y:u};case ai.Right:return{x:l+s,y:u+c/2};case ai.Bottom:return{x:l+s/2,y:u+c};case ai.Left:return{x:l,y:u+c/2}}}function cr(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function dr({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=Vi({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),d=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),v=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(d*v)>0}function vr(e,t,n=!1){const o="number"==typeof e.zIndex;let i=o?e.zIndex:0;const r=t(e.source),a=t(e.target);return r&&a?(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,a.computedPosition.z||0)),i):0}var fr=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(fr||{});const hr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid\nNode: ${e}`,NODE_NOT_FOUND:e=>`Node not found\nNode: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent\nNode: ${e}\nParent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing\nType: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent\nNode: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target\nEdge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing\nEdge: ${e} \nSource: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing\nEdge: ${e} \nTarget: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing\nType: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found\nEdge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class pr extends Error{constructor(e,...t){var n;super(null==(n=hr[e])?void 0:n.call(hr,...t)),this.name="VueFlowError",this.code=e,this.args=t}}function gr(e){return"clientX"in e}function mr(e,t){var n,o;let i,r;return gr(e)?(i=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(i=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(i=0,r=0),{x:i-(null!==(n=null==t?void 0:t.left)&&void 0!==n?n:0),y:r-(null!==(o=null==t?void 0:t.top)&&void 0!==o?o:0)}}const yr=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function wr(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const br=()=>!0;function xr(e){null==e||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function _r(e,t,n,o){var i,r;let a=[],u=Number.POSITIVE_INFINITY;const s=function(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const r of t.values())_i(i,xi(r))>0&&o.push(r);return o}(e,n,t+250);for(const f of s){var c,d;const n=[...null!==(c=null==(i=f.handleBounds)?void 0:i.source)&&void 0!==c?c:[],...null!==(d=null==(r=f.handleBounds)?void 0:r.target)&&void 0!==d?d:[]];for(const i of n){if(o.nodeId===i.nodeId&&o.type===i.type&&o.id===i.id)continue;const{x:n,y:r}=sr(f,i,i.position,!0),s=Math.sqrt((n-e.x)**2+(r-e.y)**2);s>t||(s<u?(a=[l(l({},i),{},{x:n,y:r})],u=s):s===u&&a.push(l(l({},i),{},{x:n,y:r})))}}if(!a.length)return null;if(a.length>1){var v;const e="source"===o.type?"target":"source";return null!==(v=a.find(t=>t.type===e))&&void 0!==v?v:a[0]}return a[0]}function Er(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:a,lib:l,flowId:u,isValidConnection:s=br},c,d,v,f){const h="target"===r,p=t?a.querySelector(`.${l}-flow__handle[data-id="${u}-${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`):null,{x:g,y:m}=mr(e),y=a.elementFromPoint(g,m),w=(null==y?void 0:y.classList.contains(`${l}-flow__handle`))?y:p,b={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const e=Sr(void 0,w),t=w.getAttribute("data-nodeid"),r=w.getAttribute("data-handleid"),a=w.classList.contains("connectable"),l=w.classList.contains("connectableend");if(!t||!e)return b;const u={source:h?t:o,sourceHandle:h?r:i,target:h?o:t,targetHandle:h?i:r};b.connection=u;const p=a&&l&&(n===si.Strict?h&&"source"===e||!h&&"target"===e:t!==o||r!==i);b.isValid=p&&s(u,{nodes:d,edges:c,sourceNode:v(u.source),targetNode:v(u.target)}),b.toHandle=Nr(t,e,r,f,n,!0)}return b}function Sr(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}function Nr(e,t,n,o,i,r=!1){var a,u,s,c,d,v;const f=o.get(e);if(!f)return null;const h=i===si.Strict?null==(c=f.handleBounds)?void 0:c[t]:[...null!==(a=null==(d=f.handleBounds)?void 0:d.source)&&void 0!==a?a:[],...null!==(u=null==(v=f.handleBounds)?void 0:v.target)&&void 0!==u?u:[]],p=null!==(s=n?null==h?void 0:h.find(e=>e.id===n):null==h?void 0:h[0])&&void 0!==s?s:null;return p&&r?l(l({},p),sr(f,p,p.position,!0)):p}const kr={[ai.Left]:ai.Right,[ai.Right]:ai.Left,[ai.Top]:ai.Bottom,[ai.Bottom]:ai.Top},Mr=["production","prod"];function Cr(e,...t){Ir()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ir(){return!Mr.includes("production")}function Pr(e,t,n,o,i){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return(null==r?void 0:r.length)?Array.from(r).map(t=>{const r=t.getBoundingClientRect();return l({id:t.getAttribute("data-handleid"),type:e,nodeId:i,position:t.getAttribute("data-handlepos"),x:(r.left-n.left)/o,y:(r.top-n.top)/o},Ei(t))}):null}function Tr(e,t,n,o,i,r=!1,a){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),A(()=>{a.blur()})):n([e])}function Or(e){return void 0!==y(e)}function Ar(e,t,n,o){var i;if(!e||!e.source||!e.target)return n(new pr(fr.EDGE_INVALID,null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"[ID UNKNOWN]")),!1;let r;return r=Mi(e)?e:l(l({},e),{},{id:Di(e)}),r=Oi(r,void 0,o),!function(e,t){return t.some(t=>Mi(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle))}(r,t)&&r}function Dr(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const a=e[r];if(!Ci(a)){n(new pr(fr.NODE_INVALID,null==a?void 0:a.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const l=Ti(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),i[r]=l}for(const r of i){const e=t(r.parentNode)||i.find(e=>e.id===r.parentNode);r.parentNode&&!e&&n(new pr(fr.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),e&&(e.isParent=!0))}return i}function $r(e,t,n,o,i,r){let a=i;const l=o.get(a)||new Map;o.set(a,l.set(n,t)),a=`${i}-${e}`;const u=o.get(a)||new Map;if(o.set(a,u.set(n,t)),r){a=`${i}-${e}-${r}`;const l=o.get(a)||new Map;o.set(a,l.set(n,t))}}function zr(e,t,n){e.clear();for(const o of n){const{source:t,target:n,sourceHandle:i=null,targetHandle:r=null}=o,a={edgeId:o.id,source:t,target:n,sourceHandle:i,targetHandle:r},l=`${t}-${i}--${n}-${r}`;$r("source",a,`${n}-${r}--${t}-${i}`,e,t,i),$r("target",a,l,e,n,r)}}function Br(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Vr(e,t,n,o,i,r,a,u){const s=[];for(const c of e){const e=Mi(c)?c:Ar(c,u,i,r);if(!e)continue;const d=n(e.source),v=n(e.target);if(!d||!v){i(new pr(fr.EDGE_SOURCE_TARGET_MISSING,e.id,e.source,e.target));continue}if(!d){i(new pr(fr.EDGE_SOURCE_MISSING,e.id,e.source));continue}if(!v){i(new pr(fr.EDGE_TARGET_MISSING,e.id,e.target));continue}if(t){if(!t(e,{edges:u,nodes:a,sourceNode:d,targetNode:v})){i(new pr(fr.EDGE_INVALID,e.id));continue}}const f=o(e.id);s.push(l(l({},Oi(e,f,r)),{},{sourceNode:d,targetNode:v}))}return s}const Lr=Symbol("vueFlow"),Rr=Symbol("nodeId"),Hr=Symbol("nodeRef"),Yr=Symbol("edgeId"),Gr=Symbol("edgeRef"),Fr=Symbol("slots");function Xr(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodeLookup:r,nodeExtent:a,nodeDragThreshold:u,viewport:s,autoPanOnNodeDrag:c,autoPanSpeed:d,nodesDraggable:v,panBy:f,findNode:h,multiSelectionActive:p,nodesSelectionActive:g,selectNodesOnDrag:m,removeSelectedElements:y,addSelectedNodes:w,updateNodePositions:b,emits:x}=Ha(),{onStart:_,onDrag:E,onStop:S,onClick:k,el:M,disabled:C,id:I,selectable:P,dragHandle:T}=e,O=V(!1);let A,D=[],$=null,z={x:void 0,y:void 0},B={x:0,y:0},L=null,R=!1,H=!1,Y=0,G=!1;const F=function(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Ha();return i=>{var r,a;const u=null!==(r=null==(a=o.value)?void 0:a.getBoundingClientRect())&&void 0!==r?r:{left:0,top:0},s=function(e){return"sourceEvent"in e}(i)?i.sourceEvent:i,{x:c,y:d}=mr(s,u),v=zi({x:c,y:d},e.value),{x:f,y:h}=n.value?wr(v,t.value):v;return l({xSnapped:f,ySnapped:h},v)}}(),U=({x:e,y:t})=>{z={x:e,y:t};let i=!1;if(D=D.map(r=>{const l={x:e-r.distance.x,y:t-r.distance.y},{computedPosition:u}=ur(r,n.value?wr(l,o.value):l,x.error,a.value,r.parentNode?h(r.parentNode):void 0);return i=i||r.position.x!==u.x||r.position.y!==u.y,r.position=u,r}),H=H||i,i&&(b(D,!0,!0),O.value=!0,L)){const[e,t]=rr({id:I,dragItems:D,findNode:h});E({event:L,node:e,nodes:t})}},j=()=>{if(!$)return;const[e,t]=Zi(B,$,d.value);if(0!==e||0!==t){var n,o;const i={x:(null!==(n=z.x)&&void 0!==n?n:0)-e/s.value.zoom,y:(null!==(o=z.y)&&void 0!==o?o:0)-t/s.value.zoom};f({x:e,y:t})&&U(i)}Y=requestAnimationFrame(j)},Z=(e,t)=>{R=!0;const n=h(I);m.value||p.value||!n||n.selected||y(),n&&X(P)&&m.value&&Tr(n,p.value,w,y,g,!1,t);const o=F(e.sourceEvent);if(z=o,D=function(e,t,n,o){var i,r;const a=new Map;for(const[u,s]of e)!s.selected&&s.id!==o||s.parentNode&&Fi(s,e)||!(s.draggable||t&&void 0===s.draggable)||e.get(u)&&a.set(u,{id:s.id,position:s.position||{x:0,y:0},distance:{x:n.x-(null==(i=s.computedPosition)?void 0:i.x)||0,y:n.y-(null==(r=s.computedPosition)?void 0:r.y)||0},from:{x:s.computedPosition.x,y:s.computedPosition.y},extent:s.extent,parentNode:s.parentNode,dimensions:l({},s.dimensions),expandParent:s.expandParent});return Array.from(a.values())}(r.value,v.value,o,I),D.length){const[t,n]=rr({id:I,dragItems:D,findNode:h});_({event:e.sourceEvent,node:t,nodes:n})}};return N([()=>X(C),M],([e,n],o,r)=>{if(n){const o=$t(n);e||(A=function(){var e,t,n,o,i=Xt,r=Ut,a=jt,l=Zt,u={},s=we("start","drag","end"),c=0,d=0;function v(e){e.on("mousedown.drag",f).filter(l).on("touchstart.drag",g).on("touchmove.drag",m,Bt).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,l){if(!o&&i.call(this,a,l)){var u=w(this,r.call(this,a,l),a,l,"mouse");u&&($t(a.view).on("mousemove.drag",h,Vt).on("mouseup.drag",p,Vt),Ht(a.view),Lt(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function h(o){if(Rt(o),!n){var i=o.clientX-e,r=o.clientY-t;n=i*i+r*r>d}u.mouse("drag",o)}function p(e){$t(e.view).on("mousemove.drag mouseup.drag",null),Yt(e.view,n),Rt(e),u.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,o,a=e.changedTouches,l=r.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=w(this,l,e,t,a[n].identifier,a[n]))&&(Lt(e),o("start",e,a[n]))}}function m(e){var t,n,o=e.changedTouches,i=o.length;for(t=0;t<i;++t)(n=u[o[t].identifier])&&(Rt(e),n("drag",e,o[t]))}function y(e){var t,n,i=e.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<r;++t)(n=u[i[t].identifier])&&(Lt(e),n("end",e,i[t]))}function w(e,t,n,o,i,r){var l,d,f,h=s.copy(),p=zt(r||n,t);if(null!=(f=a.call(e,new Ft("beforestart",{sourceEvent:n,target:v,identifier:i,active:c,x:p[0],y:p[1],dx:0,dy:0,dispatch:h}),o)))return l=f.x-p[0]||0,d=f.y-p[1]||0,function n(r,a,s){var g,m=p;switch(r){case"start":u[i]=n,g=c++;break;case"end":delete u[i],--c;case"drag":p=zt(s||a,t),g=c}h.call(r,e,new Ft(r,{sourceEvent:a,subject:f,target:v,identifier:i,active:g,x:p[0]+l,y:p[1]+d,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:h}),o)}}return v.filter=function(e){return arguments.length?(i="function"==typeof e?e:Gt(!!e),v):i},v.container=function(e){return arguments.length?(r="function"==typeof e?e:Gt(e),v):r},v.subject=function(e){return arguments.length?(a="function"==typeof e?e:Gt(e),v):a},v.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Gt(!!e),v):l},v.on=function(){var e=s.on.apply(s,arguments);return e===s?v:e},v.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,v):Math.sqrt(d)},v}().on("start",e=>((e,n)=>{var o;"touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||(H=!1,0===u.value&&Z(e,n),z=F(e.sourceEvent),$=(null==(o=t.value)?void 0:o.getBoundingClientRect())||null,B=mr(e.sourceEvent,$))})(e,n)).on("drag",e=>((e,t)=>{const n=F(e.sourceEvent);if(!G&&R&&c.value&&(G=!0,j()),!R){var o,i;const r=n.xSnapped-(null!==(o=z.x)&&void 0!==o?o:0),a=n.ySnapped-(null!==(i=z.y)&&void 0!==i?i:0);Math.sqrt(r*r+a*a)>u.value&&Z(e,t)}(z.x!==n.xSnapped||z.y!==n.ySnapped)&&D.length&&R&&(L=e.sourceEvent,B=mr(e.sourceEvent,$),U(n))})(e,n)).on("end",e=>(e=>{let t=!1;if(!R&&!O.value&&!p.value){var n,o;const i=e.sourceEvent,r=F(i),a=r.xSnapped-(null!==(n=z.x)&&void 0!==n?n:0),l=r.ySnapped-(null!==(o=z.y)&&void 0!==o?o:0),s=Math.sqrt(a*a+l*l);0!==s&&s<=u.value&&(null==k||k(i),t=!0)}if(D.length&&!t){H&&(b(D,!1,!1),H=!1);const[t,n]=rr({id:I,dragItems:D,findNode:h});S({event:e.sourceEvent,node:t,nodes:n})}D=[],O.value=!1,G=!1,R=!1,z={x:void 0,y:void 0},cancelAnimationFrame(Y)})(e)).filter(e=>{const t=e.target,o=X(T);return!e.button&&(!i.value||!ir(t,`.${i.value}`,n)&&(!o||ir(t,o,n)))}),o.call(A)),r(()=>{o.on(".drag",null),A&&(A.on("start",null),A.on("drag",null),A.on("end",null))})}}),O}function Ur(e,t){const n={doubleClick:or(),click:or(),mouseEnter:or(),mouseMove:or(),mouseLeave:or(),contextMenu:or(),updateStart:or(),update:or(),updateEnd:or()};return n.doubleClick.on(n=>{var o,i;t.edgeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)}),n.click.on(n=>{var o,i;t.edgeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)}),n.mouseEnter.on(n=>{var o,i;t.edgeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)}),n.mouseMove.on(n=>{var o,i;t.edgeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)}),n.mouseLeave.on(n=>{var o,i;t.edgeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)}),n.contextMenu.on(n=>{var o,i;t.edgeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)}),n.updateStart.on(n=>{var o,i;t.edgeUpdateStart(n),null==(i=null==(o=e.events)?void 0:o.updateStart)||i.call(o,n)}),n.update.on(n=>{var o,i;t.edgeUpdate(n),null==(i=null==(o=e.events)?void 0:o.update)||i.call(o,n)}),n.updateEnd.on(n=>{var o,i;t.edgeUpdateEnd(n),null==(i=null==(o=e.events)?void 0:o.updateEnd)||i.call(o,n)}),Object.entries(n).reduce((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e),{emit:{},on:{}})}function jr(){return!0}function Zr({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:a}){const{id:u,vueFlowRef:s,connectionMode:c,connectionRadius:d,connectOnClick:v,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:p,autoPanSpeed:g,findNode:m,panBy:y,startConnection:w,updateConnection:b,endConnection:x,emits:_,viewport:E,edges:S,nodes:N,isValidConnection:k,nodeLookup:M}=Ha();let C=null,I=!1,P=null;return{handlePointerDown:function(v){var f;const h="target"===X(n),T=gr(v),O=ki(v.target),A=v.currentTarget;if(A&&(T&&0===v.button||!T)){let n=function(n){F=mr(n,H),$=_r(zi(F,E.value,!1,[1,1]),d.value,M.value,Z),U||(j(),U=!0);const o=Er(n,{handle:$,connectionMode:c.value,fromNodeId:X(t),fromHandleId:X(e),fromType:h?"target":"source",isValidConnection:z,doc:O,lib:"vue",flowId:u,nodeLookup:M.value},S.value,N.value,m,M.value);P=o.handleDomNode,C=o.connection,I=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!$,o.isValid);const i=l(l({},q),{},{isValid:I,to:o.toHandle&&I?$i({x:o.toHandle.x,y:o.toHandle.y},E.value):F,toHandle:o.toHandle,toPosition:I&&o.toHandle?o.toHandle.position:kr[Z.position],toNode:o.toHandle?M.value.get(o.toHandle.nodeId):null});if(I&&$&&(null==q?void 0:q.toHandle)&&i.toHandle&&q.toHandle.type===i.toHandle.type&&q.toHandle.nodeId===i.toHandle.nodeId&&q.toHandle.id===i.toHandle.id&&q.to.x===i.to.x&&q.to.y===i.to.y)return;const r=null!=$?$:o.toHandle;if(b(r&&I?$i({x:r.x,y:r.y},E.value):F,r,function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!r,I)),q=i,!$&&!I&&!P)return xr(G);C&&C.source!==C.target&&P&&(xr(G),G=P,P.classList.add("connecting","vue-flow__handle-connecting"),P.classList.toggle("valid",!!I),P.classList.toggle("vue-flow__handle-valid",!!I))},T=function(e){"touches"in e&&e.touches.length>0||(($||P)&&C&&I&&(r?r(e,C):_.connect(C)),_.connectEnd(e),i&&(null==a||a(e)),xr(G),cancelAnimationFrame(B),x(e),U=!1,I=!1,C=null,P=null,O.removeEventListener("mousemove",n),O.removeEventListener("mouseup",T),O.removeEventListener("touchmove",n),O.removeEventListener("touchend",T))};const D=m(X(t));let $,z=X(o)||k.value||jr;!z&&D&&(z=(h?D.isValidSourcePos:D.isValidTargetPos)||jr);let B=0;const{x:V,y:L}=mr(v),R=Sr(X(i),A),H=null==(f=s.value)?void 0:f.getBoundingClientRect();if(!H||!R)return;const Y=Nr(X(t),R,X(e),M.value,c.value);if(!Y)return;let G,F=mr(v,H),U=!1;const j=()=>{if(!p.value)return;const[e,t]=Zi(F,H,g.value);y({x:e,y:t}),B=requestAnimationFrame(j)},Z=l(l({},Y),{},{nodeId:X(t),type:R,position:Y.position}),K=M.value.get(X(t)),W={inProgress:!0,isValid:null,from:sr(K,Z,ai.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:K,to:F,toHandle:null,toPosition:kr[Z.position],toNode:null};w(l({nodeId:X(t),id:X(e),type:R,position:(null==A?void 0:A.getAttribute("data-handlepos"))||ai.Top},F),{x:V-H.left,y:L-H.top}),_.connectStart({event:v,nodeId:X(t),handleId:X(e),handleType:R});let q=W;O.addEventListener("mousemove",n),O.addEventListener("mouseup",T),O.addEventListener("touchmove",n),O.addEventListener("touchend",T)}},handleClick:function(i){var r,a,s;if(!v.value)return;const d="target"===X(n);if(!f.value)return _.clickConnectStart({event:i,nodeId:X(t),handleId:X(e)}),void w(l({nodeId:X(t),type:X(n),id:X(e),position:ai.Top},mr(i)),void 0,!0);let p=X(o)||k.value||jr;const g=m(X(t));if(!p&&g&&(p=(d?g.isValidSourcePos:g.isValidTargetPos)||jr),g&&!1===(void 0===g.connectable?h.value:g.connectable))return;const y=ki(i.target),b=Er(i,{handle:l({nodeId:X(t),id:X(e),type:X(n),position:ai.Top},mr(i)),connectionMode:c.value,fromNodeId:f.value.nodeId,fromHandleId:null!==(r=f.value.id)&&void 0!==r?r:null,fromType:f.value.type,isValidConnection:p,doc:y,lib:"vue",flowId:u,nodeLookup:M.value},S.value,N.value,m,M.value),E=(null==(a=b.connection)?void 0:a.source)===(null==(s=b.connection)?void 0:s.target);b.isValid&&b.connection&&!E&&_.connect(b.connection),_.clickConnectEnd(i),x(i,!0)}}}function Kr(e){var t;const n=null!==(t=null!=e?e:k(Rr,""))&&void 0!==t?t:"",o=k(Hr,E(null)),{findNode:i,edges:r,emits:a}=Ha(),l=i(n);return l||a.error(new pr(fr.NODE_NOT_FOUND,n)),{id:n,nodeEl:o,node:l,parentNode:S(()=>i(l.parentNode)),connectedEdges:S(()=>Hi([l],r.value))}}function Wr(e,t){const n={doubleClick:or(),click:or(),mouseEnter:or(),mouseMove:or(),mouseLeave:or(),contextMenu:or(),dragStart:or(),drag:or(),dragStop:or()};return n.doubleClick.on(n=>{var o,i;t.nodeDoubleClick(n),null==(i=null==(o=e.events)?void 0:o.doubleClick)||i.call(o,n)}),n.click.on(n=>{var o,i;t.nodeClick(n),null==(i=null==(o=e.events)?void 0:o.click)||i.call(o,n)}),n.mouseEnter.on(n=>{var o,i;t.nodeMouseEnter(n),null==(i=null==(o=e.events)?void 0:o.mouseEnter)||i.call(o,n)}),n.mouseMove.on(n=>{var o,i;t.nodeMouseMove(n),null==(i=null==(o=e.events)?void 0:o.mouseMove)||i.call(o,n)}),n.mouseLeave.on(n=>{var o,i;t.nodeMouseLeave(n),null==(i=null==(o=e.events)?void 0:o.mouseLeave)||i.call(o,n)}),n.contextMenu.on(n=>{var o,i;t.nodeContextMenu(n),null==(i=null==(o=e.events)?void 0:o.contextMenu)||i.call(o,n)}),n.dragStart.on(n=>{var o,i;t.nodeDragStart(n),null==(i=null==(o=e.events)?void 0:o.dragStart)||i.call(o,n)}),n.drag.on(n=>{var o,i;t.nodeDrag(n),null==(i=null==(o=e.events)?void 0:o.drag)||i.call(o,n)}),n.dragStop.on(n=>{var o,i;t.nodeDragStop(n),null==(i=null==(o=e.events)?void 0:o.dragStop)||i.call(o,n)}),Object.entries(n).reduce((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e),{emit:{},on:{}})}function qr(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:a,emits:l}=Ha();return(u,s=!1)=>{const c=r.value?i.value[0]:5,d=r.value?i.value[1]:5,v=s?4:1,f=u.x*c*v,h=u.y*d*v,p=[];for(const n of e.value)if(n.draggable||a&&void 0===n.draggable){const e={x:n.computedPosition.x+f,y:n.computedPosition.y+h},{position:i}=ur(n,e,l.error,t.value,n.parentNode?o(n.parentNode):void 0);p.push({id:n.id,position:i,from:n.position,distance:{x:u.x,y:u.y},dimensions:n.dimensions})}n(p,!0,!1)}}const Jr=.1,Qr=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function ea(){return Cr("Viewport not initialized yet."),Promise.resolve(!1)}const ta={zoomIn:ea,zoomOut:ea,zoomTo:ea,fitView:ea,setCenter:ea,fitBounds:ea,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:ea,setTransform:ea,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function na(e,t=0,n=Qr,o=()=>{}){const i="number"==typeof t&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function oa(e,t,n){const o=M(!0);return o.run(()=>{const i=()=>{o.run(()=>{const e=function(){var e,o=(e=function*(e){let o=e;"function"==typeof t.autoConnect&&(o=yield t.autoConnect(e)),!1!==o&&n.addEdges([o])},function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function l(e){r(a,o,i,l,u,"next",e)}function u(e){r(a,o,i,l,u,"throw",e)}l(void 0)})});return function(e){return o.apply(this,arguments)}}();N(()=>t.autoConnect,()=>{Or(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),N(n.autoConnect,(t,o,i)=>{t?n.onConnect(e):n.hooks.value.connect.off(e),i(()=>{n.hooks.value.connect.off(e)})},{immediate:!0})})};o.run(()=>{let t,o,i=!(!n.nodes.value.length&&!n.edges.value.length);t=ce([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setElements(e),o||i||!e.length?null==o||o.resume():i=!0)}),o=ce([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([n,o])=>{var i;(null==(i=e.modelValue)?void 0:i.value)&&Array.isArray(e.modelValue.value)&&(null==t||t.pause(),e.modelValue.value=[...n,...o],A(()=>{null==t||t.resume()}))},{immediate:i}),Y(()=>{null==t||t.stop(),null==o||o.stop()})}),o.run(()=>{let t,o,i=!!n.nodes.value.length;t=ce([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setNodes(e),o||i||!e.length?null==o||o.resume():i=!0)}),o=ce([n.nodes,()=>n.nodes.value.length],([n])=>{var o;(null==(o=e.nodes)?void 0:o.value)&&Array.isArray(e.nodes.value)&&(null==t||t.pause(),e.nodes.value=[...n],A(()=>{null==t||t.resume()}))},{immediate:i}),Y(()=>{null==t||t.stop(),null==o||o.stop()})}),o.run(()=>{let t,o,i=!!n.edges.value.length;t=ce([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setEdges(e),o||i||!e.length?null==o||o.resume():i=!0)}),o=ce([n.edges,()=>n.edges.value.length],([n])=>{var o;(null==(o=e.edges)?void 0:o.value)&&Array.isArray(e.edges.value)&&(null==t||t.pause(),e.edges.value=[...n],A(()=>{null==t||t.resume()}))},{immediate:i}),Y(()=>{null==t||t.stop(),null==o||o.stop()})}),o.run(()=>{N(()=>t.minZoom,()=>{t.minZoom&&Or(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})}),o.run(()=>{N(()=>t.maxZoom,()=>{t.maxZoom&&Or(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})}),o.run(()=>{N(()=>t.translateExtent,()=>{t.translateExtent&&Or(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})}),o.run(()=>{N(()=>t.nodeExtent,()=>{t.nodeExtent&&Or(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})}),o.run(()=>{N(()=>t.applyDefault,()=>{Or(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})}),i(),(()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const i of Object.keys(t)){const r=i;if(!e.includes(r)){const e=_(()=>t[r]),i=n[r];j(i)&&o.run(()=>{N(e,e=>{Or(e)&&(i.value=e)},{immediate:!0})})}}})()}),()=>o.stop()}function ia(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:li.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:di.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ui.Bezier,style:{}},connectionMode:si.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:yr()?"Meta":"Control",zoomActivationKeyCode:yr()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:{edgesChange:or(),nodesChange:or(),nodeDoubleClick:or(),nodeClick:or(),nodeMouseEnter:or(),nodeMouseMove:or(),nodeMouseLeave:or(),nodeContextMenu:or(),nodeDragStart:or(),nodeDrag:or(),nodeDragStop:or(),nodesInitialized:or(),miniMapNodeClick:or(),miniMapNodeDoubleClick:or(),miniMapNodeMouseEnter:or(),miniMapNodeMouseMove:or(),miniMapNodeMouseLeave:or(),connect:or(),connectStart:or(),connectEnd:or(),clickConnectStart:or(),clickConnectEnd:or(),paneReady:or(),init:or(),move:or(),moveStart:or(),moveEnd:or(),selectionDragStart:or(),selectionDrag:or(),selectionDragStop:or(),selectionContextMenu:or(),selectionStart:or(),selectionEnd:or(),viewportChangeStart:or(),viewportChange:or(),viewportChangeEnd:or(),paneScroll:or(),paneClick:or(),paneContextMenu:or(),paneMouseEnter:or(),paneMouseMove:or(),paneMouseLeave:or(),edgeContextMenu:or(),edgeMouseEnter:or(),edgeMouseMove:or(),edgeMouseLeave:or(),edgeDoubleClick:or(),edgeClick:or(),edgeUpdateStart:or(),edgeUpdate:or(),edgeUpdateEnd:or(),updateNodeInternals:or(),error:or(e=>Cr(e.message))},applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const ra=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function aa(e,t,r){const a=function(e){function t(t,n){return new Promise(o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate("linear"===(null==n?void 0:n.interpolate)?Yn:qn).scaleBy(na(e.d3Selection,null==n?void 0:n.duration,null==n?void 0:n.ease,()=>{o(!0)}),t):o(!1)})}function n(t,n,o,i){return new Promise(r=>{var a;const{x:l,y:u}=Ni({x:-t,y:-n},e.translateExtent),s=qo.translate(-l,-u).scale(o);e.d3Selection&&e.d3Zoom?null==(a=e.d3Zoom)||a.interpolate("linear"===(null==i?void 0:i.interpolate)?Yn:qn).transform(na(e.d3Selection,null==i?void 0:i.duration,null==i?void 0:i.ease,()=>{r(!0)}),s):r(!1)})}return S(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:e=>t(1.2,e),zoomOut:e=>t(1/1.2,e),zoomTo:(t,n)=>new Promise(o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate("linear"===(null==n?void 0:n.interpolate)?Yn:qn).scaleTo(na(e.d3Selection,null==n?void 0:n.duration,null==n?void 0:n.ease,()=>{o(!0)}),t):o(!1)}),setViewport:(e,t)=>n(e.x,e.y,e.zoom,t),setTransform:(e,t)=>n(e.x,e.y,e.zoom,t),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:Jr,includeHiddenNodes:!1,duration:0})=>{var o,i,r,a,l;const u=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&((null==t?void 0:t.includeHiddenNodes)||!n.hidden)&&(!(null==(a=t.nodes)?void 0:a.length)||(null==(l=t.nodes)?void 0:l.length)&&t.nodes.includes(n.id))&&u.push(n);if(!u.length)return Promise.resolve(!1);const s=Li(u),{x:c,y:d,zoom:v}=Gi(s,e.dimensions.width,e.dimensions.height,null!==(o=t.minZoom)&&void 0!==o?o:e.minZoom,null!==(i=t.maxZoom)&&void 0!==i?i:e.maxZoom,null!==(r=t.padding)&&void 0!==r?r:Jr);return n(c,d,v,t)},setCenter:(t,o,i)=>{const r=void 0!==(null==i?void 0:i.zoom)?i.zoom:e.maxZoom;return n(e.dimensions.width/2-t*r,e.dimensions.height/2-o*r,r,i)},fitBounds:(t,o={padding:Jr})=>{var i;const{x:r,y:a,zoom:l}=Gi(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,null!==(i=o.padding)&&void 0!==i?i:Jr);return n(r,a,l,o)},project:t=>zi(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return zi({x:t.x-n,y:t.y-o},e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return $i({x:t.x+n,y:t.y+o},e.viewport)}return{x:0,y:0}}}:ta)}(e),u=t=>{const n=null!=t?t:[];e.hooks.updateNodeInternals.trigger(n)},c=t=>Hi(t,e.edges),d=e=>{if(e)return t.value.get(e)},v=e=>{if(e)return r.value.get(e)},f=(n,o)=>{const i=new Set,a=new Set;for(const e of n)Ci(e)?i.add(e.id):Mi(e)&&a.add(e.id);const l=tr(t.value,i,!0),u=tr(r.value,a);if(e.multiSelectionActive){for(const e of i)l.push(qi(e,o));for(const e of a)u.push(qi(e,o))}l.length&&e.hooks.nodesChange.trigger(l),u.length&&e.hooks.edgesChange.trigger(u)},h=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},p=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},g=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},m=t=>{const n=t instanceof Function?t(e.nodes):t;(e.initialized||n.length)&&(e.nodes=Dr(n,d,e.hooks.error.trigger))},y=t=>{const n=t instanceof Function?t(e.edges):t;if(!e.initialized&&!n.length)return;const o=Vr(n,e.isValidConnection,d,v,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);zr(e.connectionLookup,r.value,o),e.edges=o},w=t=>{const n=t instanceof Function?t([...e.nodes,...e.edges]):t;(e.initialized||n.length)&&(m(n.filter(Ci)),y(n.filter(Mi)))},b=e=>{const t=Pi((n=e).width)&&Pi(n.height)&&Pi(n.x)&&Pi(n.y);var n;const o=t?null:Ii(e)?e:d(e.id);if(!t&&!o)return[null,null,t];return[t?e:xi(o),o,t]},x=t=>{const n=t instanceof Function?t(e):t,o=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Or(n.defaultEdgeOptions)&&(e.defaultEdgeOptions=n.defaultEdgeOptions);const i=n.modelValue||n.nodes||n.edges?[]:void 0;i&&(n.modelValue&&i.push(...n.modelValue),n.nodes&&i.push(...n.nodes),n.edges&&i.push(...n.edges),w(i));for(const r of Object.keys(n)){const t=r,i=n[t];![...ra,...o].includes(t)&&Or(i)&&(e[t]=i)}ve(()=>e.d3Zoom).not.toBeNull().then(()=>{Or(n.maxZoom)&&p(n.maxZoom),Or(n.minZoom)&&h(n.minZoom),Or(n.translateExtent)&&g(n.translateExtent)}),e.initialized||(e.initialized=!0)};return{updateNodePositions:(t,n,o)=>{var i,r;const a=[];for(const e of t){const t={id:e.id,type:"position",dragging:o,from:e.from};if(n&&(t.position=e.position,e.parentNode)){var l,u;const n=d(e.parentNode);t.position={x:t.position.x-(null!==(l=null==(i=null==n?void 0:n.computedPosition)?void 0:i.x)&&void 0!==l?l:0),y:t.position.y-(null!==(u=null==(r=null==n?void 0:n.computedPosition)?void 0:r.y)&&void 0!==u?u:0)}}a.push(t)}(null==a?void 0:a.length)&&e.hooks.nodesChange.trigger(a)},updateNodeDimensions:t=>{if(!e.vueFlowRef)return;const n=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!n)return;const o=window.getComputedStyle(n),{m22:i}=new window.DOMMatrixReadOnly(o.transform),r=[];for(const e of t){const t=e,n=d(t.id);if(n){const e=Ei(t.nodeElement);if(!(!e.width||!e.height||n.dimensions.width===e.width&&n.dimensions.height===e.height&&!t.forceUpdate)){const o=t.nodeElement.getBoundingClientRect();n.dimensions=e,n.handleBounds.source=Pr("source",t.nodeElement,o,i,n.id),n.handleBounds.target=Pr("target",t.nodeElement,o,i,n.id),r.push({id:n.id,type:"dimensions",dimensions:e})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&a.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),r.length&&e.hooks.nodesChange.trigger(r)},setElements:w,setNodes:m,setEdges:y,addNodes:t=>{let n=t instanceof Function?t(e.nodes):t;n=Array.isArray(n)?n:[n];const o=Dr(n,d,e.hooks.error.trigger),i=[];for(const e of o)i.push(Ji(e));i.length&&e.hooks.nodesChange.trigger(i)},addEdges:t=>{let n=t instanceof Function?t(e.edges):t;n=Array.isArray(n)?n:[n];const o=Vr(n,e.isValidConnection,d,v,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),i=[];for(const e of o)i.push(Ji(e));i.length&&e.hooks.edgesChange.trigger(i)},removeNodes:(t,n=!0,o=!1)=>{const i=t instanceof Function?t(e.nodes):t,r=Array.isArray(i)?i:[i],a=[],l=[];function u(e){const t=c(e);for(const n of t)Or(n.deletable)&&!n.deletable||l.push(er(n.id,n.source,n.target,n.sourceHandle,n.targetHandle))}function s(t){const o=[];for(const n of e.nodes)n.parentNode===t&&o.push(n);if(o.length){for(const e of o)a.push(Qi(e.id));n&&u(o);for(const e of o)s(e.id)}}for(const e of r){const t="string"==typeof e?d(e):e;t&&(Or(t.deletable)&&!t.deletable||(a.push(Qi(t.id)),n&&u([t]),o&&s(t.id)))}l.length&&e.hooks.edgesChange.trigger(l),a.length&&e.hooks.nodesChange.trigger(a)},removeEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=Array.isArray(n)?n:[n],i=[];for(const e of o){const t="string"==typeof e?v(e):e;t&&(Or(t.deletable)&&!t.deletable||i.push(er("string"==typeof e?e:e.id,t.source,t.target,t.sourceHandle,t.targetHandle)))}e.hooks.edgesChange.trigger(i)},findNode:d,findEdge:v,updateEdge:(t,o,i=!0)=>{const a=v(t.id);if(!a)return!1;const u=e.edges.indexOf(a),c=function(e,t,o,i,r){if(!t.source||!t.target)return r(new pr(fr.EDGE_INVALID,e.id)),!1;if(!o)return r(new pr(fr.EDGE_NOT_FOUND,e.id)),!1;const{id:a}=e;return l(l({},s(e,n)),{},{id:i?Di(t):a,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})}(t,o,a,i,e.hooks.error.trigger);if(c){const[t]=Vr([c],e.isValidConnection,d,v,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((e,n)=>n===u?t:e),zr(e.connectionLookup,r.value,[t]),t}return!1},updateEdgeData:(e,t,n={replace:!1})=>{const o=v(e);if(!o)return;const i="function"==typeof t?t(o):t;o.data=n.replace?i:l(l({},o.data),i)},updateNode:(t,n,o={replace:!1})=>{const i=d(t);if(!i)return;const r="function"==typeof n?n(i):n;o.replace?e.nodes.splice(e.nodes.indexOf(i),1,r):Object.assign(i,r)},updateNodeData:(e,t,n={replace:!1})=>{const o=d(e);if(!o)return;const i="function"==typeof t?t(o):t;o.data=n.replace?i:l(l({},o.data),i)},applyEdgeChanges:t=>{const n=Wi(t,e.edges);return zr(e.connectionLookup,r.value,n),n},applyNodeChanges:t=>Wi(t,e.nodes),addSelectedElements:e=>{f(e,!0)},addSelectedNodes:n=>{if(e.multiSelectionActive){const t=n.map(e=>qi(e.id,!0));return void e.hooks.nodesChange.trigger(t)}e.hooks.nodesChange.trigger(tr(t.value,new Set(n.map(e=>e.id)),!0)),e.hooks.edgesChange.trigger(tr(r.value))},addSelectedEdges:n=>{if(e.multiSelectionActive){const t=n.map(e=>qi(e.id,!0));return void e.hooks.edgesChange.trigger(t)}e.hooks.edgesChange.trigger(tr(r.value,new Set(n.map(e=>e.id)))),e.hooks.nodesChange.trigger(tr(t.value,new Set,!0))},setMinZoom:h,setMaxZoom:p,setTranslateExtent:g,setNodeExtent:t=>{e.nodeExtent=t,u()},setPaneClickDistance:t=>{var n;null==(n=e.d3Zoom)||n.clickDistance(t)},removeSelectedElements:t=>{if(!t||!t.length)return f([],!1);const n=t.reduce((e,t)=>{const n=qi(t.id,!1);return Ci(t)?e.nodes.push(n):e.edges.push(n),e},{nodes:[],edges:[]});n.nodes.length&&e.hooks.nodesChange.trigger(n.nodes),n.edges.length&&e.hooks.edgesChange.trigger(n.edges)},removeSelectedNodes:t=>{const n=(t||e.nodes).map(e=>(e.selected=!1,qi(e.id,!1)));e.hooks.nodesChange.trigger(n)},removeSelectedEdges:t=>{const n=(t||e.edges).map(e=>(e.selected=!1,qi(e.id,!1)));e.hooks.edgesChange.trigger(n)},startConnection:(t,n,o=!1)=>{o?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionEndHandle=null,e.connectionStatus=null,n&&(e.connectionPosition=n)},updateConnection:(t,n=null,o=null)=>{e.connectionStartHandle&&(e.connectionPosition=t,e.connectionEndHandle=n,e.connectionStatus=o)},endConnection:(t,n)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},setInteractive:t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},setState:x,getIntersectingNodes:(t,n=!0,o=e.nodes)=>{const[i,r,a]=b(t);if(!i)return[];const l=[];for(const u of o||e.nodes){if(!(a||u.id!==r.id&&u.computedPosition))continue;const e=xi(u),t=_i(e,i);(n&&t>0||t>=e.width*e.height||t>=Number(i.width)*Number(i.height))&&l.push(u)}return l},getIncomers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Ai(t,n,o,"source")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter(e=>Mi(e)&&e.target===o).map(e=>n.find(t=>Ci(t)&&t.id===e.source))}(t,e.nodes,e.edges),getOutgoers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Ai(t,n,o,"target")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter(e=>Mi(e)&&e.source===o).map(e=>n.find(t=>Ci(t)&&t.id===e.target))}(t,e.nodes,e.edges),getConnectedEdges:c,getHandleConnections:({id:t,type:n,nodeId:o})=>{var i,r;const a=t?`-${n}-${t}`:`-${n}`;return Array.from(null!==(i=null==(r=e.connectionLookup.get(`${o}${a}`))?void 0:r.values())&&void 0!==i?i:[])},isNodeIntersecting:(e,t,n=!0)=>{const[o]=b(e);if(!o)return!1;const i=_i(o,t);return n&&i>0||i>=Number(o.width)*Number(o.height)},panBy:t=>{const{viewport:n,dimensions:o,d3Zoom:i,d3Selection:r,translateExtent:a}=e;if(!i||!r||!t.x&&!t.y)return!1;const l=qo.translate(n.x+t.x,n.y+t.y).scale(n.zoom),u=[[0,0],[o.width,o.height]],s=i.constrain()(l,u,a),c=e.viewport.x!==s.x||e.viewport.y!==s.y||e.viewport.zoom!==s.k;return i.transform(r,s),c},fitView:e=>a.value.fitView(e),zoomIn:e=>a.value.zoomIn(e),zoomOut:e=>a.value.zoomOut(e),zoomTo:(e,t)=>a.value.zoomTo(e,t),setViewport:(e,t)=>a.value.setViewport(e,t),setTransform:(e,t)=>a.value.setTransform(e,t),getViewport:()=>a.value.getViewport(),getTransform:()=>a.value.getTransform(),setCenter:(e,t,n)=>a.value.setCenter(e,t,n),fitBounds:(e,t)=>a.value.fitBounds(e,t),project:e=>a.value.project(e),screenToFlowCoordinate:e=>a.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>a.value.flowToScreenCoordinate(e),toObject:()=>{const t=[],n=[];for(const i of e.nodes){const{computedPosition:e,handleBounds:n,selected:r,dimensions:a,isParent:l,resizing:u,dragging:c,events:d}=i,v=s(i,o);t.push(v)}for(const o of e.edges){const{selected:e,sourceNode:t,targetNode:r,events:a}=o,l=s(o,i);n.push(l)}return JSON.parse(JSON.stringify({nodes:t,edges:n,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:t=>new Promise(n=>{const{nodes:o,edges:i,position:r,zoom:l,viewport:u}=t;o&&m(o),i&&y(i);const[s,c]=(null==u?void 0:u.x)&&(null==u?void 0:u.y)?[u.x,u.y]:null!=r?r:[null,null];if(s&&c){const t=(null==u?void 0:u.zoom)||l||e.viewport.zoom;return ve(()=>a.value.viewportInitialized).toBe(!0).then(()=>{a.value.setViewport({x:s,y:c,zoom:t}).then(()=>{n(!0)})})}n(!0)}),updateNodeInternals:u,viewportHelper:a,$reset:()=>{const t=ia();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){var n,o,i;const r=qo.translate(null!==(n=t.defaultViewport.x)&&void 0!==n?n:0,null!==(o=t.defaultViewport.y)&&void 0!==o?o:0).scale(Si(null!==(i=t.defaultViewport.zoom)&&void 0!==i?i:1,t.minZoom,t.maxZoom)),a=e.viewportRef.getBoundingClientRect(),l=[[0,0],[a.width,a.height]],u=e.d3Zoom.constrain()(r,l,t.translateExtent);e.d3Zoom.transform(e.d3Selection,u)}x(t)},$destroy:()=>{}}}const la=["data-id","data-handleid","data-nodeid","data-handlepos"],ua=a("a",c(l(l({},{name:"Handle",compatConfig:{MODE:3}}),{},{props:{id:{default:null},type:{},position:{default:()=>ai.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=x(e,["position","connectable","connectableStart","connectableEnd","id"]),o=_(()=>{var e;return null!==(e=n.type)&&void 0!==e?e:"source"}),i=_(()=>{var e;return null!==(e=n.isValidConnection)&&void 0!==e?e:null}),{id:r,connectionStartHandle:a,connectionClickStartHandle:u,connectionEndHandle:s,vueFlowRef:c,nodesConnectable:d,noDragClassName:v,noPanClassName:p}=Ha(),{id:g,node:N,nodeEl:k,connectedEdges:M}=Kr(),C=E(),I=_(()=>void 0===e.connectableStart||e.connectableStart),P=_(()=>void 0===e.connectableEnd||e.connectableEnd),T=_(()=>{var t,n,i,r,l,u;return(null==(t=a.value)?void 0:t.nodeId)===g&&(null==(n=a.value)?void 0:n.id)===e.id&&(null==(i=a.value)?void 0:i.type)===o.value||(null==(r=s.value)?void 0:r.nodeId)===g&&(null==(l=s.value)?void 0:l.id)===e.id&&(null==(u=s.value)?void 0:u.type)===o.value}),O=_(()=>{var t,n,i;return(null==(t=u.value)?void 0:t.nodeId)===g&&(null==(n=u.value)?void 0:n.id)===e.id&&(null==(i=u.value)?void 0:i.type)===o.value}),{handlePointerDown:A,handleClick:D}=Zr({nodeId:g,handleId:e.id,isValidConnection:i,type:o}),$=S(()=>"string"==typeof e.connectable&&"single"===e.connectable?!M.value.some(t=>{const n=t[`${o.value}Handle`];return t[o.value]===g&&(!n||n===e.id)}):"number"==typeof e.connectable?M.value.filter(t=>{const n=t[`${o.value}Handle`];return t[o.value]===g&&(!n||n===e.id)}).length<e.connectable:"function"==typeof e.connectable?e.connectable(N,M.value):Or(e.connectable)?e.connectable:d.value);function z(e){const t=gr(e);$.value&&I.value&&(t&&0===e.button||!t)&&A(e)}function B(e){g&&(u.value||I.value)&&$.value&&D(e)}return w(()=>{var t,n;if(!N.dimensions.width||!N.dimensions.height)return;const i=null==(n=N.handleBounds[o.value])?void 0:n.find(t=>t.id===e.id);if(!c.value||i)return;const r=c.value.querySelector(".vue-flow__transformationpane");if(!(k.value&&C.value&&r&&e.id))return;const a=k.value.getBoundingClientRect(),u=C.value.getBoundingClientRect(),s=window.getComputedStyle(r),{m22:d}=new window.DOMMatrixReadOnly(s.transform),v=l({id:e.id,position:e.position,x:(u.left-a.left)/d,y:(u.top-a.top)/d,type:o.value,nodeId:g},Ei(C.value));N.handleBounds[o.value]=[...null!==(t=N.handleBounds[o.value])&&void 0!==t?t:[],v]}),t({handleClick:D,handlePointerDown:A,onClick:B,onPointerDown:z}),(t,n)=>(f(),h("div",{ref_key:"handle",ref:C,"data-id":`${y(r)}-${y(g)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":y(g),"data-handlepos":t.position,class:b(["vue-flow__handle",[`vue-flow__handle-${t.position}`,`vue-flow__handle-${e.id}`,y(v),y(p),o.value,{connectable:$.value,connecting:O.value,connectablestart:I.value,connectableend:P.value,connectionindicator:$.value&&(I.value&&!T.value||P.value&&T.value)}]]),onMousedown:z,onTouchstartPassive:z,onClick:B},[m(t.$slots,"default",{id:t.id})],42,la))}}))),sa=function({sourcePosition:e=ai.Bottom,targetPosition:t=ai.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:a}){var l;const u=null!==(l=a.label)&&void 0!==l?l:n;return[F(ua,{type:"target",position:t,connectable:o,isValidConnection:i}),"string"!=typeof u&&u?F(u):F(P,[u]),F(ua,{type:"source",position:e,connectable:o,isValidConnection:r})]};sa.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"],sa.inheritAttrs=!1,sa.compatConfig={MODE:3};const ca=sa,da=function({targetPosition:e=ai.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){var r;const a=null!==(r=i.label)&&void 0!==r?r:t;return[F(ua,{type:"target",position:e,connectable:n,isValidConnection:o}),"string"!=typeof a&&a?F(a):F(P,[a])]};da.props=["targetPosition","label","isValidTargetPos","connectable","data"],da.inheritAttrs=!1,da.compatConfig={MODE:3};const va=da,fa=function({sourcePosition:e=ai.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){var r;const a=null!==(r=i.label)&&void 0!==r?r:t;return["string"!=typeof a&&a?F(a):F(P,[a]),F(ua,{type:"source",position:e,connectable:n,isValidConnection:o})]};fa.props=["sourcePosition","label","isValidSourcePos","connectable","data"],fa.inheritAttrs=!1,fa.compatConfig={MODE:3};const ha=fa,pa=["transform"],ga=["width","height","x","y","rx","ry"],ma=["y"],ya=c(l(l({},{name:"EdgeText",compatConfig:{MODE:3}}),{},{props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=E({x:0,y:0,width:0,height:0}),n=E(null),o=S(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);function i(){if(!n.value)return;const e=n.value.getBBox();e.width===t.value.width&&e.height===t.value.height||(t.value=e)}return w(i),N([()=>e.x,()=>e.y,n,()=>e.label],i),(e,i)=>(f(),h("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(f(),h("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:O(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,ga)):B("",!0),I("text",ee(e.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[m(e.$slots,"default",{},()=>["string"!=typeof e.label?(f(),z(te(e.label),{key:0})):(f(),h(P,{key:1},[ne(L(e.label),1)],64))])],16,ma)],8,pa))}})),wa=["id","d","marker-end","marker-start"],ba=["d","stroke-width"],xa=c(l(l({},{name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}}),{},{props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=E(null),o=E(null),i=E(null),r=Q();return t({pathEl:n,interactionEl:o,labelEl:i}),(e,t)=>(f(),h(P,null,[I("path",ee(y(r),{id:e.id,ref_key:"pathEl",ref:n,d:e.path,class:"vue-flow__edge-path","marker-end":e.markerEnd,"marker-start":e.markerStart}),null,16,wa),e.interactionWidth?(f(),h("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,ba)):B("",!0),e.label&&e.labelX&&e.labelY?(f(),z(ya,{key:1,ref_key:"labelEl",ref:i,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):B("",!0)],64))}}));function _a({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,a=Math.abs(o-t)/2;return[r,o<t?o+a:o-a,i,a]}function Ea({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:a,targetControlY:l}){const u=.125*e+.375*i+.375*a+.125*n,s=.125*t+.375*r+.375*l+.125*o;return[u,s,Math.abs(u-e),Math.abs(s-t)]}function Sa(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Na({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let a,l;switch(e){case ai.Left:a=t-Sa(t-o,r),l=n;break;case ai.Right:a=t+Sa(o-t,r),l=n;break;case ai.Top:a=t,l=n-Sa(n-i,r);break;case ai.Bottom:a=t,l=n+Sa(i-n,r)}return[a,l]}function ka(e){const{sourceX:t,sourceY:n,sourcePosition:o=ai.Bottom,targetX:i,targetY:r,targetPosition:a=ai.Top,curvature:l=.25}=e,[u,s]=Na({pos:o,x1:t,y1:n,x2:i,y2:r,c:l}),[c,d]=Na({pos:a,x1:i,y1:r,x2:t,y2:n,c:l}),[v,f,h,p]=Ea({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return[`M${t},${n} C${u},${s} ${c},${d} ${i},${r}`,v,f,h,p]}function Ma({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,a;switch(e){case ai.Left:case ai.Right:r=.5*(t+o),a=n;break;case ai.Top:case ai.Bottom:r=t,a=.5*(n+i)}return[r,a]}function Ca(e){const{sourceX:t,sourceY:n,sourcePosition:o=ai.Bottom,targetX:i,targetY:r,targetPosition:a=ai.Top}=e,[l,u]=Ma({pos:o,x1:t,y1:n,x2:i,y2:r}),[s,c]=Ma({pos:a,x1:i,y1:r,x2:t,y2:n}),[d,v,f,h]=Ea({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${t},${n} C${l},${u} ${s},${c} ${i},${r}`,d,v,f,h]}const Ia={[ai.Left]:{x:-1,y:0},[ai.Right]:{x:1,y:0},[ai.Top]:{x:0,y:-1},[ai.Bottom]:{x:0,y:1}};function Pa(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Ta({source:e,sourcePosition:t=ai.Bottom,target:n,targetPosition:o=ai.Top,center:i,offset:r}){const a=Ia[t],l=Ia[o],u={x:e.x+a.x*r,y:e.y+a.y*r},s={x:n.x+l.x*r,y:n.y+l.y*r},c=function({source:e,sourcePosition:t=ai.Bottom,target:n}){return t===ai.Left||t===ai.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}({source:u,sourcePosition:t,target:s}),d=0!==c.x?"x":"y",v=c[d];let f,h,p;const g={x:0,y:0},m={x:0,y:0},[y,w,b,x]=_a({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]===-1){var _,E;h=null!==(_=i.x)&&void 0!==_?_:y,p=null!==(E=i.y)&&void 0!==E?E:w;const e=[{x:h,y:u.y},{x:h,y:s.y}],t=[{x:u.x,y:p},{x:s.x,y:p}];f=a[d]===v?"x"===d?e:t:"x"===d?t:e}else{const i=[{x:u.x,y:s.y}],c=[{x:s.x,y:u.y}];if(f="x"===d?a.x===v?c:i:a.y===v?i:c,t===o){const t=Math.abs(e[d]-n[d]);if(t<=r){const o=Math.min(r-1,r-t);a[d]===v?g[d]=(u[d]>e[d]?-1:1)*o:m[d]=(s[d]>n[d]?-1:1)*o}}if(t!==o){const e="x"===d?"y":"x",t=a[d]===l[e],n=u[e]>s[e],o=u[e]<s[e];(1===a[d]&&(!t&&n||t&&o)||1!==a[d]&&(!t&&o||t&&n))&&(f="x"===d?i:c)}const y={x:u.x+g.x,y:u.y+g.y},w={x:s.x+m.x,y:s.y+m.y};Math.max(Math.abs(y.x-f[0].x),Math.abs(w.x-f[0].x))>=Math.max(Math.abs(y.y-f[0].y),Math.abs(w.y-f[0].y))?(h=(y.x+w.x)/2,p=f[0].y):(h=f[0].x,p=(y.y+w.y)/2)}return[[e,{x:u.x+g.x,y:u.y+g.y},...f,{x:s.x+m.x,y:s.y+m.y},n],h,p,b,x]}function Oa(e){const{sourceX:t,sourceY:n,sourcePosition:o=ai.Bottom,targetX:i,targetY:r,targetPosition:a=ai.Top,borderRadius:l=5,centerX:u,centerY:s,offset:c=20}=e,[d,v,f,h,p]=Ta({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:a,center:{x:u,y:s},offset:c});return[d.reduce((e,t,n)=>{let o;return o=n>0&&n<d.length-1?function(e,t,n,o){const i=Math.min(Pa(e,t)/2,Pa(t,n)/2,o),{x:r,y:a}=t;if(e.x===r&&r===n.x||e.y===a&&a===n.y)return`L${r} ${a}`;if(e.y===a)return`L ${r+i*(e.x<n.x?-1:1)},${a}Q ${r},${a} ${r},${a+i*(e.y<n.y?1:-1)}`;const l=e.x<n.x?1:-1;return`L ${r},${a+i*(e.y<n.y?-1:1)}Q ${r},${a} ${r+i*l},${a}`}(d[n-1],t,d[n+1],l):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o},""),v,f,h,p]}const Aa=c({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,i]=function(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,a,l,u]=_a({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,a,l,u]}(e);return F(xa,l(l({path:n,labelX:o,labelY:i},t),e))}}),Da=c({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{var n,o;const[i,r,a]=Oa(l(l({},e),{},{sourcePosition:null!==(n=e.sourcePosition)&&void 0!==n?n:ai.Bottom,targetPosition:null!==(o=e.targetPosition)&&void 0!==o?o:ai.Top}));return F(xa,l(l({path:i,labelX:r,labelY:a},t),e))}}),$a=c({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup:(e,{attrs:t})=>()=>F(Da,l(l(l({},e),t),{},{borderRadius:0}))}),za=c({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{var n,o;const[i,r,a]=ka(l(l({},e),{},{sourcePosition:null!==(n=e.sourcePosition)&&void 0!==n?n:ai.Bottom,targetPosition:null!==(o=e.targetPosition)&&void 0!==o?o:ai.Top}));return F(xa,l(l({path:i,labelX:r,labelY:a},t),e))}}),Ba=c({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{var n,o;const[i,r,a]=Ca(l(l({},e),{},{sourcePosition:null!==(n=e.sourcePosition)&&void 0!==n?n:ai.Bottom,targetPosition:null!==(o=e.targetPosition)&&void 0!==o?o:ai.Top}));return F(xa,l(l({path:i,labelX:r,labelY:a},t),e))}}),Va={input:ha,default:ca,output:va},La={default:za,straight:Aa,step:$a,smoothstep:Da,simplebezier:Ba};class Ra{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var e,t;const n=null==(t=R())?void 0:t.appContext.app,o=null!==(e=null==n?void 0:n.config.globalProperties.$vueFlowStorage)&&void 0!==e?e:Ra.instance;return Ra.instance=null!=o?o:new Ra,n&&(n.config.globalProperties.$vueFlowStorage=Ra.instance),Ra.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=ia(),o=U(n),i={};for(const[l,v]of Object.entries(o.hooks)){i[`on${l.charAt(0).toUpperCase()+l.slice(1)}`]=v.on}const r={};for(const[l,v]of Object.entries(o.hooks))r[l]=v.trigger;const a=S(()=>{const e=new Map;for(const t of o.nodes)e.set(t.id,t);return e}),u=S(()=>{const e=new Map;for(const t of o.edges)e.set(t.id,t);return e}),s=function(e,t,n){const o=S(()=>e=>t.value.get(e)),i=S(()=>e=>n.value.get(e)),r=S(()=>{const t=l(l({},La),e.edgeTypes),n=Object.keys(t);for(const o of e.edges)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t}),a=S(()=>{const t=l(l({},Va),e.nodeTypes),n=Object.keys(t);for(const o of e.nodes)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t}),u=S(()=>e.onlyRenderVisibleElements?Ri(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),s=S(()=>{if(e.onlyRenderVisibleElements){const n=[];for(const o of e.edges){const i=t.value.get(o.source),r=t.value.get(o.target);dr({sourcePos:i.computedPosition||{x:0,y:0},targetPos:r.computedPosition||{x:0,y:0},sourceWidth:i.dimensions.width,sourceHeight:i.dimensions.height,targetWidth:r.dimensions.width,targetHeight:r.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&n.push(o)}return n}return e.edges}),c=S(()=>[...u.value,...s.value]),d=S(()=>{const t=[];for(const n of e.nodes)n.selected&&t.push(n);return t}),v=S(()=>{const t=[];for(const n of e.edges)n.selected&&t.push(n);return t}),f=S(()=>[...d.value,...v.value]),h=S(()=>{const t=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&void 0!==n.handleBounds&&t.push(n);return t}),p=S(()=>u.value.length>0&&h.value.length===u.value.length);return{getNode:o,getEdge:i,getElements:c,getEdgeTypes:r,getNodeTypes:a,getEdges:s,getNodes:u,getSelectedElements:f,getSelectedNodes:d,getSelectedEdges:v,getNodesInitialized:h,areNodesInitialized:p}}(o,a,u),c=aa(o,a,u);c.setState(l(l({},o),t));const d=l(l(l(l(l({},i),s),c),function(e,t={}){if(!j(e))return Z(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=K(()=>({get:()=>e.value[o],set(n){var i;if(null==(i=oe(t.replaceRef))||i)if(Array.isArray(e.value)){const t=[...e.value];t[o]=n,e.value=t}else{const t=l(l({},e.value),{},{[o]:n});Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[o]=n}}));return n}(o)),{},{nodeLookup:a,edgeLookup:u,emits:r,id:e,vueFlowVersion:"1.48.2",$destroy:()=>{this.remove(e)}});return this.set(e,d),d}getId(){return"vue-flow-"+this.currentId++}}function Ha(e){const t=Ra.getInstance(),n=H(),o="object"==typeof e,i=o?e:{id:e},r=i.id,a=null!=r?r:null==n?void 0:n.vueFlowId;let l;if(n){const e=k(Lr,null);null==e||a&&e.id!==a||(l=e)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const e=null!=r?r:t.getId(),o=t.create(e,i);l=o;(null!=n?n:M(!0)).run(()=>{N(o.applyDefault,(e,t,n)=>{const i=e=>{o.applyNodeChanges(e)},r=e=>{o.applyEdgeChanges(e)};e?(o.onNodesChange(i),o.onEdgesChange(r)):(o.hooks.value.nodesChange.off(i),o.hooks.value.edgesChange.off(r)),n(()=>{o.hooks.value.nodesChange.off(i),o.hooks.value.edgesChange.off(r)})},{immediate:!0}),u(()=>{if(l){const e=t.get(l.id);e?e.$destroy():Cr(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(i);if(n&&(G(Lr,l),n.vueFlowId=l.id),o){const e=R();"VueFlow"!==(null==e?void 0:e.type.name)&&l.emits.error(new pr(fr.USEVUEFLOW_OPTIONS))}return l}const Ya=c(l(l({},{name:"UserSelection",compatConfig:{MODE:3}}),{},{props:{userSelectionRect:{}},setup:e=>(e,t)=>(f(),h("div",{class:"vue-flow__selection vue-flow__container",style:O({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))})),Ga=["tabIndex"],Fa=c(l(l({},{name:"NodesSelection",compatConfig:{MODE:3}}),{},{setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:a}=Ha(),l=qr(),u=E(null),s=Xr({el:u,onStart(e){t.selectionDragStart(e),t.nodeDragStart(e)},onDrag(e){t.selectionDrag(e),t.nodeDrag(e)},onStop(e){t.selectionDragStop(e),t.nodeDragStop(e)}});w(()=>{var e;r.value||null==(e=u.value)||e.focus({preventScroll:!0})});const c=S(()=>Li(o.value)),d=S(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function v(e){t.selectionContextMenu({event:e,nodes:o.value})}function p(e){r.value||bi[e.key]&&(e.preventDefault(),l({x:bi[e.key].x,y:bi[e.key].y},e.shiftKey))}return(e,t)=>!y(a)&&c.value.width&&c.value.height?(f(),h("div",{key:0,class:b(["vue-flow__nodesselection vue-flow__container",y(i)]),style:O({transform:`translate(${y(n).x}px,${y(n).y}px) scale(${y(n).zoom})`})},[I("div",{ref_key:"el",ref:u,class:b([{dragging:y(s)},"vue-flow__nodesselection-rect"]),style:O(d.value),tabIndex:y(r)?void 0:-1,onContextmenu:v,onKeydown:p},null,46,Ga)],6)):B("",!0)}}));const Xa=c(l(l({},{name:"Pane",compatConfig:{MODE:3}}),{},{props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:a,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:s,getSelectedEdges:c,getSelectedNodes:d,removeNodes:v,removeEdges:p,selectionMode:g,deleteKeyCode:w,multiSelectionKeyCode:x,multiSelectionActive:E,edgeLookup:S,nodeLookup:k,connectionLookup:M,defaultEdgeOptions:C,connectionStartHandle:I,panOnDrag:P}=Ha(),T=V(null),O=V(new Set),A=V(new Set),D=V(null),$=_(()=>u.value&&(e.isSelecting||r.value)),L=_(()=>null!==I.value);let R=!1,H=!1;const Y=gi(w,{actInsideInputWithModifier:!1}),G=gi(x);function F(e,t){return n=>{n.target===t&&(null==e||e(n))}}function X(e){R||L.value?R=!1:(i.paneClick(e),a(),s.value=!1)}function U(e){var t;Array.isArray(P.value)&&(null==(t=P.value)?void 0:t.includes(2))?e.preventDefault():i.paneContextMenu(e)}function j(e){i.paneScroll(e)}return N(Y,e=>{e&&(v(d.value),p(c.value),s.value=!1)}),N(G,e=>{E.value=e}),(c,v)=>(f(),h("div",{ref_key:"container",ref:T,class:b(["vue-flow__pane vue-flow__container",{selection:c.isSelecting}]),onClick:v[0]||(v[0]=e=>$.value?void 0:F(X,T.value)(e)),onContextmenu:v[1]||(v[1]=e=>F(U,T.value)(e)),onWheelPassive:v[2]||(v[2]=e=>F(j,T.value)(e)),onPointerenter:v[3]||(v[3]=e=>$.value?void 0:y(i).paneMouseEnter(e)),onPointerdown:v[4]||(v[4]=n=>$.value?function(n){var o,r,s,c;if(D.value=null!==(o=null==(r=t.value)?void 0:r.getBoundingClientRect())&&void 0!==o?o:null,!u.value||!e.isSelecting||0!==n.button||n.target!==T.value||!D.value)return;null==(c=null==(s=n.target)?void 0:s.setPointerCapture)||c.call(s,n.pointerId);const{x:d,y:v}=function(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}(n,D.value);H=!0,R=!1,a(),l.value={width:0,height:0,startX:d,startY:v,x:d,y:v},i.selectionStart(n)}(n):y(i).paneMouseMove(n)),onPointermove:v[5]||(v[5]=e=>$.value?function(e){var t,a;if(!D.value||!l.value)return;R=!0;const{x:u,y:c}=mr(e,D.value),{startX:d=0,startY:v=0}=l.value,f={startX:d,startY:v,x:u<d?u:d,y:c<v?c:v,width:Math.abs(u-d),height:Math.abs(c-v)},h=O.value,p=A.value;O.value=new Set(Ri(n.value,f,o.value,g.value===li.Partial,!0).map(e=>e.id)),A.value=new Set;const m=null===(t=null==(a=C.value)?void 0:a.selectable)||void 0===t||t;for(const n of O.value){const e=M.value.get(n);if(e)for(const{edgeId:t}of e.values()){var y;const e=S.value.get(t);e&&(null!==(y=e.selectable)&&void 0!==y?y:m)&&A.value.add(t)}}if(!Br(h,O.value)){const e=tr(k.value,O.value,!0);i.nodesChange(e)}if(!Br(p,A.value)){const e=tr(S.value,A.value);i.edgesChange(e)}l.value=f,r.value=!0,s.value=!1}(e):y(i).paneMouseMove(e)),onPointerup:v[6]||(v[6]=t=>$.value?function(t){var n;0===t.button&&H&&(null==(n=t.target)||n.releasePointerCapture(t.pointerId),!r.value&&l.value&&t.target===T.value&&X(t),r.value=!1,l.value=null,s.value=O.value.size>0,i.selectionEnd(t),e.selectionKeyPressed&&(R=!1),H=!1)}(t):void 0),onPointerleave:v[7]||(v[7]=e=>y(i).paneMouseLeave(e))},[m(c.$slots,"default"),y(r)&&y(l)?(f(),z(Ya,{key:0,"user-selection-rect":y(l)},null,8,["user-selection-rect"])):B("",!0),y(s)&&y(d).length?(f(),z(Fa,{key:1})):B("",!0)],34))}})),Ua=c(l(l({},{name:"Transform",compatConfig:{MODE:3}}),{},{setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Ha(),i=S(()=>!!n.value&&!o.value),r=S(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(e,t)=>(f(),h("div",{class:"vue-flow__transformationpane vue-flow__container",style:O({transform:r.value,opacity:i.value?0:void 0})},[m(e.$slots,"default")],4))}})),ja=c(l(l({},{name:"Viewport",compatConfig:{MODE:3}}),{},{setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:a,panActivationKeyCode:l,panOnScroll:u,panOnScrollMode:s,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:v,zoomOnPinch:x,zoomOnScroll:E,preventScrolling:S,noWheelClassName:k,noPanClassName:M,emits:C,connectionStartHandle:I,userSelectionActive:P,paneDragging:T,d3Zoom:O,d3Selection:A,d3ZoomHandler:$,viewport:z,viewportRef:B,paneClickDistance:L}=Ha();!function(e){const{emits:t,dimensions:n}=Ha();let o;w(()=>{const i=()=>{var o,i,r;if(!e.value||null!==(o=null==(r=(i=e.value).checkVisibility)?void 0:r.call(i))&&void 0!==o&&!o)return;const a=Ei(e.value);0!==a.width&&0!==a.height||t.error(new pr(fr.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};i(),window.addEventListener("resize",i),e.value&&(o=new ResizeObserver(()=>i()),o.observe(e.value)),D(()=>{window.removeEventListener("resize",i),o&&e.value&&o.unobserve(e.value)})})}(B);const R=V(!1),H=V(!1);let Y=null,G=!1,F=0,X={x:0,y:0,zoom:0};const U=gi(l),j=gi(a),Z=gi(r),K=_(()=>(!j.value||j.value&&!0===a.value)&&(U.value||d.value)),W=_(()=>U.value||u.value),q=_(()=>!0===a.value&&!0!==K.value),J=_(()=>j.value&&!0!==a.value||P.value||q.value),Q=_(()=>null!==I.value);function ee(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function te(e){return{x:e.x,y:e.y,zoom:e.k}}function ne(e,t){return e.target.closest(`.${t}`)}return w(()=>{var e,r,l;if(!B.value)return void Cr("Viewport element is missing");const f=B.value,h=f.getBoundingClientRect(),p=function(){var e,t,n,o=ei,i=ti,r=ri,a=oi,l=ii,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=qn,v=we("start","zoom","end"),f=0,h=10;function p(e){e.property("__zoom",ni).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",S).filter(l).on("touchstart.zoom",N).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Wo(t,e.x,e.y)}function m(e,t,n){var o=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return o===e.x&&i===e.y?e:new Wo(e.k,o,i)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,o){e.on("start.zoom",function(){b(this,arguments).event(o).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(o).end()}).tween("zoom",function(){var e=this,r=arguments,a=b(e,r).event(o),l=i.apply(e,r),u=null==n?y(l):"function"==typeof n?n.apply(e,r):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,v="function"==typeof t?t.apply(e,r):t,f=d(c.invert(u).concat(s/c.k),v.invert(u).concat(s/v.k));return function(e){if(1===e)e=v;else{var t=f(e),n=s/t[2];e=new Wo(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function _(e,...t){if(o.apply(this,arguments)){var n=b(this,t).event(e),i=this.__zoom,l=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),c=zt(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===l)return;n.mouse=[c,i.invert(c)],Eo(this),n.start()}Qo(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",r(m(g(i,l),n.mouse[0],n.mouse[1]),n.extent,s))}}function E(e,...t){if(!n&&o.apply(this,arguments)){var i=e.currentTarget,a=b(this,t,!0).event(e),l=$t(e.view).on("mousemove.zoom",function(e){if(Qo(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>f}a.event(e).zoom("mouse",r(m(a.that.__zoom,a.mouse[0]=zt(e,i),a.mouse[1]),a.extent,s))},!0).on("mouseup.zoom",function(e){l.on("mousemove.zoom mouseup.zoom",null),Yt(e.view,a.moved),Qo(e),a.event(e).end()},!0),u=zt(e,i),c=e.clientX,d=e.clientY;Ht(e.view),Jo(e),a.mouse=[u,this.__zoom.invert(u)],Eo(this),a.start()}}function S(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=zt(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),u=n.k*(e.shiftKey?.5:2),d=r(m(g(n,u),a,l),i.apply(this,t),s);Qo(e),c>0?$t(this).transition().duration(c).call(w,d,a,e):$t(this).call(p.transform,d,a,e)}}function N(n,...i){if(o.apply(this,arguments)){var r,a,l,u,s=n.touches,c=s.length,d=b(this,i,n.changedTouches.length===c).event(n);for(Jo(n),a=0;a<c;++a)u=[u=zt(l=s[a],this),this.__zoom.invert(u),l.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,r=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),r&&(d.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),Eo(this),d.start())}}function k(e,...t){if(this.__zooming){var n,o,i,a,l=b(this,t).event(e),u=e.changedTouches,c=u.length;for(Qo(e),n=0;n<c;++n)i=zt(o=u[n],this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=i:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=i);if(o=l.that.__zoom,l.touch1){var d=l.touch0[0],v=l.touch0[1],f=l.touch1[0],h=l.touch1[1],p=(p=f[0]-d[0])*p+(p=f[1]-d[1])*p,y=(y=h[0]-v[0])*y+(y=h[1]-v[1])*y;o=g(o,Math.sqrt(p/y)),i=[(d[0]+f[0])/2,(d[1]+f[1])/2],a=[(v[0]+h[0])/2,(v[1]+h[1])/2]}else{if(!l.touch0)return;i=l.touch0[0],a=l.touch0[1]}l.zoom("touch",r(m(o,i,a),l.extent,s))}}function M(e,...o){if(this.__zooming){var i,r,a=b(this,o).event(e),l=e.changedTouches,u=l.length;for(Jo(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<u;++i)r=l[i],a.touch0&&a.touch0[2]===r.identifier?delete a.touch0:a.touch1&&a.touch1[2]===r.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(r=zt(r,this),Math.hypot(t[0]-r[0],t[1]-r[1])<h)){var s=$t(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return p.transform=function(e,t,n,o){var i=e.selection?e.selection():e;i.property("__zoom",ni),e!==i?w(e,t,n,o):i.interrupt().each(function(){b(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},p.scaleBy=function(e,t,n,o){p.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,o)},p.scaleTo=function(e,t,n,o){p.transform(e,function(){var e=i.apply(this,arguments),o=this.__zoom,a=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"==typeof t?t.apply(this,arguments):t;return r(m(g(o,u),a,l),e,s)},n,o)},p.translateBy=function(e,t,n,o){p.transform(e,function(){return r(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),s)},null,o)},p.translateTo=function(e,t,n,o,a){p.transform(e,function(){var e=i.apply(this,arguments),a=this.__zoom,l=null==o?y(e):"function"==typeof o?o.apply(this,arguments):o;return r(qo.translate(l[0],l[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)},o,a)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=$t(this.that).datum();v.call(e,this.that,new Ko(e,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:v}),t)}},p.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Zo(+e),p):a},p.filter=function(e){return arguments.length?(o="function"==typeof e?e:Zo(!!e),p):o},p.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Zo(!!e),p):l},p.extent=function(e){return arguments.length?(i="function"==typeof e?e:Zo([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),p):i},p.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],p):[u[0],u[1]]},p.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(e){return arguments.length?(r=e,p):r},p.duration=function(e){return arguments.length?(c=+e,p):c},p.interpolate=function(e){return arguments.length?(d=e,p):d},p.on=function(){var e=v.on.apply(v,arguments);return e===v?p:e},p.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,p):Math.sqrt(f)},p.tapDistance=function(e){return arguments.length?(h=+e,p):h},p}().clickDistance(L.value).scaleExtent([t.value,n.value]).translateExtent(i.value),g=$t(f).call(p),m=g.on("wheel.zoom"),y=qo.translate(null!==(e=o.value.x)&&void 0!==e?e:0,null!==(r=o.value.y)&&void 0!==r?r:0).scale(Si(null!==(l=o.value.zoom)&&void 0!==l?l:1,t.value,n.value)),w=[[0,0],[h.width,h.height]],b=p.constrain()(y,w,i.value);p.transform(g,b),p.wheelDelta(Ui),O.value=p,A.value=g,$.value=m,z.value={x:b.x,y:b.y,zoom:b.k},p.on("start",e=>{var t;if(!e.sourceEvent)return null;F=e.sourceEvent.button,R.value=!0;const n=te(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&(T.value=!0),X=n,C.viewportChangeStart(n),C.moveStart({event:e,flowTransform:n})}),p.on("end",e=>{if(!e.sourceEvent)return null;if(R.value=!1,T.value=!1,ee(K.value,null!=F?F:0)&&!G&&C.paneContextMenu(e.sourceEvent),G=!1,t=X,n=e.transform,t.x!==n.x&&!Number.isNaN(n.x)||t.y!==n.y&&!Number.isNaN(n.y)||t.zoom!==n.k&&!Number.isNaN(n.k)){const t=te(e.transform);X=t,C.viewportChangeEnd(t),C.moveEnd({event:e,flowTransform:t})}var t,n}),p.filter(e=>{var t;const n=Z.value||E.value,o=x.value&&e.ctrlKey,i=e.button,r="wheel"===e.type;if(1===i&&"mousedown"===e.type&&(ne(e,"vue-flow__node")||ne(e,"vue-flow__edge")))return!0;if(!(K.value||n||W.value||v.value||x.value))return!1;if(P.value)return!1;if(Q.value&&!r)return!1;if(!v.value&&"dblclick"===e.type)return!1;if(ne(e,k.value)&&r)return!1;if(ne(e,M.value)&&(!r||W.value&&r&&!Z.value))return!1;if(!x.value&&e.ctrlKey&&r)return!1;if(!n&&!W.value&&!o&&r)return!1;if(!x&&"touchstart"===e.type&&(null==(t=e.touches)?void 0:t.length)>1)return e.preventDefault(),!1;if(!K.value&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(q.value&&Array.isArray(d.value)&&d.value.includes(0)&&0===i)return!1;if(Array.isArray(d.value)&&!d.value.includes(i)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const l=Array.isArray(d.value)&&d.value.includes(i)||!0===a.value&&Array.isArray(d.value)&&!d.value.includes(0)||!i||i<=1;return(!e.ctrlKey||U.value||r)&&l}),N([P,K],()=>{P.value&&!R.value?p.on("zoom",null):P.value||p.on("zoom",e=>{z.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};const t=te(e.transform);G=ee(K.value,null!=F?F:0),C.viewportChange(t),C.move({event:e,flowTransform:t})})},{immediate:!0}),N([P,W,s,Z,x,S,k],()=>{!W.value||Z.value||P.value?void 0!==m&&g.on("wheel.zoom",function(e,t){const n=!S.value&&"wheel"===e.type&&!e.ctrlKey,o=Z.value||E.value,i=x.value&&e.ctrlKey;if(!o&&!u.value&&!i&&"wheel"===e.type||n||ne(e,k.value))return null;e.preventDefault(),m.call(this,e,t)},{passive:!1}):g.on("wheel.zoom",e=>{if(ne(e,k.value))return!1;const t=Z.value||E.value,n=x.value&&e.ctrlKey;if(!(!S.value||W.value||t||n))return!1;e.preventDefault(),e.stopImmediatePropagation();const o=g.property("__zoom").k||1,i=yr();if(!U.value&&e.ctrlKey&&x.value&&i){const t=zt(e),n=o*2**Ui(e);return void p.scaleTo(g,n,t,e)}const r=1===e.deltaMode?20:1;let a=s.value===di.Vertical?0:e.deltaX*r,l=s.value===di.Horizontal?0:e.deltaY*r;!i&&e.shiftKey&&s.value!==di.Vertical&&!a&&l&&(a=l,l=0),p.translateBy(g,-a/o*c.value,-l/o*c.value);const u=te(g.property("__zoom"));Y&&clearTimeout(Y),H.value?(C.move({event:e,flowTransform:u}),C.viewportChange(u),Y=setTimeout(()=>{C.moveEnd({event:e,flowTransform:u}),C.viewportChangeEnd(u),H.value=!1},150)):(H.value=!0,C.moveStart({event:e,flowTransform:u}),C.viewportChangeStart(u))},{passive:!1})},{immediate:!0})}),(e,t)=>(f(),h("div",{ref_key:"viewportRef",ref:B,class:"vue-flow__viewport vue-flow__container"},[p(Xa,{"is-selecting":J.value,"selection-key-pressed":y(j),class:b({connecting:Q.value,dragging:y(T),draggable:!0===y(d)||Array.isArray(y(d))&&y(d).includes(0)})},{default:g(()=>[p(Ua,null,{default:g(()=>[m(e.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}})),Za=["id"],Ka=["id"],Wa=["id"],qa=c(l(l({},{name:"A11yDescriptions",compatConfig:{MODE:3}}),{},{setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Ha();return(e,i)=>(f(),h(P,null,[I("div",{id:`${y(mi)}-${y(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+L(y(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Za),I("div",{id:`${y(yi)}-${y(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Ka),y(n)?B("",!0):(f(),h("div",{key:0,id:`${y("vue-flow__aria-live")}-${y(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},L(y(o)),9,Wa))],64))}}));function Ja(e,t,n){return n===ai.Left?e-t:n===ai.Right?e+t:e}function Qa(e,t,n){return n===ai.Top?e-t:n===ai.Bottom?e+t:e}const el=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ai.Top,type:i}){return F("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:Ja(t,e,o),cy:Qa(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};el.props=["radius","centerX","centerY","position","type"],el.compatConfig={MODE:3};const tl=el,nl=c({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:a,noPanClassName:u,getEdgeTypes:s,removeSelectedEdges:c,findEdge:d,findNode:v,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:p,elementsSelectable:g,edgesUpdatable:m,edgesFocusable:y,hooks:w}=Ha(),b=S(()=>d(e.id)),{emit:x,on:N}=Ur(b.value,r),M=k(Fr),C=R(),I=E(!1),P=E(!1),T=E(""),O=E(null),A=E("source"),D=E(null),$=_(()=>void 0===b.value.selectable?g.value:b.value.selectable),z=_(()=>void 0===b.value.updatable?m.value:b.value.updatable),B=_(()=>void 0===b.value.focusable?y.value:b.value.focusable);G(Yr,e.id),G(Gr,D);const V=S(()=>b.value.class instanceof Function?b.value.class(b.value):b.value.class),L=S(()=>b.value.style instanceof Function?b.value.style(b.value):b.value.style),H=S(()=>{var e;const t=b.value.type||"default",n=null==M?void 0:M[`edge-${t}`];if(n)return n;let o=null!==(e=b.value.template)&&void 0!==e?e:s.value[t];if("string"==typeof o&&C){const e=Object.keys(C.appContext.components);e&&e.includes(t)&&(o=J(t,!1))}return o&&"string"!=typeof o?o:(r.error(new pr(fr.EDGE_TYPE_MISSING,o)),!1)}),{handlePointerDown:Y}=Zr({nodeId:T,handleId:O,type:A,isValidConnection:f,edgeUpdaterType:A,onEdgeUpdate:function(e,t){x.update({event:e,edge:b.value,connection:t})},onEdgeUpdateEnd:function(e){x.updateEnd({event:e,edge:b.value}),P.value=!1}});return()=>{var n;const a=v(b.value.source),c=v(b.value.target),d="pathOptions"in b.value?b.value.pathOptions:{};if(!a&&!c)return r.error(new pr(fr.EDGE_SOURCE_TARGET_MISSING,b.value.id,b.value.source,b.value.target)),null;if(!a)return r.error(new pr(fr.EDGE_SOURCE_MISSING,b.value.id,b.value.source)),null;if(!c)return r.error(new pr(fr.EDGE_TARGET_MISSING,b.value.id,b.value.target)),null;if(!b.value||b.value.hidden||a.hidden||c.hidden)return null;let f;f=o.value===si.Strict?a.handleBounds.source:[...a.handleBounds.source||[],...a.handleBounds.target||[]];const h=cr(f,b.value.sourceHandle);let p;p=o.value===si.Strict?c.handleBounds.target:[...c.handleBounds.target||[],...c.handleBounds.source||[]];const g=cr(p,b.value.targetHandle),m=(null==h?void 0:h.position)||ai.Bottom,y=(null==g?void 0:g.position)||ai.Top,{x:x,y:_}=sr(a,h,m),{x:E,y:S}=sr(c,g,y);return b.value.sourceX=x,b.value.sourceY=_,b.value.targetX=E,b.value.targetY=S,F("g",l(l({ref:D,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===H.value?"default":b.value.type||"default"}`,u.value,V.value,{updating:I.value,selected:b.value.selected,animated:b.value.animated,inactive:!$.value&&!w.value.edgeClick.hasListeners()}],tabIndex:B.value?0:void 0,"aria-label":null===b.value.ariaLabel?void 0:null!==(n=b.value.ariaLabel)&&void 0!==n?n:`Edge from ${b.value.source} to ${b.value.target}`,"aria-describedby":B.value?`${yi}-${t}`:void 0,"aria-roledescription":"edge",role:B.value?"group":"img"},b.value.domAttributes),{},{onClick:Z,onContextmenu:K,onDblclick:W,onMouseenter:q,onMousemove:Q,onMouseleave:ee,onKeyDown:B.value?oe:void 0}),[P.value?null:F(!1===H.value?s.value.default:H.value,l({id:e.id,sourceNode:a,targetNode:c,source:b.value.source,target:b.value.target,type:b.value.type,updatable:z.value,selected:b.value.selected,animated:b.value.animated,label:b.value.label,labelStyle:b.value.labelStyle,labelShowBg:b.value.labelShowBg,labelBgStyle:b.value.labelBgStyle,labelBgPadding:b.value.labelBgPadding,labelBgBorderRadius:b.value.labelBgBorderRadius,data:b.value.data,events:l(l({},b.value.events),N),style:L.value,markerStart:`url('#${Xi(b.value.markerStart,t)}')`,markerEnd:`url('#${Xi(b.value.markerEnd,t)}')`,sourcePosition:m,targetPosition:y,sourceX:x,sourceY:_,targetX:E,targetY:S,sourceHandleId:b.value.sourceHandle,targetHandleId:b.value.targetHandle,interactionWidth:b.value.interactionWidth},d)),["source"===z.value||!0===z.value?[F("g",{onMousedown:te,onMouseenter:X,onMouseout:U},F(tl,{position:m,centerX:x,centerY:_,radius:i.value,type:"source","data-type":"source"}))]:null,"target"===z.value||!0===z.value?[F("g",{onMousedown:ne,onMouseenter:X,onMouseout:U},F(tl,{position:y,centerX:E,centerY:S,radius:i.value,type:"target","data-type":"target"}))]:null]])};function X(){I.value=!0}function U(){I.value=!1}function j(e,t){var n;0===e.button&&(P.value=!0,T.value=t?b.value.target:b.value.source,O.value=null!==(n=t?b.value.targetHandle:b.value.sourceHandle)&&void 0!==n?n:null,A.value=t?"target":"source",x.updateStart({event:e,edge:b.value}),Y(e))}function Z(e){var t;const o={event:e,edge:b.value};$.value&&(a.value=!1,b.value.selected&&h.value?(c([b.value]),null==(t=D.value)||t.blur()):n([b.value])),x.click(o)}function K(e){x.contextMenu({event:e,edge:b.value})}function W(e){x.doubleClick({event:e,edge:b.value})}function q(e){x.mouseEnter({event:e,edge:b.value})}function Q(e){x.mouseMove({event:e,edge:b.value})}function ee(e){x.mouseLeave({event:e,edge:b.value})}function te(e){j(e,!0)}function ne(e){j(e,!1)}function oe(t){var o;if(!p.value&&wi.includes(t.key)&&$.value){"Escape"===t.key?(null==(o=D.value)||o.blur(),c([d(e.id)])):n([d(e.id)])}}}}),ol=c({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:a,connectionLineStyle:u,connectionLineOptions:s,connectionStatus:c,viewport:d,findNode:v}=Ha(),f=null==(e=k(Fr))?void 0:e["connection-line"],h=S(()=>{var e;return v(null==(e=o.value)?void 0:e.nodeId)}),p=S(()=>{var e,t;return null!==(e=v(null==(t=i.value)?void 0:t.nodeId))&&void 0!==e?e:null}),g=S(()=>({x:(r.value.x-d.value.x)/d.value.zoom,y:(r.value.y-d.value.y)/d.value.zoom})),m=S(()=>s.value.markerStart?`url(#${Xi(s.value.markerStart,t)})`:""),y=S(()=>s.value.markerEnd?`url(#${Xi(s.value.markerEnd,t)})`:"");return()=>{var e,t,r,d,v,w,b,x,_;if(!h.value||!o.value)return null;const E=o.value.id,S=o.value.type,N=h.value.handleBounds;let k=null!==(e=null==N?void 0:N[S])&&void 0!==e?e:[];if(n.value===si.Loose){var M;const e=null!==(M=null==N?void 0:N["source"===S?"target":"source"])&&void 0!==M?M:[];k=[...k,...e]}if(!k)return null;const C=null!==(t=E?k.find(e=>e.id===E):k[0])&&void 0!==t?t:null,I=null!==(r=null==C?void 0:C.position)&&void 0!==r?r:ai.Top,{x:P,y:T}=sr(h.value,C,I);let O=null;var A,D;p.value&&(O=n.value===si.Strict?(null==(b=p.value.handleBounds["source"===S?"target":"source"])?void 0:b.find(e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)}))||null:(null==(x=[...null!==(A=p.value.handleBounds.source)&&void 0!==A?A:[],...null!==(D=p.value.handleBounds.target)&&void 0!==D?D:[]])?void 0:x.find(e=>{var t;return e.id===(null==(t=i.value)?void 0:t.id)}))||null);const $=null!==(d=null==(_=i.value)?void 0:_.position)&&void 0!==d?d:I?kr[I]:null;if(!I||!$)return null;const z=null!==(v=null!==(w=a.value)&&void 0!==w?w:s.value.type)&&void 0!==v?v:ui.Bezier;let B="";const V={sourceX:P,sourceY:T,sourcePosition:I,targetX:g.value.x,targetY:g.value.y,targetPosition:$};return z===ui.Bezier?[B]=ka(V):z===ui.Step?[B]=Oa(l(l({},V),{},{borderRadius:0})):z===ui.SmoothStep?[B]=Oa(V):z===ui.SimpleBezier?[B]=Ca(V):B=`M${P},${T} ${g.value.x},${g.value.y}`,F("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},F("g",{class:"vue-flow__connection"},f?F(f,{sourceX:P,sourceY:T,sourcePosition:I,targetX:g.value.x,targetY:g.value.y,targetPosition:$,sourceNode:h.value,sourceHandle:C,targetNode:p.value,targetHandle:O,markerEnd:y.value,markerStart:m.value,connectionStatus:c.value}):F("path",{d:B,class:[s.value.class,c.value,"vue-flow__connection-path"],style:l(l({},u.value),s.value.style),"marker-end":y.value,"marker-start":m.value})))}}}),il=["id","markerWidth","markerHeight","markerUnits","orient"],rl=c(l(l({},{name:"MarkerType",compatConfig:{MODE:3}}),{},{props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup:e=>(e,t)=>(f(),h("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===y(ci).ArrowClosed?(f(),h("polyline",{key:0,style:O({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):B("",!0),e.type===y(ci).Arrow?(f(),h("polyline",{key:1,style:O({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):B("",!0)],8,il))})),al={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},ll=c(l(l({},{name:"MarkerDefinitions",compatConfig:{MODE:3}}),{},{setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Ha(),r=S(()=>{const e=new Set,r=[],a=n=>{if(n){const o=Xi(n,t);e.has(o)||("object"==typeof n?r.push(l(l({},n),{},{id:o,color:n.color||i.value})):r.push({id:o,color:i.value,type:n}),e.add(o))}};for(const t of[o.value.markerEnd,o.value.markerStart])a(t);for(const t of n.value)for(const e of[t.markerStart,t.markerEnd])a(e);return r.sort((e,t)=>e.id.localeCompare(t.id))});return(e,t)=>(f(),h("svg",al,[I("defs",null,[(f(!0),h(P,null,T(r.value,e=>(f(),z(rl,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}})),ul=c(l(l({},{name:"Edges",compatConfig:{MODE:3}}),{},{setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Ha();return(e,i)=>(f(),h(P,null,[p(ll),(f(!0),h(P,null,T(y(n),e=>(f(),h("svg",{key:e.id,class:"vue-flow__edges vue-flow__container",style:O({zIndex:y(vr)(e,y(t),y(o))})},[p(y(nl),{id:e.id},null,8,["id"])],4))),128)),p(y(ol))],64))}})),sl=c({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:a,removeSelectedNodes:u,addSelectedNodes:s,updateNodeDimensions:c,onUpdateNodeInternals:d,getNodeTypes:v,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:p,ariaLiveMessage:g,snapToGrid:m,snapGrid:y,nodeDragThreshold:b,nodesDraggable:x,elementsSelectable:M,nodesConnectable:C,nodesFocusable:I,hooks:P}=Ha(),T=E(null);G(Hr,T),G(Rr,e.id);const O=k(Fr),D=R(),$=qr(),{node:z,parentNode:B}=Kr(e.id),{emit:V,on:L}=Wr(z,a),H=_(()=>void 0===z.draggable?x.value:z.draggable),Y=_(()=>void 0===z.selectable?M.value:z.selectable),X=_(()=>void 0===z.connectable?C.value:z.connectable),U=_(()=>void 0===z.focusable?I.value:z.focusable),j=S(()=>Y.value||H.value||P.value.nodeClick.hasListeners()||P.value.nodeDoubleClick.hasListeners()||P.value.nodeMouseEnter.hasListeners()||P.value.nodeMouseMove.hasListeners()||P.value.nodeMouseLeave.hasListeners()),Z=_(()=>!!z.dimensions.width&&!!z.dimensions.height),K=S(()=>{const e=z.type||"default",t=null==O?void 0:O[`node-${e}`];if(t)return t;let n=z.template||v.value[e];if("string"==typeof n&&D){const t=Object.keys(D.appContext.components);t&&t.includes(e)&&(n=J(e,!1))}return n&&"string"!=typeof n?n:(a.error(new pr(fr.NODE_TYPE_MISSING,n)),!1)}),W=Xr({id:e.id,el:T,disabled:()=>!H.value,selectable:Y,dragHandle:()=>z.dragHandle,onStart(e){V.dragStart(e)},onDrag(e){V.drag(e)},onStop(e){V.dragStop(e)},onClick(e){ue(e)}}),q=S(()=>z.class instanceof Function?z.class(z):z.class),Q=S(()=>{const e=(z.style instanceof Function?z.style(z):z.style)||{},t=z.width instanceof Function?z.width(z):z.width,n=z.height instanceof Function?z.height(z):z.height;return!e.width&&t&&(e.width="string"==typeof t?t:`${t}px`),!e.height&&n&&(e.height="string"==typeof n?n:`${n}px`),e}),ee=_(()=>{var e,t;return Number(null!==(e=null!==(t=z.zIndex)&&void 0!==t?t:Q.value.zIndex)&&void 0!==e?e:0)});return d(t=>{!t.includes(e.id)&&t.length||ne()}),w(()=>{N(()=>z.hidden,(t=!1,n,o)=>{!t&&T.value&&(e.resizeObserver.observe(T.value),o(()=>{T.value&&e.resizeObserver.unobserve(T.value)}))},{immediate:!0,flush:"post"})}),N([()=>z.type,()=>z.sourcePosition,()=>z.targetPosition],()=>{A(()=>{c([{id:e.id,nodeElement:T.value,forceUpdate:!0}])})}),N([()=>z.position.x,()=>z.position.y,()=>{var e;return null==(e=B.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=B.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=B.value)?void 0:e.computedPosition.z},ee,()=>z.selected,()=>z.dimensions.height,()=>z.dimensions.width,()=>{var e;return null==(e=B.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=B.value)?void 0:e.dimensions.width}],([e,t,n,o,i,r])=>{const a={x:e,y:t,z:r+(h.value&&z.selected?1e3:0)};var l,u;z.computedPosition=void 0!==n&&void 0!==o?{x:(u=a).x+(l={x:n,y:o,z:i}).x,y:u.y+l.y,z:(l.z>u.z?l.z:u.z)+1}:a},{flush:"post",immediate:!0}),N([()=>z.extent,f],([e,t],[n,o])=>{e===n&&t===o||te()}),"parent"===z.extent||"object"==typeof z.extent&&"range"in z.extent&&"parent"===z.extent.range?ve(()=>Z).toBe(!0).then(te):te(),()=>{var e,o;return z.hidden?null:F("div",l(l({ref:T,"data-id":z.id,class:["vue-flow__node",`vue-flow__node-${!1===K.value?"default":z.type||"default"}`,{[n.value]:H.value,dragging:null==W?void 0:W.value,draggable:H.value,selected:z.selected,selectable:Y.value,parent:z.isParent},q.value],style:l({visibility:Z.value?"visible":"hidden",zIndex:null!==(e=z.computedPosition.z)&&void 0!==e?e:ee.value,transform:`translate(${z.computedPosition.x}px,${z.computedPosition.y}px)`,pointerEvents:j.value?"all":"none"},Q.value),tabIndex:U.value?0:void 0,role:U.value?"group":void 0,"aria-describedby":p.value?void 0:`${mi}-${t}`,"aria-label":z.ariaLabel,"aria-roledescription":"node"},z.domAttributes),{},{onMouseenter:oe,onMousemove:ie,onMouseleave:re,onContextmenu:ae,onClick:ue,onDblclick:le,onKeydown:se}),[F(!1===K.value?v.value.default:K.value,{id:z.id,type:z.type,data:z.data,events:l(l({},z.events),L),selected:z.selected,resizing:z.resizing,dragging:W.value,connectable:X.value,position:z.computedPosition,dimensions:z.dimensions,isValidTargetPos:z.isValidTargetPos,isValidSourcePos:z.isValidSourcePos,parent:z.parentNode,parentNodeId:z.parentNode,zIndex:null!==(o=z.computedPosition.z)&&void 0!==o?o:ee.value,targetPosition:z.targetPosition,sourcePosition:z.sourcePosition,label:z.label,dragHandle:z.dragHandle,onUpdateNodeInternals:ne})])};function te(){const e=z.computedPosition,{computedPosition:t,position:n}=ur(z,m.value?wr(e,y.value):e,a.error,f.value,B.value);z.computedPosition.x===t.x&&z.computedPosition.y===t.y||(z.computedPosition=l(l({},z.computedPosition),t)),z.position.x===n.x&&z.position.y===n.y||(z.position=n)}function ne(){T.value&&c([{id:e.id,nodeElement:T.value,forceUpdate:!0}])}function oe(e){(null==W?void 0:W.value)||V.mouseEnter({event:e,node:z})}function ie(e){(null==W?void 0:W.value)||V.mouseMove({event:e,node:z})}function re(e){(null==W?void 0:W.value)||V.mouseLeave({event:e,node:z})}function ae(e){return V.contextMenu({event:e,node:z})}function le(e){return V.doubleClick({event:e,node:z})}function ue(e){Y.value&&(!o.value||!H.value||b.value>0)&&Tr(z,r.value,s,u,i,!1,T.value),V.click({event:e,node:z})}function se(e){if(!hi(e)&&!p.value)if(wi.includes(e.key)&&Y.value){const t="Escape"===e.key;Tr(z,r.value,s,u,i,t,T.value)}else H.value&&z.selected&&bi[e.key]&&(e.preventDefault(),g.value=`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~z.position.x}, y: ${~~z.position.y}`,$({x:bi[e.key].x,y:bi[e.key].y},e.shiftKey))}}});const cl={class:"vue-flow__nodes vue-flow__container"},dl=c(l(l({},{name:"Nodes",compatConfig:{MODE:3}}),{},{setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Ha(),i=function(e={includeHiddenNodes:!1}){const{nodes:t}=Ha();return S(()=>{if(0===t.value.length)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(void 0===(null==n?void 0:n.handleBounds)||0===n.dimensions.width||0===n.dimensions.height))return!1;return!0})}(),r=E();return N(i,e=>{e&&A(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),w(()=>{r.value=new ResizeObserver(e=>{const t=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));A(()=>n(t))})}),D(()=>{var e;return null==(e=r.value)?void 0:e.disconnect()}),(e,n)=>(f(),h("div",cl,[r.value?(f(!0),h(P,{key:0},T(y(t),(e,t,n,o)=>{const i=[e.id];if(o&&o.key===e.id&&$(o,i))return o;const a=(f(),z(y(sl),{id:e.id,key:e.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return a.memo=i,a},n,0),128)):B("",!0)]))}}));const vl=I("div",{class:"vue-flow__edge-labels"},null,-1);a("_",c(l(l({},{name:"VueFlow",compatConfig:{MODE:3}}),{},{props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=d(),r=me(o,"modelValue",n),a=me(o,"nodes",n),l=me(o,"edges",n),s=Ha(o),c=oa({modelValue:r,nodes:a,edges:l},o,s);return function(e,t){const n=R();function o(e){var t;const o=function(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}(e);return!!(null==(t=null==n?void 0:n.vnode.props)?void 0:t[o])}C(()=>{for(const[n,i]of Object.entries(t.value)){const t=t=>{e(n,t)};i.setEmitter(t),u(i.removeEmitter),i.setHasEmitListeners(()=>o(n)),u(i.removeHasEmitListeners)}})}(n,s.hooks),function(){const e=Ha();N(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}(),function(){const{emits:e}=Ha();w(()=>{if(Ir()){const t=document.querySelector(".vue-flow__pane");t&&"1"!==window.getComputedStyle(t).zIndex&&e.error(new pr(fr.MISSING_STYLES))}})}(),G(Fr,i),v(c),t(s),(e,t)=>(f(),h("div",{ref:y(s).vueFlowRef,class:"vue-flow"},[p(ja,null,{default:g(()=>[p(ul),vl,p(dl),m(e.$slots,"zoom-pane")]),_:3}),m(e.$slots,"default"),p(qa)],512))}})))}}})}();
