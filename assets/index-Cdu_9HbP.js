import{t as e}from"./table_mixin-BjqIVH_Q.js";import{U as t}from"./UploadHttpComponent-Z9tjjzV3.js";import{v as a}from"./validateRules-33HAVMqP.js";import{z as i,A as l,B as r,_ as s,D as o,r as d,o as n,c as h,b as m,h as p,d as c,w as u,F as f,q as g,e as x,t as y,v as b,f as w,i as v,p as k,x as j,y as C}from"./index-CIzN2UtG.js";import{E as D,y as R}from"./index-BK1MZIkn.js";import{v as P}from"./view_simple_table-DvD_mLL5.js";import{c as z}from"./index-A4SLUu0v.js";import{D as E}from"./DateRangerPickerComponent-Dkltldey.js";import{m as M}from"./modal_select-CEjQ8VvK.js";import"./polyfill-lGe4XDVY.js";import"./ydfxyj-api-B9ERbr1O.js";import"./view_file-CO9OLjy1.js";import"./zcq-sb-dky-BY8cnSG7.js";let Y=l.base;const S={loadTableDataService:e=>i({url:"".concat(Y,"/fxyj/queryZFxyj"),method:"post",data:e,showLoading:!0}),getZFxgkIsExistService:e=>i({url:"".concat(Y,"/fxyj/getZFxgkIsExist"),method:"post",data:e,showLoading:!0}),getFxgkService:e=>i({url:"".concat(Y,"/fxyj/getFxgk"),method:"post",data:e,showLoading:!0}),loadGkDataService:e=>i({url:"".concat(Y,"/fxyj/getZFxgk"),method:"post",data:e,showLoading:!0}),saveGkDataService:e=>i({url:"".concat(Y,"/fxyj/getZFxgkWord"),method:"post",data:e,showLoading:!0}),loadViewDialogService:e=>i({url:"".concat(Y,"/fxyj/fxyjLog"),method:"post",data:e,showLoading:!0}),saveTableDataService:e=>i({url:"".concat(Y,"/fxyj/saveZFxyjList"),method:"post",data:e,showLoading:!0}),initTableDataService:e=>i({url:"".concat(Y,"/fxyj/initZFxyj"),method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>i({url:"".concat(Y,"/fxyj/deleteZFxyj"),method:"post",data:e,showLoading:!0}),downloadModuleService:e=>i({url:"".concat(Y,"/fxyj/download-zfxyj-tpl"),method:"post",data:e,responseType:"blob",showLoading:!0}).then(e=>{r(e,"周风险预警导入模板","xlsx")})},_={id:"zfxgk",class:"page_content"},A={class:"header-item"},T={class:"header-item"},I={class:"title_input"},W={style:{"text-align":"center",color:"#666",width:"100%"}},B={style:{"text-align":"center",color:"#666",width:"100%"}};const O={name:"zfxyj",mixins:[e,z],components:{Zfxgk:s({name:"zfxgk",components:{Editor:D},data:()=>({formData:{title:"",first:"",second:[],third:"",table1:[],table2:[],tableName2:"",tableName1:""},editorConfig:{hoverbarKeys:{text:{menuKeys:["bold","clearStyle"]}}},editorRef:{},mathKey:-1,version:null,versionOptions:[]}),watch:{version:{handler(){this.loadPage()},immediate:!1}},computed:{gridOptions1(){return{keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},editConfig:{trigger:"click",mode:"cell"},headerCellClassName:"row-class",data:this.formData.table1,columns:[{field:"xh",title:"序号",width:80},{field:"sy",title:"五级预警事由",minWidth:200,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"time",title:"时段",width:210,editRender:{name:"ElInput",props:{clearable:!0}}}]}},gridOptions2(){return{keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},editConfig:{trigger:"click",mode:"cell"},headerCellClassName:"row-class",data:this.formData.table2,columns:[{field:"xh",title:"序号",width:80},{field:"sy",title:"六级预警事由",minWidth:200,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"time",title:"时段",width:210,editRender:{name:"ElInput",props:{clearable:!0}}}]}}},created(){this.initPage()},methods:{handleCreated(e){this.editorRef=e},initPage(){S.getZFxgkIsExistService({}).then(e=>{S.getFxgkService({lx:"周"}).then(t=>{this.versionOptions=t.data,"是"==e.data&&this.versionOptions.length>0?this.version=this.versionOptions[0].title:this.version=""})})},loadPage(){if(this.version){let e=JSON.parse(this.versionOptions.filter(e=>e.title===this.version)[0].sj);e.data.second=e.data.second.map(e=>({text:e})),this.formData=e.data,this.mathKey=Math.random()}else S.loadGkDataService({}).then(e=>{e.data.second=e.data.second.map(e=>({text:e})),this.formData=e.data,this.mathKey=Math.random()})},doSave(e){let t=JSON.parse(JSON.stringify(this.formData));t.second=t.second.map(e=>e.text),S.saveGkDataService({data:t}).then(t=>{e?o.downloadFileGetService({fileId:t.data.id}):(this.$message.success("保存成功"),this.initPage())})},doClear(){this.version=""}}},[["render",function(e,t,a,i,l,r){const s=d("el-option"),o=d("el-select"),w=d("el-button"),v=d("el-form-item"),k=d("el-input"),j=d("vxe-grid"),C=d("Editor"),D=d("el-form");return n(),h("div",_,[m("header",null,[m("section",null,[m("div",A,[t[5]||(t[5]=p(" 历史版本： ",-1)),c(o,{modelValue:l.version,"onUpdate:modelValue":t[0]||(t[0]=e=>l.version=e),placeholder:"请选择",style:{width:"400px"},filterable:"",clearable:""},{default:u(()=>[(n(!0),h(f,null,g(l.versionOptions,e=>(n(),x(s,{key:e.title,label:e.title,value:e.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),m("section",null,[m("div",T,[c(w,{type:"gradientBlue",onClick:r.doClear},{default:u(()=>[...t[6]||(t[6]=[p("重新生成",-1)])]),_:1},8,["onClick"]),c(w,{type:"gradientBlue",onClick:t[1]||(t[1]=e=>r.doSave(!1))},{default:u(()=>[...t[7]||(t[7]=[p("保存",-1)])]),_:1}),c(w,{type:"gradientBlue",onClick:t[2]||(t[2]=e=>r.doSave(!0))},{default:u(()=>[...t[8]||(t[8]=[p("导出",-1)])]),_:1})])])]),m("article",null,[(n(),x(D,{model:l.formData,"label-width":"0",key:l.mathKey},{default:u(()=>[c(v,null,{default:u(()=>[m("p",I,y(l.formData.title),1)]),_:1}),c(v,null,{default:u(()=>[c(k,{modelValue:l.formData.first,"onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.first=e),type:"textarea",autosize:"",resize:"none"},null,8,["modelValue"])]),_:1}),(n(!0),h(f,null,g(l.formData.second,(e,t)=>(n(),x(v,{key:"second"+t},{default:u(()=>[c(k,{modelValue:e.text,"onUpdate:modelValue":t=>e.text=t,autosize:"",type:"textarea",resize:"none"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128)),c(v,null,{default:u(()=>[m("p",W,y(l.formData.tableName1),1),c(j,b(r.gridOptions1,{ref:"xTable",style:{width:"100%"}}),null,16)]),_:1}),c(v,null,{default:u(()=>[c(C,{modelValue:l.formData.third,"onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.third=e),mode:"default",style:{width:"100%"},"default-config":l.editorConfig,onOnCreated:r.handleCreated},null,8,["modelValue","default-config","onOnCreated"])]),_:1}),c(v,null,{default:u(()=>[m("p",B,y(l.formData.tableName2),1),c(j,b(r.gridOptions2,{ref:"xTable",style:{width:"100%"}}),null,16)]),_:1})]),_:1},8,["model"]))])])}],["__scopeId","data-v-793e8aa2"]]),DateRangerPickerComponent:E,UploadHttpComponent:t},props:{isModal:{type:Boolean,default:!1}},data:()=>({total:0,searchParams:{keyword:"",sdt:"",edt:"",sortOrder:"",sortColumn:"",lx:"五级风险"},tableData:[],isAutoWrap:!1,year:C().format("YYYY")}),watch:{"searchParams.lx":{handler(e){"周管控"!==e&&this.resetParams()},immediate:!1}},computed:{tableHeaderList(){return"五级风险"==this.searchParams.lx?[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"dwfxmc",title:"风险名称",minWidth:200,fixed:"left",titleSuffix:{content:"开始时间和结束时间需要以（01.12-01.18）跟在风险名称之后，年份默认当前年。"},editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none",placeholder:"南京地区汊河变220千伏副母线压变停役（01.12-01.18）"}}},{field:"gznr",title:"工作内容",minWidth:280,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"jyhfxms",title:"风险描述（压降后）",minWidth:280,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"bdsb",title:"保电设备",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dwfxgkcs",title:"电网风险管控措施",minWidth:280,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"jgfh",title:"减供负荷（万千瓦）",width:120,headerAlign:"center",align:"right",sortable:!0,editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"fdcjcl",title:"发电厂减出力(万千瓦)",width:120,headerAlign:"center",align:"right",sortable:!0,editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"fqqk",title:"分区缺口(万千瓦)",width:120,sortable:!0,headerAlign:"center",align:"right",editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"zyyh",title:"重要用户",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]:[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"dwfxmc",title:"电网风险名称",minWidth:130,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dyaqsj",title:"对应安全事件",minWidth:220,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"zyyh",title:"重要用户",minWidth:130,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"bdsb",title:"保电设备",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"kssj",title:"电网风险或作业风险开始时间",width:150,sortable:!0,editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"jssj",title:"电网风险或作业风险结束时间",width:150,sortable:!0,editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"fxdj",title:"电网、作业风险等级",width:120,editRender:{name:"ElSelect",options:this.$store.state.staticOptionsObj.yjjb,props:{clearable:!0}}},{field:"jhsqdw",title:"计划申请单位",minWidth:130,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"zy",title:"专业",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"gznr",title:"工作内容",minWidth:220,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"zybmyj",title:"专业部门意见",minWidth:220,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},tableDetailHeaderList(){return[{field:"dwfxmc",title:"电网风险名称",width:"50%",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"zyyh",title:"重要用户",width:"50%",itemClass:"borderRight",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dyaqsj",title:"对应安全事件",width:"100%",itemClass:"whole_row borderRight",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"zy",title:"专业",width:"50%",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"bdsb",title:"保电设备",width:"50%",itemClass:"borderRight",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"kssj",title:"电网风险或作业风险开始时间",width:"50%",editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"jssj",title:"电网风险或作业风险结束时间",width:"50%",itemClass:"borderRight",editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"fxdj",title:"电网、作业风险等级",width:"50%",editRender:{name:"ElSelect",options:this.$store.state.staticOptionsObj.yjjb,props:{clearable:!0}}},{field:"jhsqdw",title:"计划申请单位",width:"50%",itemClass:"borderRight",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"gznr",title:"工作内容",width:"100%",itemClass:"whole_row borderRight",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"zybmyj",title:"专业部门意见",width:"100%",itemClass:"whole_row borderRight borderBottom",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}}]},editRules:()=>({dwfxmc:[{required:!0,message:"电网风险名称不能为空"},{validator({cellValue:e,row:t}){if(e&&!t.id&&"五级风险"===t.fxdj&&!e.includes("(")&&!e.includes(")")&&!e.includes("（")&&!e.includes("）"))return new Error("五级风险新增数据必须含有括号")}}],zyyh:[{required:!0,message:"重要用户不能为空"}],zy:[{required:!0,message:"专业事件不能为空"}],dyaqsj:[{required:!0,message:"对应安全事件不能为空"}],bdsb:[{required:!0,message:"保电设备不能为空"}],kssj:[{required:!0,message:"电网风险或作业风险开始时间不能为空"},a.date.rule,{validator({cellValue:e,row:t}){if(e&&t.jssj&&C(e).isAfter(t.jssj))return new Error("开始时间必须在结束时间之前")}}],jssj:[{required:!0,message:"电网风险或作业风险结束时间不能为空"},a.date.rule,{validator({cellValue:e,row:t}){if(e&&t.kssj&&C(e).isBefore(t.kssj))return new Error("结束时间必须在开始时间之后")}}],fxdj:[{required:!0,message:"电网、作业风险等级不能为空"}],jhsqdw:[{required:!0,message:"计划申请单位不能为空"}],gznr:[{required:!0,message:"工作内容不能为空"}],zybmyj:[{required:!0,message:"专业部门意见不能为空"}]}),gridOptions(){return{height:"auto",border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,keepSource:!0,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,editConfig:{trigger:"click",mode:"cell",showStatus:!this.isModal,showIcon:!this.isModal,beforeEditMethod:this.beforeEditMethod},proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"周风险预警表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},menuConfig:{enabled:!this.isModal,body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons(){return this.isModal?[{type:"gradientGreen",name:"查询"}]:[{type:"gradientGreen",name:"查询"},{type:"gradientGreen",name:"自动换行"}]},defaultRightButtons(){return this.isModal?[{type:"gradientBlue",name:"确定"}]:"五级风险"==this.searchParams.lx?[{type:"gradientBlue",name:"导入"},{type:"gradientBlue",name:"下载导入模版"},{type:"gradientBlue",name:"初始化"},{type:"gradientBlue",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]:[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientBlue",name:"初始化"},{type:"gradientBlue",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]}},created(){this.isModal?(this.time=[C().startOf("month").format("YYYY-MM-DD"),C().endOf("month").format("YYYY-MM-DD")],this.searchParams.flag="1"):(this.searchParams.sdt="",this.searchParams.edt="")},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise(t=>{S.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},doAdd(){let e={fxdj:this.searchParams.lx};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doInit(){this.$vxeModal.show(R,{isModal:!0},{width:window.innerWidth-200,title:"月度风险预警选择",height:window.innerHeight-100},{doSubmit:e=>{S.initTableDataService({data:e}).then(e=>{this.$message.success(e.data),this.$vxeModal.closeAll(),this.loadTableData()})}})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];S.saveTableDataService({data:r}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");S.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doViewLog(e){S.loadViewDialogService({id:e.id}).then(e=>{this.$vxeModal.show(P,{tableHeaderList:[{type:"seq",width:60},{field:"czr",title:"操作人",width:"100"},{field:"time",title:"操作时间",width:"150"},{field:"nr",title:"内容"}],tableData:e.data},{width:800,title:"日志",height:600},{})})},downloadModule(){"五级风险"==this.searchParams.lx?o.exportFileService("/fxyj/download-zfxyj-tpl-new",{}):o.exportFileService("/fxyj/download-zfxyj-tpl",{})},doImport(){this.$vxeModal.show(M,{formComponent:["year"],defaultValue:{year:this.year}},{width:350,height:170,title:"选择年",resize:!1},{submit:e=>{this.year=e.year,this.$refs.uploadComponentRef.selectEvent()}})},doExport(e){let t=JSON.parse(JSON.stringify(this.searchParams));"五级风险"==this.searchParams.lx?o.exportFileService("/fxyj/exportZFxyjNew",t,e,this.pagerParam):o.exportFileService("/fxyj/exportZFxyj",t,e,this.pagerParam)},cellDblclick(e){let{row:t}=e;this.openDetail(t)},cellClick(e){let{row:t,column:a}=e;"tdcs"==a.field&&this.selectCs(t,a),"tdsb"==a.field&&this.selectSb(t,a)},doConfirm(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认初始化勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$emit("doSubmit",e)})},resetParams(){this.isModal?(this.time=[C().startOf("month").format("YYYY-MM-DD"),C().endOf("month").format("YYYY-MM-DD")],this.searchParams.flag="1"):(this.searchParams.sdt="",this.searchParams.edt=""),this.searchParams.keyword="",this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.$nextTick(function(){this.loadTableData()})},beforeEditMethod({row:e,column:t}){return!this.isModal}}},q={class:"page_content"},F={style:{"padding-bottom":"0"}},V={key:0},L={class:"header-item"},$={class:"header-item"},N={key:0,class:"header-item"},U={class:"header-item"},Z={key:2};const H=s(O,[["render",function(e,t,a,i,l,r){const s=d("el-button"),o=d("el-button-group"),C=d("DateRangerPickerComponent"),D=d("el-input"),R=d("arrow-down"),P=d("el-icon"),z=d("el-dropdown-item"),E=d("el-dropdown-menu"),M=d("el-dropdown"),Y=d("upload-http-component"),S=d("zfxgk"),_=d("vxe-button"),A=d("vxe-grid");return n(),h("div",q,[m("header",F,[c(o,null,{default:u(()=>[c(s,{type:"五级风险"===l.searchParams.lx?"gradientBlue":"",onClick:t[0]||(t[0]=e=>l.searchParams.lx="五级风险")},{default:u(()=>[...t[9]||(t[9]=[p("五级风险",-1)])]),_:1},8,["type"]),c(s,{type:""===l.searchParams.lx?"gradientBlue":"",onClick:t[1]||(t[1]=e=>l.searchParams.lx="")},{default:u(()=>[...t[10]||(t[10]=[p("六级风险",-1)])]),_:1},8,["type"]),c(s,{type:"周管控"===l.searchParams.lx?"gradientBlue":"",onClick:t[2]||(t[2]=e=>l.searchParams.lx="周管控")},{default:u(()=>[...t[11]||(t[11]=[p("周风险管控",-1)])]),_:1},8,["type"])]),_:1})]),"周管控"!==l.searchParams.lx?(n(),h("header",V,[m("section",null,[c(C,{"start-time":l.searchParams.sdt,"end-time":l.searchParams.edt,updateStartTime:l.searchParams.sdt,"onUpdate:updateStartTime":t[3]||(t[3]=e=>l.searchParams.sdt=e),updateEndTime:l.searchParams.edt,"onUpdate:updateEndTime":t[4]||(t[4]=e=>l.searchParams.edt=e)},null,8,["start-time","end-time","updateStartTime","updateEndTime"]),m("div",L,[c(D,{placeholder:"请输入停电设备",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[5]||(t[5]=e=>l.searchParams.keyword=e),onKeydown:w(r.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),m("div",$,[(n(!0),h(f,null,g(r.defaultLeftButtons,(t,a)=>(n(),x(s,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:u(()=>[p(y(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),a.isModal?v("",!0):(n(),h("div",N,[c(M,null,{dropdown:u(()=>[c(E,null,{default:u(()=>[c(z,{onClick:r.doExport},{default:u(()=>[...t[13]||(t[13]=[p("导出当前页",-1)])]),_:1},8,["onClick"]),c(z,{onClick:t[6]||(t[6]=e=>r.doExport(!0))},{default:u(()=>[...t[14]||(t[14]=[p("导出全部",-1)])]),_:1})]),_:1})]),default:u(()=>[c(s,{type:"gradientGreen"},{default:u(()=>[t[12]||(t[12]=p(" 导出",-1)),c(P,{class:"el-icon--right"},{default:u(()=>[c(R)]),_:1})]),_:1})]),_:1})]))]),m("section",null,[m("div",{class:"header-item",style:k("五级风险"===l.searchParams.lx?{display:"none"}:{})},[c(Y,{ref:"uploadComponentRef","prop-upload-url":"五级风险"===l.searchParams.lx?"/fxyj/import-new-zfxyj":"/fxyj/import-zfxyj","prop-upload-param":"五级风险"===l.searchParams.lx?{year:l.year}:{},onLoadTableData:t[7]||(t[7]=e=>r.loadTableData(!0))},null,8,["prop-upload-url","prop-upload-param"])],4),m("div",U,[(n(!0),h(f,null,g(r.defaultRightButtons,(t,a)=>(n(),x(s,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:u(()=>[p(y(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])])):v("",!0),"周管控"===l.searchParams.lx?(n(),x(S,{key:1,style:{height:"calc(100% - 48px)"}})):(n(),h("article",Z,[c(A,b(r.gridOptions,{ref:"xTable"},j({cellClick:r.cellClick}),{onMenuClick:t[8]||(t[8]=t=>e.menuClickEvent(t,"风险预警"))}),{action:u(({row:e})=>[e.id?(n(),x(_,{key:0,mode:"text",status:"primary",onClick:t=>r.doViewLog(e)},{default:u(()=>[...t[15]||(t[15]=[p("日志",-1)])]),_:1},8,["onClick"])):v("",!0)]),_:1},16)]))])}],["__scopeId","data-v-4155ba4c"]]);export{H as default};
