!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function t(t){for(var i=1;i<arguments.length;i++){var l=null!=arguments[i]?arguments[i]:{};i%2?e(Object(l),!0).forEach(function(e){a(t,e,l[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))})}return t}function a(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}System.register(["./table_mixin-legacy-a2qRsxfo.js","./UploadHttpComponent-legacy-C2pizi70.js","./index-legacy-BVk_Mtvn.js","./polyfill-legacy-aWkUxw0k.js"],function(e,a){"use strict";var i,l,r,o,s,n,d,h,p,c,u,m,g,f,b,x,y,w,v,k,C,T;return{setters:[e=>{i=e.t},e=>{l=e.U},e=>{r=e.z,o=e.A,s=e._,n=e.r,d=e.o,h=e.c,p=e.d,c=e.w,u=e.h,m=e.e,g=e.i,f=e.v,b=e.D,x=e.b,y=e.F,w=e.q,v=e.f,k=e.t,C=e.a7,T=e.cC},null],execute:function(){let a=o.base;const R={loadTableDataService:e=>r({url:`${a}/xltg/getPageData`,method:"post",data:e,showLoading:!0}),loadVersionDataService:e=>r({url:`${a}/xltg/getVersion`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>r({url:`${a}/xltg/save`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>r({url:`${a}/xltg/delete`,method:"post",data:e,showLoading:!0}),loadDialogDataService:e=>r({url:`${a}/first/queryCyzlLog`,method:"post",data:e,showLoading:!0}),saveDialogDataService:(e,t)=>r({url:`${a}${t}`,method:"post",data:e,showLoading:!0})},D={class:"page_content"};const P=s({name:"cyzl_dialog",props:{row:Object,version:String,saveUrl:String,headerList:Array},computed:{xglFilters(){return this.headerList.map(e=>({label:e.title,value:e.title}))},tableHeaderList(){return[{type:"seq",width:60,fixed:"left"},{field:"xglName",title:"修改列",filters:this.xglFilters},{field:"xgq",title:"修改前值"},{field:"xgh",title:"修改后值"},{field:"createTime",title:"修改时间",sortable:!0},{field:"czr",title:"修改人",sortable:!0},{title:"操作",width:150,fixed:"right",slots:{default:"action"}}]},gridOptions(){return{height:"auto",border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},showOverflow:!1,headerCellClassName:"row-class",virtualYConfig:{enabled:!0,gt:0},proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:()=>this.loadTableApi()}},columns:this.tableHeaderList}}},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(){return new Promise(e=>{R.loadDialogDataService({id:this.row.id,version:this.version}).then(t=>{e(t.data)})})},doReback(e,t){let a=JSON.parse(JSON.stringify(this.row));a[e.xgl]=e[t],R.saveDialogDataService([a],this.saveUrl).then(e=>{this.$message.success(e.data)})}}},[["render",function(e,t,a,i,l,r){const o=n("vxe-button"),s=n("vxe-grid");return d(),h("div",D,[p(s,f(r.gridOptions,{ref:"xTable"}),{action:c(({row:e,rowIndex:a})=>[p(o,{mode:"text",status:"primary",onClick:t=>r.doReback(e,"xgq")},{default:c(()=>[...t[0]||(t[0]=[u("回退修改前",-1)])]),_:1},8,["onClick"]),a?(d(),m(o,{key:0,mode:"text",status:"primary",onClick:t=>r.doReback(e,"xgh")},{default:c(()=>[...t[1]||(t[1]=[u("回退修改后",-1)])]),_:1},8,["onClick"])):g("",!0)]),_:1},16)])}]]),A={class:"page_content"},E={class:"header-item"},S={class:"header-item"},L={class:"header-item"},z={class:"header-item"},$={class:"header-item"},_={class:"header-item"};const O=s({name:"xltg",mixins:[i],components:{UploadHttpComponent:l},data:()=>({time:["",""],total:0,versionOptions:[],searchParams:{keyword:"",version:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1},"searchParams.version":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"xlmc",title:"线路名称",minWidth:120,fixed:"left",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"szss",title:"所在省市",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"xlcd",title:"线路长度",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",3],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"gtjs",title:"杆塔基数",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"isTg",title:"是否存在同杆",width:100,editRender:{name:"ElSelect",options:[{label:"是",value:"是"},{label:"否",value:"否"}],props:{clearable:!0}}},{field:"is3tgOrMore",title:"是否存在3线及以上同杆",width:110,editRender:{name:"ElSelect",options:[{label:"是",value:"是"},{label:"否",value:"否"}],props:{clearable:!0}}},{field:"tgxlmc",title:"同杆线路名称",width:150,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"tghs",title:"同杆回数",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"tgtjs",title:"同杆塔基数",width:140,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"tgbl",title:"同杆比例%",width:120,headerAlign:"center",align:"right",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"tgxh",title:"同杆序号",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dxxh",title:"导线型号",minWidth:150,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"bz",title:"备注",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"ywdw",title:"运维单位",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"banz",title:"班组",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"线路同杆情况表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){this.getVersionOptions()},mounted(){},methods:{getVersionOptions(){R.loadVersionDataService().then(e=>{this.versionOptions=e.data,this.versionOptions.length>0&&(this.searchParams.version=this.versionOptions[0].value)})},refreshData(){this.getVersionOptions()},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{R.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={version:this.searchParams.version};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];R.saveTableDataService(r).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");R.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){b.exportFileService("/xltg/export",{exportType:"模板"})},doExport(e){b.exportFileService("/xltg/export",t({exportType:"数据"},this.searchParams),e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(P,{row:e,version:this.searchParams.version,headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/xltg/saveNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,r){const o=n("el-option"),s=n("el-select"),b=n("el-input"),C=n("el-button"),T=n("arrow-down"),R=n("el-icon"),D=n("el-dropdown-item"),P=n("el-dropdown-menu"),O=n("el-dropdown"),I=n("upload-http-component"),W=n("vxe-button"),B=n("vxe-grid");return d(),h("div",A,[x("header",null,[x("section",null,[x("div",E,[t[4]||(t[4]=u(" 版本号： ",-1)),p(s,{modelValue:l.searchParams.version,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.version=e),placeholder:"请选择",filterable:""},{default:c(()=>[(d(!0),h(y,null,w(l.versionOptions,e=>(d(),m(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),x("div",S,[p(b,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchParams.keyword=e),onKeydown:v(r.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),x("div",L,[(d(!0),h(y,null,w(r.defaultLeftButtons,(t,a)=>(d(),m(C,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),x("div",z,[p(O,null,{dropdown:c(()=>[p(P,null,{default:c(()=>[p(D,{onClick:r.doExport},{default:c(()=>[...t[6]||(t[6]=[u("导出当前页",-1)])]),_:1},8,["onClick"]),p(D,{onClick:t[2]||(t[2]=e=>r.doExport(!0))},{default:c(()=>[...t[7]||(t[7]=[u("导出全部",-1)])]),_:1})]),_:1})]),default:c(()=>[p(C,{type:"gradientGreen"},{default:c(()=>[t[5]||(t[5]=u(" 导出",-1)),p(R,{class:"el-icon--right"},{default:c(()=>[p(T)]),_:1})]),_:1})]),_:1})])]),x("section",null,[x("div",$,[p(I,{"prop-upload-url":"/xltg/importData",onLoadTableData:r.refreshData},null,8,["onLoadTableData"])]),x("div",_,[(d(!0),h(y,null,w(r.defaultRightButtons,(t,a)=>(d(),m(C,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),x("article",null,[p(B,f(r.gridOptions,{ref:"xTable",onMenuClick:t[3]||(t[3]=t=>e.menuClickEvent(t,"常用资料"))}),{action:c(({row:e})=>[e.id?(d(),m(W,{key:0,mode:"text",status:"primary",onClick:t=>r.doViewLog(e)},{default:c(()=>[...t[8]||(t[8]=[u("日志",-1)])]),_:1},8,["onClick"])):g("",!0)]),_:1},16)])])}],["__scopeId","data-v-ec60dd06"]]);let I=o.base;const W={loadTableDataService:e=>r({url:`${I}/khmd/getPageData`,method:"post",data:e,showLoading:!0}),loadVersionDataService:e=>r({url:`${I}/khmd/getVersion`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>r({url:`${I}/khmd/save`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>r({url:`${I}/khmd/delete`,method:"post",data:e,showLoading:!0})},B={class:"page_content"},M={class:"header-item"},V={class:"header-item"},N={class:"header-item"},j={class:"header-item"},q={class:"header-item"},G={class:"header-item"};const H=s({name:"zydlkhmd",mixins:[i],components:{UploadHttpComponent:l},data:()=>({time:["",""],total:0,versionOptions:[],searchParams:{keyword:"",version:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1},"searchParams.version":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50},{type:"seq",width:60},{field:"qx",title:"区县",width:80,editRender:{name:"ElSelect",options:this.$store.state.staticOptionsObj.qx,props:{clearable:!0}}},{field:"hh",title:"户号",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"hm",title:"户名",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"address",title:"地址",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"hy",title:"行业",width:110,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"zyxdj",title:"重要性等级",width:85,editRender:{name:"ElSelect",options:[{label:"一级",value:"一级"},{label:"二级",value:"二级"}],props:{clearable:!0}}},{field:"gddy",title:"供电电压（kV）",width:100,sortable:!0,editRender:{name:"ElSelect",options:this.$store.state.staticOptionsObj.bdzdydj.filter(e=>500!==e.value),props:{clearable:!0}}},{field:"yxrl",title:"运行容量（kVA）",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"gdfs",title:"供电方式",width:100,editRender:{name:"ElSelect",options:[{label:"双电源",value:"双电源"},{label:"多电源",value:"多电源"},{label:"双回路",value:"双回路"}],props:{clearable:!0}}},{field:"dy1",title:"第一路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy2",title:"第二路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy3",title:"第三路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy4",title:"第四路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy5",title:"第五路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy6",title:"第六路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy7",title:"第七路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy8",title:"第八路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"重要电力客户名单表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){this.getVersionOptions()},mounted(){},methods:{refreshData(){this.getVersionOptions()},getVersionOptions(){W.loadVersionDataService().then(e=>{this.versionOptions=e.data,this.versionOptions.length>0&&(this.searchParams.version=this.versionOptions[0].value)})},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{W.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={version:this.searchParams.version};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];W.saveTableDataService(r).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");W.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){b.exportFileService("/khmd/export",{exportType:"模板"})},doExport(e){b.exportFileService("/khmd/export",t({exportType:"数据"},this.searchParams),e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(P,{row:e,version:this.searchParams.version,headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/khmd/saveNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,r){const o=n("el-option"),s=n("el-select"),b=n("el-input"),C=n("el-button"),T=n("arrow-down"),R=n("el-icon"),D=n("el-dropdown-item"),P=n("el-dropdown-menu"),A=n("el-dropdown"),E=n("upload-http-component"),S=n("vxe-button"),L=n("vxe-grid");return d(),h("div",B,[x("header",null,[x("section",null,[x("div",M,[t[4]||(t[4]=u(" 版本号： ",-1)),p(s,{modelValue:l.searchParams.version,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.version=e),placeholder:"请选择",filterable:""},{default:c(()=>[(d(!0),h(y,null,w(l.versionOptions,e=>(d(),m(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),x("div",V,[p(b,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchParams.keyword=e),onKeydown:v(r.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),x("div",N,[(d(!0),h(y,null,w(r.defaultLeftButtons,(t,a)=>(d(),m(C,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),x("div",j,[p(A,null,{dropdown:c(()=>[p(P,null,{default:c(()=>[p(D,{onClick:r.doExport},{default:c(()=>[...t[6]||(t[6]=[u("导出当前页",-1)])]),_:1},8,["onClick"]),p(D,{onClick:t[2]||(t[2]=e=>r.doExport(!0))},{default:c(()=>[...t[7]||(t[7]=[u("导出全部",-1)])]),_:1})]),_:1})]),default:c(()=>[p(C,{type:"gradientGreen"},{default:c(()=>[t[5]||(t[5]=u(" 导出",-1)),p(R,{class:"el-icon--right"},{default:c(()=>[p(T)]),_:1})]),_:1})]),_:1})])]),x("section",null,[x("div",q,[p(E,{"prop-upload-url":"/khmd/importData",onLoadTableData:r.refreshData},null,8,["onLoadTableData"])]),x("div",G,[(d(!0),h(y,null,w(r.defaultRightButtons,(t,a)=>(d(),m(C,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),x("article",null,[p(L,f(r.gridOptions,{ref:"xTable",onMenuClick:t[3]||(t[3]=t=>e.menuClickEvent(t,"常用资料"))}),{action:c(({row:e})=>[e.id?(d(),m(S,{key:0,mode:"text",status:"primary",onClick:t=>r.doViewLog(e)},{default:c(()=>[...t[8]||(t[8]=[u("日志",-1)])]),_:1},8,["onClick"])):g("",!0)]),_:1},16)])])}],["__scopeId","data-v-646fb1b2"]]);let U=o.base;const F={loadTableDataService:e=>r({url:`${U}/first/queryXlzll`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>r({url:`${U}/first/saveXlzll`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>r({url:`${U}/first/deleteXlzll`,method:"post",data:e,showLoading:!0})},K={class:"page_content"},Z={class:"header-item"},X={class:"header-item"},J={class:"header-item"},Y={class:"header-item"},Q={class:"header-item"};const ee=s({name:"xlzllxe_new",mixins:[i],components:{UploadHttpComponent:l},data:()=>({time:["",""],total:0,searchParams:{keyword:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"ywdw",title:"运维单位",width:130,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"xlmc",title:"线路名称",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dxxh",title:"最小截面导线型号",width:150,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"线路正常载流能力（A）",children:[{field:"xlZc5",title:"5℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc10",title:"10℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc15",title:"15℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc20",title:"20℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc25",title:"25℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc30",title:"30℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc35",title:"35℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc40",title:"40℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}}]},{title:"线路事故后过负荷能力（A）",children:[{field:"xlSg5",title:"5℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg10",title:"10℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg15",title:"15℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg20",title:"20℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg25",title:"25℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg30",title:"30℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg35",title:"35℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg40",title:"40℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}}]},{title:"两侧间隔内变电设备限额（A）",children:[{field:"qi",title:"起",width:130,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"zhi",title:"止",width:130,editRender:{name:"ElInput",props:{clearable:!0}}}]},{field:"bz",title:"备注",minWidth:200,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!0,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"线路载流量限额表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){},mounted(){},methods:{refreshData(){this.getVersionOptions()},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{F.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){this.$refs.xTable.insertAt({}).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];F.saveTableDataService({data:r}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");F.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doExport(e){b.exportFileService("/first/exportXlzll",this.searchParams,e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(P,{row:e,version:"",headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/first/saveXlzllNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,r){const o=n("el-input"),s=n("el-button"),b=n("arrow-down"),C=n("el-icon"),T=n("el-dropdown-item"),R=n("el-dropdown-menu"),D=n("el-dropdown"),P=n("upload-http-component"),A=n("vxe-button"),E=n("vxe-grid");return d(),h("div",K,[x("header",null,[x("section",null,[x("div",Z,[p(o,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.keyword=e),onKeydown:v(r.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),x("div",X,[(d(!0),h(y,null,w(r.defaultLeftButtons,(t,a)=>(d(),m(s,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),x("div",J,[p(D,null,{dropdown:c(()=>[p(R,null,{default:c(()=>[p(T,{onClick:r.doExport},{default:c(()=>[...t[4]||(t[4]=[u("导出当前页",-1)])]),_:1},8,["onClick"]),p(T,{onClick:t[1]||(t[1]=e=>r.doExport(!0))},{default:c(()=>[...t[5]||(t[5]=[u("导出全部",-1)])]),_:1})]),_:1})]),default:c(()=>[p(s,{type:"gradientGreen"},{default:c(()=>[t[3]||(t[3]=u(" 导出",-1)),p(C,{class:"el-icon--right"},{default:c(()=>[p(b)]),_:1})]),_:1})]),_:1})])]),x("section",null,[x("div",Y,[p(P,{"prop-upload-url":"/first/importXlzll",onLoadTableData:r.refreshData},null,8,["onLoadTableData"])]),x("div",Q,[(d(!0),h(y,null,w(r.defaultRightButtons,(t,a)=>(d(),m(s,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),x("article",null,[p(E,f(r.gridOptions,{ref:"xTable",onMenuClick:t[2]||(t[2]=t=>e.menuClickEvent(t,"常用资料"))}),{action:c(({row:e})=>[e.id?(d(),m(A,{key:0,mode:"text",status:"primary",onClick:t=>r.doViewLog(e)},{default:c(()=>[...t[6]||(t[6]=[u("日志",-1)])]),_:1},8,["onClick"])):g("",!0)]),_:1},16)])])}],["__scopeId","data-v-14c984df"]]);let te=o.base;const ae={loadTableDataService:e=>r({url:`${te}/sbdGx/getPageData`,method:"post",data:e,showLoading:!0}),loadVersionDataService:e=>r({url:`${te}/sbdGx/getVersion`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>r({url:`${te}/sbdGx/save`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>r({url:`${te}/sbdGx/delete`,method:"post",data:e,showLoading:!0})},ie={class:"page_content"},le={class:"header-item"},re={class:"header-item"},oe={class:"header-item"},se={class:"header-item"},ne={class:"header-item"},de={class:"header-item"};const he=s({name:"xlsbdsbgxdw",mixins:[i],components:{UploadHttpComponent:l},data:()=>({time:["",""],total:0,versionOptions:[],searchParams:{keyword:"",version:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1},"searchParams.version":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50},{type:"seq",width:60},{field:"dydj",title:"电压等级（kV）",width:100,editRender:{name:"ElSelect",options:[{label:"220kV",value:"220kV"},{label:"110kV",value:"110kV"}],props:{clearable:!0}}},{field:"xlmc",title:"线路名称",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"gxdw",title:"管辖单位",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"type",title:"混合/架空/电缆",width:100,editRender:{name:"ElSelect",options:[{label:"混合",value:"混合"},{label:"架空",value:"架空"},{label:"电缆",value:"电缆"}],props:{clearable:!0}}},{field:"xlxz",title:"线路性质",width:100,editRender:{name:"ElSelect",options:[{label:"主线",value:"主线"},{label:"支线",value:"支线"}],props:{clearable:!0}}},{field:"qxfw",title:"全线范围",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"qxcd",title:"全线长度（km）",width:110,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",3],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"hfgd",title:"划分杆段",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"hfcd",title:"划分长度（km）",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"fjd",title:"分界点",minWidth:200,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"bz",title:"备注",minWidth:200,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"输变电设备管辖单位表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){this.getVersionOptions()},mounted(){},methods:{getVersionOptions(){ae.loadVersionDataService().then(e=>{this.versionOptions=e.data,this.versionOptions.length>0&&(this.searchParams.version=this.versionOptions[0].value)})},refreshData(){this.getVersionOptions()},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{ae.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={version:this.searchParams.version};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];ae.saveTableDataService(r).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");ae.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){b.exportFileService("/sbdGx/export",{exportType:"模板"})},doExport(e){b.exportFileService("/sbdGx/export",t({exportType:"数据"},this.searchParams),e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(P,{row:e,version:this.searchParams.version,headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/sbdGx/saveNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,r){const o=n("el-option"),s=n("el-select"),b=n("el-input"),C=n("el-button"),T=n("arrow-down"),R=n("el-icon"),D=n("el-dropdown-item"),P=n("el-dropdown-menu"),A=n("el-dropdown"),E=n("upload-http-component"),S=n("vxe-button"),L=n("vxe-grid");return d(),h("div",ie,[x("header",null,[x("section",null,[x("div",le,[t[4]||(t[4]=u(" 版本号： ",-1)),p(s,{modelValue:l.searchParams.version,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.version=e),placeholder:"请选择",filterable:""},{default:c(()=>[(d(!0),h(y,null,w(l.versionOptions,e=>(d(),m(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),x("div",re,[p(b,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchParams.keyword=e),onKeydown:v(r.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),x("div",oe,[(d(!0),h(y,null,w(r.defaultLeftButtons,(t,a)=>(d(),m(C,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),x("div",se,[p(A,null,{dropdown:c(()=>[p(P,null,{default:c(()=>[p(D,{onClick:r.doExport},{default:c(()=>[...t[6]||(t[6]=[u("导出当前页",-1)])]),_:1},8,["onClick"]),p(D,{onClick:t[2]||(t[2]=e=>r.doExport(!0))},{default:c(()=>[...t[7]||(t[7]=[u("导出全部",-1)])]),_:1})]),_:1})]),default:c(()=>[p(C,{type:"gradientGreen"},{default:c(()=>[t[5]||(t[5]=u(" 导出",-1)),p(R,{class:"el-icon--right"},{default:c(()=>[p(T)]),_:1})]),_:1})]),_:1})])]),x("section",null,[x("div",ne,[p(E,{"prop-upload-url":"/sbdGx/importData",onLoadTableData:r.refreshData},null,8,["onLoadTableData"])]),x("div",de,[(d(!0),h(y,null,w(r.defaultRightButtons,(t,a)=>(d(),m(C,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),x("article",null,[p(L,f(r.gridOptions,{ref:"xTable",onMenuClick:t[3]||(t[3]=t=>e.menuClickEvent(t,"常用资料"))}),{action:c(({row:e})=>[e.id?(d(),m(S,{key:0,mode:"text",status:"primary",onClick:t=>r.doViewLog(e)},{default:c(()=>[...t[8]||(t[8]=[u("日志",-1)])]),_:1},8,["onClick"])):g("",!0)]),_:1},16)])])}],["__scopeId","data-v-006c308d"]]);let pe=o.base;const ce={loadExcelDataService:e=>r({url:`${pe}/first/queryFileByGrzl`,method:"post",data:e,showLoading:!0}),loadTableDataService:e=>r({url:`${pe}/first/download-file-by-id`,method:"post",data:e,showLoading:!0}),exportGetIdByParamsService:e=>r({url:`${pe}/first/prepare-export-data`,method:"post",data:e,showLoading:!0})},ue={class:"page_content",id:"grcyzl"},me={class:"header-item"},ge={class:"header-item"},fe={class:"header-item"},be={class:"header-item"};const xe=s({name:"grcyzl",mixins:[i],components:{UploadHttpComponent:l},data:()=>({excelId:"",excelObj:{},excelOptions:[],tableHeaderList:[],tableData:[]}),watch:{excelId:{handler(e){e&&(this.excelObj=this.excelOptions.filter(t=>t.id===e)[0],this.loadTableData())},immediate:!1}},computed:{defaultLeftButtons:()=>[{type:"gradientRed",name:"删除"}],gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},toolbarConfig:{custom:!0,slots:{buttons:"toolbarButtons"}},customConfig:{allowVisible:!0,allowFixed:!1,allowResizable:!1,allowSort:!1},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",exportConfig:{filename:this.excelObj.fileName,sheetName:"sheet1",type:"xlsx",mode:"all",modes:["all"],message:!1,columns:this.tableHeaderList,exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},columns:this.tableHeaderList,data:this.tableData}}},created(){this.getExcelOptions()},methods:{getExcelOptions(){ce.loadExcelDataService({}).then(e=>{this.excelOptions=e.data,this.excelOptions.length>0&&(this.excelId=this.excelOptions[0].id)})},loadTableData(){ce.loadTableDataService({fileId:this.excelId}).then(e=>{this.tableHeaderList=e.data.headers,this.tableHeaderList.forEach(t=>{t.sortable=!0,t.minWidth=60,t.filterMultiple=!0;let a=Array.from(new Set(e.data.data.map(e=>e[t.field])));t.filters=a.filter(e=>e).map(e=>({label:e,value:e}))}),console.log(this.tableHeaderList),this.tableData=e.data.data})},doDelete(){this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b.removeFileService({fileId:this.excelId}).then(()=>{this.$message.success("删除成功"),this.getExcelOptions()})})},clearSortEvent(){this.$refs.xTable.clearSort()},clearFilterEvent(){this.$refs.xTable.clearFilter()},doExport(e){ce.exportGetIdByParamsService({headers:this.$refs.xTable.getTableColumn().tableColumn,data:this.$refs.xTable.getTableData().tableData}).then(t=>{b.exportFileService("/first/download-export-data",{id:t.data,name:this.excelObj.fileName},e,this.pagerParam)})}}},[["render",function(e,t,a,i,l,r){const o=n("el-option"),s=n("el-select"),g=n("el-button"),b=n("upload-http-component"),v=n("vxe-grid");return d(),h("div",ue,[x("article",null,[p(v,f(r.gridOptions,{ref:"xTable"}),{toolbarButtons:c(()=>[x("header",null,[x("div",me,[p(s,{modelValue:l.excelId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.excelId=e),placeholder:"请选择",filterable:"",style:{width:"300px"}},{default:c(()=>[(d(!0),h(y,null,w(l.excelOptions,e=>(d(),m(o,{key:e.id,label:e.fileName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),x("div",ge,[p(g,{type:"gradientGreen",onClick:r.clearSortEvent},{default:c(()=>[...t[1]||(t[1]=[u("重置排序",-1)])]),_:1},8,["onClick"]),p(g,{type:"gradientGreen",onClick:r.clearFilterEvent},{default:c(()=>[...t[2]||(t[2]=[u("重置筛选",-1)])]),_:1},8,["onClick"]),p(g,{type:"gradientGreen",onClick:r.doExport},{default:c(()=>[...t[3]||(t[3]=[u("导出",-1)])]),_:1},8,["onClick"])]),x("div",fe,[p(b,{"prop-upload-url":"/first/upload-file-execl","button-name":"上传",onLoadTableData:r.getExcelOptions},null,8,["onLoadTableData"])]),x("div",be,[(d(!0),h(y,null,w(r.defaultLeftButtons,(t,a)=>(d(),m(g,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),_:1},16)])])}],["__scopeId","data-v-569fd416"]]);let ye=o.base;const we={loadTableDataService:e=>r({url:`${ye}/first/queryBdzGxdw`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>r({url:`${ye}/first/saveBdzGxdw`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>r({url:`${ye}/first/deleteBdzGxdw`,method:"post",data:e,showLoading:!0})},ve={class:"page_content"},ke={class:"header-item"},Ce={class:"header-item"},Te={class:"header-item"},Re={class:"header-item"},De={class:"header-item"},Pe={class:"header-item"};const Ae=s({name:"bdzsbdsbgxdw",mixins:[i],components:{UploadHttpComponent:l},data:()=>({time:["",""],total:0,searchParams:{lx:"变电运维专业",keyword:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{"searchParams.lx":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50},{type:"seq",width:60},{field:"bdzmc",title:"变电站名称",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dydj",title:"电压等级",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"gxdw",title:"管辖单位",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"ywbz",title:"运维班组",visible:"变电运维专业"===this.searchParams.lx,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"ycjxbz",title:"一次检修班组",visible:"变电检修专业"===this.searchParams.lx,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"ecjxbz",title:"二次检修班组",visible:"变电检修专业"===this.searchParams.lx,editRender:{name:"ElInput",props:{clearable:!0}}}]},editRules:()=>({bdzmc:[{required:!0,message:"变电站名称不能为空"}],gxdw:[{required:!0,message:"管辖单位不能为空"}]}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!0,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"输变电设备管辖单位表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{we.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){this.$refs.xTable.insertAt({lx:this.searchParams.lx}).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];we.saveTableDataService({data:r}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");we.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doExport(e){b.exportFileService("/first/exportBdzGxdw",this.searchParams,e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0}},[["render",function(e,t,a,i,l,r){const o=n("el-button"),s=n("el-button-group"),g=n("el-input"),b=n("arrow-down"),C=n("el-icon"),T=n("el-dropdown-item"),R=n("el-dropdown-menu"),D=n("el-dropdown"),P=n("upload-http-component"),A=n("vxe-grid");return d(),h("div",ve,[x("header",null,[x("section",null,[x("div",ke,[p(s,null,{default:c(()=>[p(o,{type:"变电运维专业"===l.searchParams.lx?"gradientBlue":"",onClick:t[0]||(t[0]=e=>l.searchParams.lx="变电运维专业")},{default:c(()=>[...t[5]||(t[5]=[u("变电运维专业",-1)])]),_:1},8,["type"]),p(o,{type:"变电检修专业"===l.searchParams.lx?"gradientBlue":"",onClick:t[1]||(t[1]=e=>l.searchParams.lx="变电检修专业")},{default:c(()=>[...t[6]||(t[6]=[u("变电检修专业",-1)])]),_:1},8,["type"])]),_:1})]),x("div",Ce,[p(g,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[2]||(t[2]=e=>l.searchParams.keyword=e),onKeydown:v(r.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),x("div",Te,[(d(!0),h(y,null,w(r.defaultLeftButtons,(t,a)=>(d(),m(o,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),x("div",Re,[p(D,null,{dropdown:c(()=>[p(R,null,{default:c(()=>[p(T,{onClick:r.doExport},{default:c(()=>[...t[8]||(t[8]=[u("导出当前页",-1)])]),_:1},8,["onClick"]),p(T,{onClick:t[3]||(t[3]=e=>r.doExport(!0))},{default:c(()=>[...t[9]||(t[9]=[u("导出全部",-1)])]),_:1})]),_:1})]),default:c(()=>[p(o,{type:"gradientGreen"},{default:c(()=>[t[7]||(t[7]=u(" 导出",-1)),p(C,{class:"el-icon--right"},{default:c(()=>[p(b)]),_:1})]),_:1})]),_:1})])]),x("section",null,[x("div",De,[p(P,{"prop-upload-url":"/first/importBdzGxdw",onLoadTableData:r.loadTableData},null,8,["onLoadTableData"])]),x("div",Pe,[(d(!0),h(y,null,w(r.defaultRightButtons,(t,a)=>(d(),m(o,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[u(k(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),x("article",null,[p(A,f(r.gridOptions,{ref:"xTable",onMenuClick:t[4]||(t[4]=t=>e.menuClickEvent(t,"常用资料"))}),null,16)])])}],["__scopeId","data-v-72c14f9e"]]),Ee={class:"page_content"};e("default",s({name:"cyzl",components:{xltg:O,zydlkhmd:H,xlzllxe_new:ee,xlsbdsbgxdw:he,bdzsbdsbgxdw:Ae,grcyzl:xe},computed:{},data:()=>({active:{name:"线路同杆",url:"xltg"},buttonList:[{name:"线路同杆",url:"xltg"},{name:"线路载流量限额",url:"xlzllxe_new"},{name:"重要电力客户名单",url:"zydlkhmd"},{name:"线路输变电设备管辖单位",url:"xlsbdsbgxdw"},{name:"变电站输变电设备管辖单位",url:"bdzsbdsbgxdw"},{name:"个人常用资料",url:"grcyzl"}]})},[["render",function(e,t,a,i,l,r){const o=n("el-button"),s=n("el-button-group");return d(),h("div",Ee,[x("header",null,[x("section",null,[p(s,null,{default:c(()=>[(d(!0),h(y,null,w(l.buttonList,(e,t)=>(d(),m(o,{key:"buttonList"+t,onClick:t=>l.active=e,type:l.active.url==e.url?"gradientGreen":""},{default:c(()=>[u(k(e.name),1)]),_:2},1032,["onClick","type"]))),128))]),_:1})])]),x("article",null,[(d(),m(T,null,[(d(),m(C(l.active.url)))],1024))])])}],["__scopeId","data-v-cbf0864a"]]))}}})}();
