import{t as e}from"./table_mixin-JRUrQyo7.js";import{n as t}from"./ndfs-api-BHjurW6T.js";import{b as a,r,o as l,c as o,d as i,i as s,e as n,F as d,v as m,f as h,w as c,t as u,x as f,z as p,E as g}from"./index-lltYVhud.js";import"./polyfill-lGe4XDVY.js";const b={class:"page_content"},x={class:"header-item"},y={class:"header-item"},C={class:"header-item"},k={class:"header-item"};const w=a({name:"dwgm",mixins:[e],components:{},data:()=>({total:0,searchParams:{year:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{},computed:{tableHeaderList:()=>[{type:"seq",width:60},{field:"lx",title:"类型",minWidth:120},{field:"voltage500",title:"500千伏",minWidth:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0]},{field:"voltage220",title:"220千伏",minWidth:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0]},{field:"voltage110",title:"110千伏",minWidth:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0]},{field:"voltage35",title:"35千伏",minWidth:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0]}],gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t)}},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},exportConfig:{filename:"电网规模表格",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"}],defaultRightButtons:()=>[]},mounted(){this.searchParams.year=p().format("YYYY")},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,a,r){let l=this.getRealParams(this.searchParams,e,a,r);return new Promise(a=>{t.loadDwgmDataService(l).then(t=>{1e5==e.pageSize?(this.total=t.total,a(t.data)):(this.total=t.total,a({result:t.data,page:{total:t.total}}))})})},doExport(e){g.exportFileService("/ndfs/exportDwgm",this.searchParams,e,this.pagerParam)},resetParams(){this.searchParams.year=p().format("YYYY"),this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.$nextTick(function(){this.loadTableData()})}}},[["render",function(e,t,a,p,g,w){const v=r("el-date-picker"),P=r("el-button"),Y=r("arrow-down"),_=r("el-icon"),A=r("el-dropdown-item"),T=r("el-dropdown-menu"),D=r("el-dropdown"),E=r("vxe-grid");return l(),o("div",b,[i("header",null,[i("section",null,[i("div",x,[t[3]||(t[3]=s(" 年份： ",-1)),n(v,{modelValue:g.searchParams.year,"onUpdate:modelValue":t[0]||(t[0]=e=>g.searchParams.year=e),type:"year",format:"YYYY","value-format":"YYYY"},null,8,["modelValue"])]),i("div",y,[(l(!0),o(d,null,m(w.defaultLeftButtons,(t,a)=>(l(),h(P,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[s(u(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),i("div",C,[n(D,null,{dropdown:c(()=>[n(T,null,{default:c(()=>[n(A,{onClick:w.doExport},{default:c(()=>[...t[5]||(t[5]=[s("导出当前页",-1)])]),_:1},8,["onClick"]),n(A,{onClick:t[1]||(t[1]=e=>w.doExport(!0))},{default:c(()=>[...t[6]||(t[6]=[s("导出全部",-1)])]),_:1})]),_:1})]),default:c(()=>[n(P,{type:"gradientGreen"},{default:c(()=>[t[4]||(t[4]=s(" 导出",-1)),n(_,{class:"el-icon--right"},{default:c(()=>[n(Y)]),_:1})]),_:1})]),_:1})])]),i("section",null,[i("div",k,[(l(!0),o(d,null,m(w.defaultRightButtons,(t,a)=>(l(),h(P,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:c(()=>[s(u(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),i("article",null,[n(E,f(w.gridOptions,{ref:"xTable",onMenuClick:t[2]||(t[2]=t=>e.menuClickEvent(t,"年度方式"))}),null,16)])])}],["__scopeId","data-v-ddc913e5"]]);export{w as default};
