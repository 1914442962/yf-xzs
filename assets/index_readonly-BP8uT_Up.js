import{t as e}from"./table_mixin-Up91sngm.js";import{b as t,N as a,r as l,o as i,c as s,d as o,i as r,e as d,w as n,F as h,v as f,f as c,t as m,j as u,x as p,z as g,E as b,V as y}from"./index-3VtalNXz.js";import{x}from"./xwb-api-D_SlmOQU.js";import{v as w}from"./view_simple_table-DvzHaPqF.js";import"./polyfill-lGe4XDVY.js";const v={class:"page_content"},C={class:"header-item"},k={class:"header-item"},z={class:"header-item"},_={class:"header-item"},P={class:"header-item"},V={class:"header-item"};const Y=t({name:"xwb_readonly",components:{QuestionFilled:a},mixins:[e],data:()=>({time:["",""],total:0,searchParams:{bdzmcList:[],sfcyqs:!1,year:g().format("YYYY"),sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{"searchParams.sfcyqs":{handler(){this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"seq",width:60,fixed:"left"},{field:"bdzmc",title:"变电站名称",width:120},{field:"bdzdydj",title:"变电站电压等级（kV）",width:120,sortable:!0},{field:"llkg",title:"拉路开关",minWidth:200,filters:[{data:""}],filterRender:{name:"VxeInput"}},{field:"kgdydj",title:"开关电压等级（kV）",width:120,sortable:!0},{field:"fh",title:"负荷（万千瓦）",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",2],titleSuffix:{content:"表格值"}},{field:"ygFhz",title:"有功负荷值（万千瓦）",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",2],titleSuffix:{content:"D5000最大采样值"}},{field:"ssdwfq",title:"所属电网分区",width:130,filters:this.$store.state.selectOptionsObj.fq},{field:"zyfh",title:"主要负荷【用户名称】",minWidth:180,filters:[{data:""}],filterRender:{name:"VxeInput"}},{field:"ssxzqy",title:"所属行政区域",width:120,filters:this.$store.state.selectOptionsObj.xzqy},{field:"sz220bdz",title:"所在220千伏变电站",width:110},{field:"fhxz",title:"负荷性质",width:140},{field:"fd",title:"分档",width:100},{field:"bz",title:"备注",minWidth:180,headerAlign:"center",align:"left"},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},gridOptions(){return{height:"auto",border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:{...this.pagerConfig,pageSize:100,pageSizes:[20,50,100,200,300,500]},proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t)}},exportConfig:{filename:"序位表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},cellClassName:({row:e})=>e.ygFhz||0===e.ygFhz?null:"row-red",columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"}],defaultRightButtons:()=>[]},mounted(){},methods:{jumpKeydownEvent(e){y.globalEvents.hasKey(e.$event,y.GLOBAL_EVENT_KEYS.ENTER)&&this.$refs.xTable.setCurrentPageByEvent(e.$event,10)},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let l=this.getRealParams(this.searchParams,e,t,a);return new Promise(t=>{x.loadTableDataService(l).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doViewLog(e){x.loadViewDialogService({id:e.id}).then(e=>{this.$vxeModal.show(w,{tableHeaderList:[{type:"seq",width:60},{field:"czr",title:"操作人",width:"100"},{field:"time",title:"操作时间",width:"150"},{field:"nr",title:"内容"}],tableData:e.data},{width:800,title:"日志",height:600},{})})},doExport(e){b.exportFileService("/xwb/exportXwb",this.searchParams,e,this.pagerParam)},resetParams(){this.searchParams={bdzmcList:[],sfcyqs:!1,year:g().format("YYYY"),sortOrder:"",sortColumn:""},this.$nextTick(function(){this.loadTableData()})}}},[["render",function(e,t,a,g,b,y){const x=l("el-date-picker"),w=l("el-option"),Y=l("el-select"),q=l("QuestionFilled"),A=l("el-icon"),E=l("el-tooltip"),L=l("el-switch"),T=l("el-button"),j=l("arrow-down"),O=l("el-dropdown-item"),D=l("el-dropdown-menu"),S=l("el-dropdown"),$=l("vxe-button"),W=l("vxe-grid");return i(),s("div",v,[o("header",null,[o("section",null,[o("div",C,[t[5]||(t[5]=r(" 年： ",-1)),d(x,{modelValue:b.searchParams.year,"onUpdate:modelValue":t[0]||(t[0]=e=>b.searchParams.year=e),type:"year",format:"YYYY","value-format":"YYYY"},null,8,["modelValue"])]),o("div",k,[t[6]||(t[6]=r(" 变电站名称： ",-1)),d(Y,{modelValue:b.searchParams.bdzmcList,"onUpdate:modelValue":t[1]||(t[1]=e=>b.searchParams.bdzmcList=e),placeholder:"请选择",clearable:"",filterable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"","tag-type":"",style:{width:"180px"}},{default:n(()=>[(i(!0),s(h,null,f(this.$store.state.selectOptionsObj.bdz,e=>(i(),c(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",z,[d(E,{effect:"dark",content:"筛选没有有功负荷值的开关"},{default:n(()=>[d(A,{size:16},{default:n(()=>[d(q)]),_:1})]),_:1}),t[7]||(t[7]=r(" 是否采样缺失： ",-1)),d(L,{modelValue:b.searchParams.sfcyqs,"onUpdate:modelValue":t[2]||(t[2]=e=>b.searchParams.sfcyqs=e),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),o("div",_,[(i(!0),s(h,null,f(y.defaultLeftButtons,(t,a)=>(i(),c(T,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:n(()=>[r(m(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),o("div",P,[d(S,null,{dropdown:n(()=>[d(D,null,{default:n(()=>[d(O,{onClick:y.doExport},{default:n(()=>[...t[9]||(t[9]=[r("导出当前页",-1)])]),_:1},8,["onClick"]),d(O,{onClick:t[3]||(t[3]=e=>y.doExport(!0))},{default:n(()=>[...t[10]||(t[10]=[r("导出全部",-1)])]),_:1})]),_:1})]),default:n(()=>[d(T,{type:"gradientGreen"},{default:n(()=>[t[8]||(t[8]=r(" 导出",-1)),d(A,{class:"el-icon--right"},{default:n(()=>[d(j)]),_:1})]),_:1})]),_:1})])]),o("section",null,[o("div",V,[(i(!0),s(h,null,f(y.defaultRightButtons,(t,a)=>(i(),c(T,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:n(()=>[r(m(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),o("article",null,[d(W,p(y.gridOptions,{ref:"xTable",onMenuClick:t[4]||(t[4]=t=>e.menuClickEvent(t,"序位表"))}),{action:n(({row:e})=>[e.id?(i(),c($,{key:0,mode:"text",status:"primary",onClick:t=>y.doViewLog(e)},{default:n(()=>[...t[11]||(t[11]=[r("日志 ",-1)])]),_:1},8,["onClick"])):u("",!0)]),_:1},16)])])}],["__scopeId","data-v-0b5501ee"]]);export{Y as default};
