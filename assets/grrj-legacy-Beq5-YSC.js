System.register(["./table_mixin-legacy-D9U6ScmD.js","./view_simple_table-legacy-DItKRz9F.js","./index-legacy-BhBZRkTD.js","./polyfill-legacy-aWkUxw0k.js"],function(e,t){"use strict";var a,i,s,o,l,r,n,d,h,c,g,u,m,p,f,b;return{setters:[e=>{a=e.t,i=e.g},e=>{s=e.v},e=>{o=e.b,l=e.r,r=e.o,n=e.c,d=e.d,h=e.e,c=e.w,g=e.F,u=e.v,m=e.f,p=e.i,f=e.t,b=e.x},null],execute:function(){const t=new BroadcastChannel("YFZLQD-channel"),x={class:"page_content"},y={class:"header-item"};e("default",o({name:"db",mixins:[a],components:{},data:()=>({total:0,searchParams:{type:"",sortOrder:"",sortColumn:""},tabList:[],isAutoWrap:!1}),watch:{"searchParams.type":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList:()=>[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"userName",title:"标注人",width:180},{field:"createTime",title:"标注时间",width:180,sortable:!0},{field:"yy",title:"标注原因",minWidth:120,headerAlign:"center",align:"left"},{title:"操作",width:150,fixed:"right",slots:{default:"action"}}],gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,autoLoad:!1,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a)}},exportConfig:{filename:"测试表格",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},columns:this.tableHeaderList}}},mounted(){this.getTabList(),t.onmessage=e=>{"refresh_grrj"===e.data.type&&this.getTabList()}},unmounted(){t.onmessage=null,t.close()},methods:{getTabList(e){i.loadTabDataService({}).then(t=>{this.tabList=t.data,e?this.tabList.length>0&&this.loadTableData():this.tabList.length>0&&(this.searchParams.type=this.tabList[0].name)})},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let s=this.getRealParams(this.searchParams,e,t,a);return new Promise(t=>{i.loadTableDataService(s).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doViewLog(e){this.$vxeModal.show(s,{tableHeaderList:JSON.parse(e.headerList),tableData:JSON.parse(e.data)},{width:window.innerWidth-100,title:"详情",height:400},{})},doDelete(e){this.$confirm("确认移除当前数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{i.deleteDataService({ids:e.id}).then(e=>{this.$message.success(e.data),this.getTabList(!0)})})}}},[["render",function(e,t,a,i,s,o){const w=l("el-button"),C=l("el-button-group"),L=l("vxe-button"),T=l("vxe-grid");return r(),n("div",x,[d("header",null,[d("section",null,[d("div",y,[h(C,null,{default:c(()=>[(r(!0),n(g,null,u(s.tabList,(e,t)=>(r(),m(w,{key:"tabList"+t,onClick:t=>s.searchParams.type=e.name,type:s.searchParams.type==e.name?"gradientBlue":""},{default:c(()=>[p(f(e.name+"（"+e.total+"）"),1)]),_:2},1032,["onClick","type"]))),128))]),_:1})])]),t[0]||(t[0]=d("section",null,null,-1))]),d("article",null,[h(T,b(o.gridOptions,{ref:"xTable"}),{action:c(({row:e})=>[h(L,{mode:"text",status:"primary",onClick:t=>o.doViewLog(e)},{default:c(()=>[...t[1]||(t[1]=[p("详情",-1)])]),_:1},8,["onClick"]),h(L,{mode:"text",status:"error",onClick:t=>o.doDelete(e)},{default:c(()=>[...t[2]||(t[2]=[p("移除",-1)])]),_:1},8,["onClick"])]),_:1},16)])])}],["__scopeId","data-v-95c216a2"]]))}}});
