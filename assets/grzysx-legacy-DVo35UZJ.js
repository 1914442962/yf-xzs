!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function t(t){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?e(Object(s),!0).forEach(function(e){a(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function a(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}System.register(["./table_mixin-legacy-a2qRsxfo.js","./validateRules-legacy-Co865pER.js","./index-legacy-BVk_Mtvn.js","./polyfill-legacy-aWkUxw0k.js"],function(e,a){"use strict";var r,s,i,o,l,n,d,c,u,h,p,m,f,g,b,y,w,v,x;return{setters:[e=>{r=e.t},e=>{s=e.v},e=>{i=e.z,o=e.A,l=e._,n=e.r,d=e.o,c=e.c,u=e.b,h=e.d,p=e.f,m=e.F,f=e.q,g=e.e,b=e.w,y=e.h,w=e.t,v=e.v,x=e.D},null],execute:function(){let a=o.base;const P={loadTableDataService:e=>i({url:`${a}/zysx/queryZysx`,method:"post",data:e,showLoading:!0}),sendDataService:e=>i({url:`${a}/zysx/sendDb`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>i({url:`${a}/zysx/saveXysx`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>i({url:`${a}/zysx/deleteXysx`,method:"post",data:e,showLoading:!0})},D={class:"page_content"},k={class:"header-item"},C={class:"header-item"},T={class:"header-item"},j={class:"header-item"};e("default",l({name:"grzysx",mixins:[r],data:()=>({time:["",""],total:0,versionOptions:[],searchParams:{keyword:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50},{type:"seq",width:60},{field:"zt",title:"主题",width:250,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"gzbr",title:"工作内容",minWidth:250,align:"left",headerAlign:"center",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dqtxsj",title:"到期提醒时间",width:160,sortable:!0,editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"cjsj",title:"创建时间",width:150,sortable:!0},{field:"wcqk",title:"完成情况",width:110,editRender:{name:"ElSelect",options:[{label:"是",value:"是"},{label:"否",value:"否"}],props:{clearable:!0}}}]},editRules:()=>({zt:[{required:!0,message:"主题不能为空"}],gznr:[{required:!0,message:"工作内容不能为空"}],dqtxsj:[{required:!0,message:"到期提醒时间不能为空"},s.date.rule],wcqk:[{required:!0,message:"完成情况不能为空"}]}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"个人重要事项表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList,cellClassName:({row:e})=>e.sfbh?"row-red":null}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){},mounted(){this.sendDb()},methods:{sendDb(){P.sendDataService({})},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let r=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{P.loadTableDataService(r).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={version:this.searchParams.version};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:r,updateRecords:s}=e,i=[...r,...s];P.saveTableDataService({data:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let r=e.map(e=>e.id).join(",");P.doDelTableDataService({ids:r}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doExport(e){x.exportFileService("/zysx/exportXysx",t(t({},this.searchParams),{},{userName:this.$store.state.userInfo.sysUser.nickName,userId:this.$store.state.userInfo.sysUser.id}),e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.$nextTick(function(){this.loadTableData()})}}},[["render",function(e,t,a,r,s,i){const o=n("el-input"),l=n("el-button"),x=n("arrow-down"),P=n("el-icon"),O=n("el-dropdown-item"),S=n("el-dropdown-menu"),A=n("el-dropdown"),R=n("vxe-grid");return d(),c("div",D,[u("header",null,[u("section",null,[u("div",k,[h(o,{placeholder:"请输入关键字",modelValue:s.searchParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchParams.keyword=e),onKeydown:p(i.loadTableData,["enter"]),title:s.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),u("div",C,[(d(!0),c(m,null,f(i.defaultLeftButtons,(t,a)=>(d(),g(l,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:b(()=>[y(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),u("div",T,[h(A,null,{dropdown:b(()=>[h(S,null,{default:b(()=>[h(O,{onClick:i.doExport},{default:b(()=>[...t[4]||(t[4]=[y("导出当前页",-1)])]),_:1},8,["onClick"]),h(O,{onClick:t[1]||(t[1]=e=>i.doExport(!0))},{default:b(()=>[...t[5]||(t[5]=[y("导出全部",-1)])]),_:1})]),_:1})]),default:b(()=>[h(l,{type:"gradientGreen"},{default:b(()=>[t[3]||(t[3]=y(" 导出",-1)),h(P,{class:"el-icon--right"},{default:b(()=>[h(x)]),_:1})]),_:1})]),_:1})])]),u("section",null,[u("div",j,[(d(!0),c(m,null,f(i.defaultRightButtons,(t,a)=>(d(),g(l,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:b(()=>[y(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),u("article",null,[h(R,v(i.gridOptions,{ref:"xTable",onMenuClick:t[2]||(t[2]=t=>e.menuClickEvent(t,"个人重要事项"))}),null,16)])])}],["__scopeId","data-v-acb4f7f8"]]))}}})}();
