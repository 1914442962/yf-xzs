import{t as e}from"./table_mixin-Bm7KLuSQ.js";import{e as a}from"./table-example-api-CfyaxaSn.js";import{b as t,r as l,o as i,c as s,d as r,i as o,e as n,w as d,F as m,v as h,f as c,g as p,t as u,V as g}from"./index-0nalUVid.js";import{d as b}from"./dynamic_form-NBAtoJIc.js";import"./polyfill-lGe4XDVY.js";import"./view_file-nia3YLJy.js";import"./zcq-sb-dky-DEUWHwSD.js";const f={name:"table_example",mixins:[e],components:{UploadComponent:UploadComponent},data:()=>({total:0,time:["",""],searchParams:{keyword:"",sex:"",startTime:"",endTime:"",pageIndex:1,pageSize:50,sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1,sexOptions:[{label:"男",value:"男"},{label:"女",value:"女"}]}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1}},computed:{computedStartIndex(){return(this.searchParams.pageIndex-1)*this.searchParams.pageSize},validRules:()=>({ddmm:[{required:!0,message:"电厂名称不能为空"}],yqygl:[{required:!0,message:"已签约容量（功率）不能为空"}],yqydrl:[{required:!0,message:"已签约容量（电能量）不能为空"}],yqykssj:[{required:!0,message:"签约开始时间不能为空"}],yqyjssj:[{required:!0,message:"签约结束时间不能为空"}]}),tableHeaderList(){return[{field:"name",title:"名字",minWidth:120,editRender:{name:"ElInput",props:{type:"text"}}},{field:"sex",title:"性别",width:100,sortable:!0,editRender:{name:"ElSelect",options:this.sexOptions,props:{multiple:!0,clearable:!0}}},{field:"money",title:"金钱（元）",minWidth:120,align:"right",headerAlign:"center",formatter:["formatterNumber",2],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"birthday",title:"生日",width:150,editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}}]},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientGreen",name:"导出当前页"},{type:"gradientGreen",name:"导出全部"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientBlue",name:"新增"},{type:"gradientRed",name:"删除"}]},mounted(){this.loadTableData(!0)},methods:{loadTableData(e){e&&(this.searchParams.pageIndex=1),a.loadTableDataService(this.searchParams).then(e=>{this.total=e.total,this.tableData=e.data}).catch(()=>{this.tableData=[{id:1,name:"122",money:4e3}]})},resetParams(){this.searchParams.sex="",this.searchParams.keyword="",this.searchParams.pageIndex=1,this.searchParams.pageSize=100,this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.time=["",""],this.$nextTick(function(){this.loadTableData()})},async doAdd(){this.$vxeModal.show(b,{tableHeaderList:this.tableHeaderList,validateRules:this.validRules},{width:800,title:"详情",height:window.innerHeight-100},{doSubmit:e=>{console.log(e)}})},openDetail(e){console.log(e),this.$vxeModal.show(b,{tableHeaderList:this.tableHeaderList,validateRules:this.validRules,row:e},{width:800,title:"详情",height:window.innerHeight-100},{doSubmit:e=>{console.log(e),this.doRealSave([e])}})},doRealSave(e){this.$confirm("确认保存修改的数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.saveTableDataService({data:e}).then(e=>{this.$message.success(e.data),g.modal.close(),this.loadTableData(!0)})})},doDelete(e=[]){e||(e=this.$refs.xTable.getCheckboxRecords()),e&&0!=e.length?this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.removeCheckboxRow();let e=this.$refs.xTable.getRemoveRecords();if(e.length>0){let t=e.map(e=>e.id).join(",");a.doDelTableDataService({ids:t}).then(e=>{this.$message.success(e.data),this.loadTableData(!0)})}}):this.$message.warning("请选择一条数据")},doExport(){let e=JSON.parse(JSON.stringify(this.searchParams));delete e.pageSize,delete e.pageIndex,a.exportTableDataFileService(e,"导出模板")},downloadModule(){a.downloadModuleService()},cellClassName:({row:e,column:a})=>(console.log(e,a),""),handlePageChange({currentPage:e,pageSize:a}){this.searchParams.pageIndex=e,this.searchParams.pageSize=a,this.loadTableData()},cellDbClick(e){let{row:a}=e;this.openDetail(a)}}},x={class:"page_content"},y={class:"header-item"},v={class:"header-item"},w={class:"header-item"},D={class:"header-item"},P={class:"header-item"},k={class:"header-item"};const T=t(f,[["render",function(e,a,t,g,b,f){const T=l("el-date-picker"),C=l("el-option"),S=l("el-select"),R=l("el-input"),Y=l("el-button"),M=l("upload-http-component"),q=l("vxe-table-column"),I=l("vxe-table"),z=l("vxe-pager");return i(),s("div",x,[r("header",null,[r("section",null,[r("div",y,[a[4]||(a[4]=o(" 日期范围： ",-1)),n(T,{modelValue:b.time,"onUpdate:modelValue":a[0]||(a[0]=e=>b.time=e),type:"daterange",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),r("div",v,[a[5]||(a[5]=o(" 性别： ",-1)),n(S,{modelValue:b.searchParams.sex,"onUpdate:modelValue":a[1]||(a[1]=e=>b.searchParams.sex=e),placeholder:"请选择",clearable:"",filterable:""},{default:d(()=>[(i(!0),s(m,null,h(b.sexOptions,e=>(i(),c(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),r("div",w,[n(R,{placeholder:"请输入关键字",modelValue:b.searchParams.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>b.searchParams.keyword=e),onKeydown:p(f.loadTableData,["enter"]),title:b.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),r("div",D,[(i(!0),s(m,null,h(f.defaultLeftButtons,(a,t)=>(i(),c(Y,{type:a.type,plain:a.plain,key:t+"defaultLeftButtons",onClick:t=>e.btnClick(a)},{default:d(()=>[o(u(a.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])]),r("section",null,[r("div",P,[n(M,{"prop-upload-url":"",onLoadTableData:a[3]||(a[3]=e=>f.loadTableData(!0))})]),r("div",k,[(i(!0),s(m,null,h(f.defaultRightButtons,(a,t)=>(i(),c(Y,{type:a.type,plain:a.plain,key:t+"defaultRightButtons",onClick:t=>e.btnClick(a)},{default:d(()=>[o(u(a.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),r("article",null,[n(I,{ref:"xTable",data:b.tableData,align:"center","keep-source":"",height:"100%",border:"","show-overflow":!b.isAutoWrap,"seq-config":{startIndex:f.computedStartIndex},"radio-config":{highlight:!0},"checkbox-config":{highlight:!0},"row-config":{isCurrent:!0,isHover:!0},"column-config":{resizable:!0},"header-cell-class-name":"row-class","cell-class-name":f.cellClassName,"sort-config":{remote:!0},onSortChange:e.sortChangeEvent,onCellDblclick:f.cellDbClick,"edit-config":{},"export-config":{remote:!0,filename:"测试表格",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],exportMethod:e.exportMethod}},{default:d(()=>[n(q,{width:50,type:"checkbox"}),n(q,{width:60,type:"seq",title:"序号"}),(i(!0),s(m,null,h(f.tableHeaderList,(e,a)=>(i(),c(q,{field:e.field,title:e.title,key:a+"tableHeaderList",formatter:e.formatter,type:e.type,width:e.width,"min-width":e.minWidth,fixed:e.fixed,align:e.align,"header-align":e.headerAlign?e.headerAlign:"center",sortable:e.sortable,visible:e.visible,"edit-render":e.editRender},null,8,["field","title","formatter","type","width","min-width","fixed","align","header-align","sortable","visible","edit-render"]))),128))]),_:1},8,["data","show-overflow","seq-config","cell-class-name","onSortChange","onCellDblclick","export-config"])]),r("footer",null,[n(z,{"current-page":b.searchParams.pageIndex,"page-size":b.searchParams.pageSize,total:b.total,layouts:["Home","PrevPage","JumpNumber","NextPage","End","Sizes","FullJump","Total"],onPageChange:f.handlePageChange},null,8,["current-page","page-size","total","onPageChange"])])])}],["__scopeId","data-v-8a90ad0b"]]);export{T as default};
