!function(){function e(e,a,t,l,r,i,n){try{var s=e[i](n),o=s.value}catch(e){return void t(e)}s.done?a(o):Promise.resolve(o).then(l,r)}function a(a){return function(){var t=this,l=arguments;return new Promise(function(r,i){var n=a.apply(t,l);function s(a){e(n,r,i,s,o,"next",a)}function o(a){e(n,r,i,s,o,"throw",a)}s(void 0)})}}System.register(["./table_mixin-legacy-C5mAbtHk.js","./table-example-api-legacy-B1FEDDpB.js","./UploadHttpComponent-legacy-Dfbw6bMO.js","./validateRules-legacy-Co865pER.js","./index-legacy-mI3U0Sb2.js","./polyfill-legacy-aWkUxw0k.js"],function(e,t){"use strict";var l,r,i,n,s,o,d,c,m,h,u,p,g,f,b,x,y;return{setters:[e=>{l=e.t},e=>{r=e.e},e=>{i=e.U},e=>{n=e.v},e=>{s=e.b,o=e.r,d=e.o,c=e.c,m=e.d,h=e.i,u=e.e,p=e.w,g=e.F,f=e.v,b=e.f,x=e.g,y=e.t},null],execute:function(){const t={class:"page_content"},v={class:"header-item"},w={class:"header-item"},P={class:"header-item"},T={class:"header-item"},D={class:"header-item"},k={class:"header-item"};e("default",s({name:"table_example",mixins:[l],components:{UploadHttpComponent:i},data:()=>({total:0,time:["",""],searchParams:{keyword:"",sex:"",startTime:"",endTime:"",pageIndex:1,pageSize:50,sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1,sexOptions:[{label:"男",value:"男"},{label:"女",value:"女"}]}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1}},computed:{computedStartIndex(){return(this.searchParams.pageIndex-1)*this.searchParams.pageSize},validRules:()=>({name:[{required:!0,message:"名字不能为空"}],sex:[{required:!0,message:"性别不能为空"}],money:[{required:!0,message:"金钱（元）不能为空"},n.positive_number.rule],date:[{required:!0,message:"日期不能为空"},n.date.rule],phone:[{required:!0,validator:"ValidMobile"}]}),tableHeaderList(){return[{field:"name",title:"名字",minWidth:120,editRender:{name:"ElInput"}},{field:"sex",title:"性别",width:100,sortable:!0,editRender:{name:"ElSelect",options:this.sexOptions,props:{multiple:!0,clearable:!0}}},{field:"money",title:"金钱（元）",minWidth:120,align:"right",headerAlign:"center",formatter:["formatterNumber",2],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"birthday",title:"生日",width:150,editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"phone",title:"手机号",width:150,editRender:{name:"ElInput"}}]},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientDarkGreen",name:"刷新"},{type:"gradientGreen",name:"导出当前页"},{type:"gradientGreen",name:"导出全部"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientBlue",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},mounted(){this.loadTableData(!0)},methods:{loadTableData(e){e&&(this.searchParams.pageIndex=1),r.loadTableDataService(this.searchParams).then(e=>{this.total=e.total,this.tableData=e.data}).catch(()=>{this.tableData=[{id:1,name:"122",money:4e3}]})},resetParams(){this.searchParams.sex="",this.searchParams.keyword="",this.searchParams.pageIndex=1,this.searchParams.pageSize=100,this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.time=["",""],this.$nextTick(function(){this.loadTableData()})},doAdd(){var e=this;return a(function*(){let{row:a}=yield e.$refs.xTable.insertAt({});yield e.$refs.xTable.setEditCell(a,"")})()},doSave(){var e=this;return a(function*(){let a=[...e.$refs.xTable.getInsertRecords(),...e.$refs.xTable.getUpdateRecords()];if(!a||0==a.length)return void e.$message.warning("没有需要保存的数据");const t=yield e.$refs.xTable.validate(a);if(t)for(const l in t)t.hasOwnProperty(l)&&e.$message.error(`列：${t[l][0].column.title} 校验未通过`);else e.$confirm(`确认保存修改的${a.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r.saveTableDataService({data:a}).then(a=>{e.$message.success(a.data),e.loadTableData(!0)})})})()},doDelete(e=[]){e||(e=this.$refs.xTable.getCheckboxRecords()),e&&0!=e.length?this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.removeCheckboxRow();let e=this.$refs.xTable.getRemoveRecords();if(e.length>0){let a=e.map(e=>e.id).join(",");r.doDelTableDataService({ids:a}).then(e=>{this.$message.success(e.data),this.loadTableData(!0)})}}):this.$message.warning("请选择一条数据")},doExport(){let e=JSON.parse(JSON.stringify(this.searchParams));delete e.pageSize,delete e.pageIndex,r.exportTableDataFileService(e,"导出模板")},doExportLocal(e,a){this.$refs.xTable.openExport()},downloadModule(){r.downloadModuleService()},cellClassName:({row:e,column:a})=>"",beforeEditMethod:({row:e,column:a})=>!0,handlePageChange({currentPage:e,pageSize:a}){this.searchParams.pageIndex=e,this.searchParams.pageSize=a,this.loadTableData()}}},[["render",function(e,a,l,r,i,n){const s=o("el-date-picker"),C=o("el-option"),S=o("el-select"),$=o("el-input"),R=o("el-button"),I=o("upload-http-component"),M=o("vxe-table-column"),Y=o("vxe-table"),E=o("vxe-pager");return d(),c("div",t,[m("header",null,[m("section",null,[m("div",v,[a[4]||(a[4]=h(" 日期范围： ",-1)),u(s,{modelValue:i.time,"onUpdate:modelValue":a[0]||(a[0]=e=>i.time=e),type:"daterange",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),m("div",w,[a[5]||(a[5]=h(" 性别： ",-1)),u(S,{modelValue:i.searchParams.sex,"onUpdate:modelValue":a[1]||(a[1]=e=>i.searchParams.sex=e),placeholder:"请选择",clearable:"",filterable:""},{default:p(()=>[(d(!0),c(g,null,f(i.sexOptions,e=>(d(),b(C,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m("div",P,[u($,{placeholder:"请输入关键字",modelValue:i.searchParams.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>i.searchParams.keyword=e),onKeydown:x(n.loadTableData,["enter"]),title:i.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),m("div",T,[(d(!0),c(g,null,f(n.defaultLeftButtons,(a,t)=>(d(),b(R,{type:a.type,plain:a.plain,key:t+"defaultLeftButtons",onClick:t=>e.btnClick(a)},{default:p(()=>[h(y(a.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])]),m("section",null,[m("div",D,[u(I,{"prop-upload-url":"",onLoadTableData:a[3]||(a[3]=e=>n.loadTableData(!0))})]),m("div",k,[(d(!0),c(g,null,f(n.defaultRightButtons,(a,t)=>(d(),b(R,{type:a.type,plain:a.plain,key:t+"defaultRightButtons",onClick:t=>e.btnClick(a)},{default:p(()=>[h(y(a.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),m("article",null,[u(Y,{ref:"xTable",data:i.tableData,align:"center","keep-source":"",height:"100%",border:"","show-overflow":!i.isAutoWrap,"seq-config":{startIndex:n.computedStartIndex},"radio-config":{highlight:!0},"checkbox-config":{highlight:!0},"row-config":{isCurrent:!0,isHover:!0},"column-config":{resizable:!0},"header-cell-class-name":"row-class","cell-class-name":n.cellClassName,"sort-config":{remote:!0},onSortChange:e.sortChangeEvent,"edit-rules":n.validRules,"edit-config":{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:n.beforeEditMethod},"export-config":{remote:!0,filename:"测试表格",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],exportMethod:e.exportMethod}},{default:p(()=>[u(M,{width:50,type:"checkbox"}),u(M,{width:60,type:"seq",title:"序号"}),(d(!0),c(g,null,f(n.tableHeaderList,(e,a)=>(d(),b(M,{field:e.field,title:e.title,key:a+"tableHeaderList",formatter:e.formatter,type:e.type,width:e.width,"min-width":e.minWidth,fixed:e.fixed,align:e.align,"header-align":e.headerAlign?e.headerAlign:"center",sortable:e.sortable,visible:e.visible,"edit-render":e.editRender},null,8,["field","title","formatter","type","width","min-width","fixed","align","header-align","sortable","visible","edit-render"]))),128))]),_:1},8,["data","show-overflow","seq-config","cell-class-name","onSortChange","edit-rules","edit-config","export-config"])]),m("footer",null,[u(E,{"current-page":i.searchParams.pageIndex,"page-size":i.searchParams.pageSize,total:i.total,layouts:["Home","PrevPage","JumpNumber","NextPage","End","Sizes","FullJump","Total"],onPageChange:n.handlePageChange},null,8,["current-page","page-size","total","onPageChange"])])])}],["__scopeId","data-v-7c1db4b7"]]))}}})}();
