!function(){function e(e,t,a,l,i,s,r){try{var n=e[s](r),o=n.value}catch(e){return void a(e)}n.done?t(o):Promise.resolve(o).then(l,i)}System.register(["./table_mixin-legacy-CgAfMSCC.js","./jdpz-api-legacy-DPY_P3bP.js","./index-legacy-CW2Mof-g.js","./gzt-api-legacy-DkEK3yj4.js","./polyfill-legacy-aWkUxw0k.js"],function(t,a){"use strict";var l,i,s,r,n,o,d,c,h,u,m,p,g,f,b,x,k,y;return{setters:[e=>{l=e.t,i=e.v},e=>{s=e.j},e=>{r=e.b,n=e.r,o=e.o,d=e.c,c=e.d,h=e.i,u=e.e,m=e.w,p=e.F,g=e.v,f=e.f,b=e.t,x=e.x,k=e.s},e=>{y=e.g},null],execute:function(){const a={name:"jdpz",mixins:[l],data:()=>({time:["",""],total:0,searchParams:{mklx:"",pageIndex:0,pageSize:999},tableData:[],isAutoWrap:!1,treeData:[]}),watch:{"searchParams.mklx":{handler(e){e&&this.reloadTableData()},immediate:!1}},computed:{tableHeaderList:()=>[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{width:60,dragSort:!0,fixed:"left"},{field:"mklx",title:"模块名称",minWidth:120},{field:"byValue",title:"模块路径",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"mc",title:"节点名称",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"url",title:"节点跳转路径",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}}],editRules:()=>({byValue:[{required:!0,message:"模块路径不能为空"}],mc:[{required:!0,message:"节点名称不能为空"}],url:[{required:!0,message:"跳转路径不能为空"}]}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0,drag:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",proxyConfig:{autoLoad:!1,seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:()=>this.loadTableApi(),delete:({body:e})=>this.doDeleteApi(e.removeRecords)}},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){this.resetMklx()},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(){return new Promise((e,t)=>{s.loadTableDataService(this.searchParams).then(t=>{e(t.data)})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={mklx:this.searchParams.mklx,byValue:""};this.$refs.xTable.insertAt(e,-1).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){let e=this.$refs.xTable.getTableData().tableData;s.saveTableDataService({data:e}).then(e=>{this.$message.success(e.data),this.reloadTableData()})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let l=e.map(e=>e.id).join(",");s.doDelTableDataService({ids:l}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},resetMklx(){var t,a=this;return(t=function*(){yield k.dispatch("getSelectOptions"),a.$store.state.selectOptionsObj.jdpz.length>0&&(a.searchParams.mklx=a.$store.state.selectOptionsObj.jdpz[0].value)},function(){var a=this,l=arguments;return new Promise(function(i,s){var r=t.apply(a,l);function n(t){e(r,i,s,n,o,"next",t)}function o(t){e(r,i,s,n,o,"throw",t)}n(void 0)})})()},beforeEditMethod:({row:e,column:t})=>!0,doAddMk(){this.$vxeModal.show(i,{title:"请输入新增模块类型"},{width:420,title:"模块类型",height:260},{returnData:e=>{s.saveMkDataService({mklx:e}).then(e=>{this.$message.success(e.data),this.resetMklx()})}})},doDelMk(){this.$confirm(`确认删除${this.searchParams.mklx}模块吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{s.doDelMkDataService({mklx:this.searchParams.mklx}).then(e=>{this.$message.success(e.data),this.resetMklx()})})},loadTreeData(){y.loadTreeDataService({}).then(e=>{this.treeData=e.data})}}},v={class:"page_content"},D={class:"header-item"},w={class:"header-item"},C={class:"header-item"};t("default",r(a,[["render",function(e,t,a,l,i,s){const r=n("el-option"),k=n("el-select"),y=n("el-button"),T=n("vxe-grid");return o(),d("div",v,[c("header",null,[c("section",null,[c("div",D,[t[1]||(t[1]=h(" 模块类型： ",-1)),u(k,{modelValue:i.searchParams.mklx,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchParams.mklx=e),placeholder:"请选择",clearable:!1,filterable:""},{default:m(()=>[(o(!0),d(p,null,g(e.$store.state.selectOptionsObj.jdpz,e=>(o(),f(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),c("div",w,[(o(!0),d(p,null,g(s.defaultLeftButtons,(t,a)=>(o(),f(y,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:m(()=>[h(b(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])]),c("section",null,[c("div",C,[(o(!0),d(p,null,g(s.defaultRightButtons,(t,a)=>(o(),f(y,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:m(()=>[h(b(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128)),u(y,{type:"gradientBlue",onClick:s.doAddMk},{default:m(()=>[...t[2]||(t[2]=[h("新增模块",-1)])]),_:1},8,["onClick"]),u(y,{type:"gradientRed",onClick:s.doDelMk},{default:m(()=>[...t[3]||(t[3]=[h("删除模块",-1)])]),_:1},8,["onClick"])])])]),c("article",null,[u(T,x(s.gridOptions,{ref:"xTable"}),null,16)])])}],["__scopeId","data-v-36d72830"]]))}}})}();
