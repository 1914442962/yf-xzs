System.register(["./table_mixin-legacy-D9U6ScmD.js","./validateRules-legacy-Co865pER.js","./index-legacy-BhBZRkTD.js","./polyfill-legacy-aWkUxw0k.js"],function(e,t){"use strict";var a,i,s,l,r,o,n,d,h,c,u,m,p,g,f,b,y,x;return{setters:[e=>{a=e.t},e=>{i=e.v},e=>{s=e.A,l=e.B,r=e.b,o=e.r,n=e.o,d=e.c,h=e.d,c=e.e,u=e.g,m=e.F,p=e.v,g=e.f,f=e.w,b=e.i,y=e.t,x=e.x},null],execute:function(){let t=l.base;const v={loadTableDataService:e=>s({url:`${t}/fxyj/queryMessage`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>s({url:`${t}/fxyj/saveMessage`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>s({url:`${t}/fxyj/deleteMessage`,method:"post",data:e,showLoading:!0})},w={class:"page_content"},T={class:"header-item"},C={class:"header-item"},k={class:"header-item"};e("default",r({name:"grid_example",mixins:[a],data:()=>({time:["",""],total:0,searchParams:{keyword:""},tableData:[],isAutoWrap:!1}),watch:{},computed:{tableHeaderList:()=>[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"bmmc",title:"部门名称",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"jc",title:"简称",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"userName",title:"用户名",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"phone",title:"手机号",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}}],editRules:()=>({bmmc:[{required:!0,message:"部门名称不能为空"}],userName:[{required:!0,message:"用户名不能为空"}],phone:[i.cellphone.rule]}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{v.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){this.$refs.xTable.insertAt({}).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:s}=e,l=[...i,...s];v.saveTableDataService({data:l}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");v.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.time=["",""],this.$nextTick(function(){this.loadTableData()})}}},[["render",function(e,t,a,i,s,l){const r=o("el-input"),v=o("el-button"),R=o("vxe-grid");return n(),d("div",w,[h("header",null,[h("section",null,[h("div",T,[c(r,{placeholder:"请输入关键字",modelValue:s.searchParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchParams.keyword=e),onKeydown:u(l.loadTableData,["enter"]),title:s.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),h("div",C,[(n(!0),d(m,null,p(l.defaultLeftButtons,(t,a)=>(n(),g(v,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:f(()=>[b(y(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])]),h("section",null,[h("div",k,[(n(!0),d(m,null,p(l.defaultRightButtons,(t,a)=>(n(),g(v,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:f(()=>[b(y(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),h("article",null,[c(R,x(l.gridOptions,{ref:"xTable"}),null,16)])])}],["__scopeId","data-v-43862576"]]))}}});
