import{t as e}from"./table_mixin-Bm7KLuSQ.js";import{U as t}from"./UploadHttpComponent-nVBlbYdp.js";import{A as a,B as i,b as l,r,o,c as s,e as n,w as d,i as h,f as c,j as p,x as m,E as u,d as g,F as f,v as b,g as x,t as w,a7 as y,cD as v}from"./index-0nalUVid.js";import"./polyfill-lGe4XDVY.js";let k=i.base;const C={loadTableDataService:e=>a({url:"".concat(k,"/xltg/getPageData"),method:"post",data:e,showLoading:!0}),loadVersionDataService:e=>a({url:"".concat(k,"/xltg/getVersion"),method:"post",data:e,showLoading:!0}),saveTableDataService:e=>a({url:"".concat(k,"/xltg/save"),method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>a({url:"".concat(k,"/xltg/delete"),method:"post",data:e,showLoading:!0}),loadDialogDataService:e=>a({url:"".concat(k,"/first/queryCyzlLog"),method:"post",data:e,showLoading:!0}),saveDialogDataService:(e,t)=>a({url:"".concat(k).concat(t),method:"post",data:e,showLoading:!0})},T={class:"page_content"};const R=l({name:"cyzl_dialog",props:{row:Object,version:String,saveUrl:String,headerList:Array},computed:{xglFilters(){return this.headerList.map(e=>({label:e.title,value:e.title}))},tableHeaderList(){return[{type:"seq",width:60,fixed:"left"},{field:"xglName",title:"修改列",filters:this.xglFilters},{field:"xgq",title:"修改前值"},{field:"xgh",title:"修改后值"},{field:"createTime",title:"修改时间",sortable:!0},{field:"czr",title:"修改人",sortable:!0},{title:"操作",width:150,fixed:"right",slots:{default:"action"}}]},gridOptions(){return{height:"auto",border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},showOverflow:!1,headerCellClassName:"row-class",virtualYConfig:{enabled:!0,gt:0},proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:()=>this.loadTableApi()}},columns:this.tableHeaderList}}},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(){return new Promise(e=>{C.loadDialogDataService({id:this.row.id,version:this.version}).then(t=>{e(t.data)})})},doReback(e,t){let a=JSON.parse(JSON.stringify(this.row));a[e.xgl]=e[t],C.saveDialogDataService([a],this.saveUrl).then(e=>{this.$message.success(e.data)})}}},[["render",function(e,t,a,i,l,u){const g=r("vxe-button"),f=r("vxe-grid");return o(),s("div",T,[n(f,m(u.gridOptions,{ref:"xTable"}),{action:d(({row:e,rowIndex:a})=>[n(g,{mode:"text",status:"primary",onClick:t=>u.doReback(e,"xgq")},{default:d(()=>[...t[0]||(t[0]=[h("回退修改前",-1)])]),_:1},8,["onClick"]),a?(o(),c(g,{key:0,mode:"text",status:"primary",onClick:t=>u.doReback(e,"xgh")},{default:d(()=>[...t[1]||(t[1]=[h("回退修改后",-1)])]),_:1},8,["onClick"])):p("",!0)]),_:1},16)])}]]),D={class:"page_content"},A={class:"header-item"},P={class:"header-item"},E={class:"header-item"},S={class:"header-item"},L={class:"header-item"},z={class:"header-item"};const _=l({name:"xltg",mixins:[e],components:{UploadHttpComponent:t},data:()=>({time:["",""],total:0,versionOptions:[],searchParams:{keyword:"",version:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1},"searchParams.version":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"xlmc",title:"线路名称",minWidth:120,fixed:"left",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"szss",title:"所在省市",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"xlcd",title:"线路长度",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",3],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"gtjs",title:"杆塔基数",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"isTg",title:"是否存在同杆",width:100,editRender:{name:"ElSelect",options:[{label:"是",value:"是"},{label:"否",value:"否"}],props:{clearable:!0}}},{field:"is3tgOrMore",title:"是否存在3线及以上同杆",width:110,editRender:{name:"ElSelect",options:[{label:"是",value:"是"},{label:"否",value:"否"}],props:{clearable:!0}}},{field:"tgxlmc",title:"同杆线路名称",width:150,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"tghs",title:"同杆回数",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"tgtjs",title:"同杆塔基数",width:140,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"tgbl",title:"同杆比例%",width:120,headerAlign:"center",align:"right",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"tgxh",title:"同杆序号",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dxxh",title:"导线型号",minWidth:150,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"bz",title:"备注",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"ywdw",title:"运维单位",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"banz",title:"班组",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"线路同杆情况表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){this.getVersionOptions()},mounted(){},methods:{getVersionOptions(){C.loadVersionDataService().then(e=>{this.versionOptions=e.data,this.versionOptions.length>0&&(this.searchParams.version=this.versionOptions[0].value)})},refreshData(){this.getVersionOptions()},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{C.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={version:this.searchParams.version};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];C.saveTableDataService(r).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");C.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){u.exportFileService("/xltg/export",{exportType:"模板"})},doExport(e){u.exportFileService("/xltg/export",{exportType:"数据",...this.searchParams},e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(R,{row:e,version:this.searchParams.version,headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/xltg/saveNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,u){const y=r("el-option"),v=r("el-select"),k=r("el-input"),C=r("el-button"),T=r("arrow-down"),R=r("el-icon"),_=r("el-dropdown-item"),I=r("el-dropdown-menu"),W=r("el-dropdown"),O=r("upload-http-component"),B=r("vxe-button"),M=r("vxe-grid");return o(),s("div",D,[g("header",null,[g("section",null,[g("div",A,[t[4]||(t[4]=h(" 版本号： ",-1)),n(v,{modelValue:l.searchParams.version,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.version=e),placeholder:"请选择",filterable:""},{default:d(()=>[(o(!0),s(f,null,b(l.versionOptions,e=>(o(),c(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),g("div",P,[n(k,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchParams.keyword=e),onKeydown:x(u.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),g("div",E,[(o(!0),s(f,null,b(u.defaultLeftButtons,(t,a)=>(o(),c(C,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),g("div",S,[n(W,null,{dropdown:d(()=>[n(I,null,{default:d(()=>[n(_,{onClick:u.doExport},{default:d(()=>[...t[6]||(t[6]=[h("导出当前页",-1)])]),_:1},8,["onClick"]),n(_,{onClick:t[2]||(t[2]=e=>u.doExport(!0))},{default:d(()=>[...t[7]||(t[7]=[h("导出全部",-1)])]),_:1})]),_:1})]),default:d(()=>[n(C,{type:"gradientGreen"},{default:d(()=>[t[5]||(t[5]=h(" 导出",-1)),n(R,{class:"el-icon--right"},{default:d(()=>[n(T)]),_:1})]),_:1})]),_:1})])]),g("section",null,[g("div",L,[n(O,{"prop-upload-url":"/xltg/importData",onLoadTableData:u.refreshData},null,8,["onLoadTableData"])]),g("div",z,[(o(!0),s(f,null,b(u.defaultRightButtons,(t,a)=>(o(),c(C,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),g("article",null,[n(M,m(u.gridOptions,{ref:"xTable",onMenuClick:t[3]||(t[3]=t=>e.menuClickEvent(t,"常用资料"))}),{action:d(({row:e})=>[e.id?(o(),c(B,{key:0,mode:"text",status:"primary",onClick:t=>u.doViewLog(e)},{default:d(()=>[...t[8]||(t[8]=[h("日志",-1)])]),_:1},8,["onClick"])):p("",!0)]),_:1},16)])])}],["__scopeId","data-v-ec60dd06"]]);let I=i.base;const W={loadTableDataService:e=>a({url:"".concat(I,"/khmd/getPageData"),method:"post",data:e,showLoading:!0}),loadVersionDataService:e=>a({url:"".concat(I,"/khmd/getVersion"),method:"post",data:e,showLoading:!0}),saveTableDataService:e=>a({url:"".concat(I,"/khmd/save"),method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>a({url:"".concat(I,"/khmd/delete"),method:"post",data:e,showLoading:!0})},O={class:"page_content"},B={class:"header-item"},M={class:"header-item"},$={class:"header-item"},V={class:"header-item"},N={class:"header-item"},G={class:"header-item"};const q=l({name:"zydlkhmd",mixins:[e],components:{UploadHttpComponent:t},data:()=>({time:["",""],total:0,versionOptions:[],searchParams:{keyword:"",version:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1},"searchParams.version":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50},{type:"seq",width:60},{field:"qx",title:"区县",width:80,editRender:{name:"ElSelect",options:this.$store.state.staticOptionsObj.qx,props:{clearable:!0}}},{field:"hh",title:"户号",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"hm",title:"户名",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"address",title:"地址",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"hy",title:"行业",width:110,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"zyxdj",title:"重要性等级",width:85,editRender:{name:"ElSelect",options:[{label:"一级",value:"一级"},{label:"二级",value:"二级"}],props:{clearable:!0}}},{field:"gddy",title:"供电电压（kV）",width:100,sortable:!0,editRender:{name:"ElSelect",options:this.$store.state.staticOptionsObj.bdzdydj.filter(e=>500!==e.value),props:{clearable:!0}}},{field:"yxrl",title:"运行容量（kVA）",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"gdfs",title:"供电方式",width:100,editRender:{name:"ElSelect",options:[{label:"双电源",value:"双电源"},{label:"多电源",value:"多电源"},{label:"双回路",value:"双回路"}],props:{clearable:!0}}},{field:"dy1",title:"第一路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy2",title:"第二路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy3",title:"第三路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy4",title:"第四路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy5",title:"第五路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy6",title:"第六路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy7",title:"第七路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"dy8",title:"第八路电源",minWidth:100,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"重要电力客户名单表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){this.getVersionOptions()},mounted(){},methods:{refreshData(){this.getVersionOptions()},getVersionOptions(){W.loadVersionDataService().then(e=>{this.versionOptions=e.data,this.versionOptions.length>0&&(this.searchParams.version=this.versionOptions[0].value)})},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{W.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={version:this.searchParams.version};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];W.saveTableDataService(r).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");W.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){u.exportFileService("/khmd/export",{exportType:"模板"})},doExport(e){u.exportFileService("/khmd/export",{exportType:"数据",...this.searchParams},e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(R,{row:e,version:this.searchParams.version,headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/khmd/saveNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,u){const y=r("el-option"),v=r("el-select"),k=r("el-input"),C=r("el-button"),T=r("arrow-down"),R=r("el-icon"),D=r("el-dropdown-item"),A=r("el-dropdown-menu"),P=r("el-dropdown"),E=r("upload-http-component"),S=r("vxe-button"),L=r("vxe-grid");return o(),s("div",O,[g("header",null,[g("section",null,[g("div",B,[t[4]||(t[4]=h(" 版本号： ",-1)),n(v,{modelValue:l.searchParams.version,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.version=e),placeholder:"请选择",filterable:""},{default:d(()=>[(o(!0),s(f,null,b(l.versionOptions,e=>(o(),c(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),g("div",M,[n(k,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchParams.keyword=e),onKeydown:x(u.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),g("div",$,[(o(!0),s(f,null,b(u.defaultLeftButtons,(t,a)=>(o(),c(C,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),g("div",V,[n(P,null,{dropdown:d(()=>[n(A,null,{default:d(()=>[n(D,{onClick:u.doExport},{default:d(()=>[...t[6]||(t[6]=[h("导出当前页",-1)])]),_:1},8,["onClick"]),n(D,{onClick:t[2]||(t[2]=e=>u.doExport(!0))},{default:d(()=>[...t[7]||(t[7]=[h("导出全部",-1)])]),_:1})]),_:1})]),default:d(()=>[n(C,{type:"gradientGreen"},{default:d(()=>[t[5]||(t[5]=h(" 导出",-1)),n(R,{class:"el-icon--right"},{default:d(()=>[n(T)]),_:1})]),_:1})]),_:1})])]),g("section",null,[g("div",N,[n(E,{"prop-upload-url":"/khmd/importData",onLoadTableData:u.refreshData},null,8,["onLoadTableData"])]),g("div",G,[(o(!0),s(f,null,b(u.defaultRightButtons,(t,a)=>(o(),c(C,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),g("article",null,[n(L,m(u.gridOptions,{ref:"xTable",onMenuClick:t[3]||(t[3]=t=>e.menuClickEvent(t,"常用资料"))}),{action:d(({row:e})=>[e.id?(o(),c(S,{key:0,mode:"text",status:"primary",onClick:t=>u.doViewLog(e)},{default:d(()=>[...t[8]||(t[8]=[h("日志",-1)])]),_:1},8,["onClick"])):p("",!0)]),_:1},16)])])}],["__scopeId","data-v-646fb1b2"]]);let H=i.base;const j={loadTableDataService:e=>a({url:"".concat(H,"/first/queryXlzll"),method:"post",data:e,showLoading:!0}),saveTableDataService:e=>a({url:"".concat(H,"/first/saveXlzll"),method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>a({url:"".concat(H,"/first/deleteXlzll"),method:"post",data:e,showLoading:!0})},U={class:"page_content"},F={class:"header-item"},K={class:"header-item"},Z={class:"header-item"},X={class:"header-item"},J={class:"header-item"};const Y=l({name:"xlzllxe_new",mixins:[e],components:{UploadHttpComponent:t},data:()=>({time:["",""],total:0,searchParams:{keyword:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"ywdw",title:"运维单位",width:130,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"xlmc",title:"线路名称",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dxxh",title:"最小截面导线型号",width:150,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"线路正常载流能力（A）",children:[{field:"xlZc5",title:"5℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc10",title:"10℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc15",title:"15℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc20",title:"20℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc25",title:"25℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc30",title:"30℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc35",title:"35℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlZc40",title:"40℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}}]},{title:"线路事故后过负荷能力（A）",children:[{field:"xlSg5",title:"5℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg10",title:"10℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg15",title:"15℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg20",title:"20℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg25",title:"25℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg30",title:"30℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg35",title:"35℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"xlSg40",title:"40℃",width:100,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}}]},{title:"两侧间隔内变电设备限额（A）",children:[{field:"qi",title:"起",width:130,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"zhi",title:"止",width:130,editRender:{name:"ElInput",props:{clearable:!0}}}]},{field:"bz",title:"备注",minWidth:200,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!0,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"线路载流量限额表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){},mounted(){},methods:{refreshData(){this.getVersionOptions()},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{j.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){this.$refs.xTable.insertAt({}).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];j.saveTableDataService({data:r}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");j.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doExport(e){u.exportFileService("/first/exportXlzll",this.searchParams,e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(R,{row:e,version:"",headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/first/saveXlzllNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,u){const y=r("el-input"),v=r("el-button"),k=r("arrow-down"),C=r("el-icon"),T=r("el-dropdown-item"),R=r("el-dropdown-menu"),D=r("el-dropdown"),A=r("upload-http-component"),P=r("vxe-button"),E=r("vxe-grid");return o(),s("div",U,[g("header",null,[g("section",null,[g("div",F,[n(y,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.keyword=e),onKeydown:x(u.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),g("div",K,[(o(!0),s(f,null,b(u.defaultLeftButtons,(t,a)=>(o(),c(v,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),g("div",Z,[n(D,null,{dropdown:d(()=>[n(R,null,{default:d(()=>[n(T,{onClick:u.doExport},{default:d(()=>[...t[4]||(t[4]=[h("导出当前页",-1)])]),_:1},8,["onClick"]),n(T,{onClick:t[1]||(t[1]=e=>u.doExport(!0))},{default:d(()=>[...t[5]||(t[5]=[h("导出全部",-1)])]),_:1})]),_:1})]),default:d(()=>[n(v,{type:"gradientGreen"},{default:d(()=>[t[3]||(t[3]=h(" 导出",-1)),n(C,{class:"el-icon--right"},{default:d(()=>[n(k)]),_:1})]),_:1})]),_:1})])]),g("section",null,[g("div",X,[n(A,{"prop-upload-url":"/first/importXlzll",onLoadTableData:u.refreshData},null,8,["onLoadTableData"])]),g("div",J,[(o(!0),s(f,null,b(u.defaultRightButtons,(t,a)=>(o(),c(v,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),g("article",null,[n(E,m(u.gridOptions,{ref:"xTable",onMenuClick:t[2]||(t[2]=t=>e.menuClickEvent(t,"常用资料"))}),{action:d(({row:e})=>[e.id?(o(),c(P,{key:0,mode:"text",status:"primary",onClick:t=>u.doViewLog(e)},{default:d(()=>[...t[6]||(t[6]=[h("日志",-1)])]),_:1},8,["onClick"])):p("",!0)]),_:1},16)])])}],["__scopeId","data-v-14c984df"]]);let Q=i.base;const ee={loadTableDataService:e=>a({url:"".concat(Q,"/sbdGx/getPageData"),method:"post",data:e,showLoading:!0}),loadVersionDataService:e=>a({url:"".concat(Q,"/sbdGx/getVersion"),method:"post",data:e,showLoading:!0}),saveTableDataService:e=>a({url:"".concat(Q,"/sbdGx/save"),method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>a({url:"".concat(Q,"/sbdGx/delete"),method:"post",data:e,showLoading:!0})},te={class:"page_content"},ae={class:"header-item"},ie={class:"header-item"},le={class:"header-item"},re={class:"header-item"},oe={class:"header-item"},se={class:"header-item"};const ne=l({name:"xlsbdsbgxdw",mixins:[e],components:{UploadHttpComponent:t},data:()=>({time:["",""],total:0,versionOptions:[],searchParams:{keyword:"",version:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1},"searchParams.version":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50},{type:"seq",width:60},{field:"dydj",title:"电压等级（kV）",width:100,editRender:{name:"ElSelect",options:[{label:"220kV",value:"220kV"},{label:"110kV",value:"110kV"}],props:{clearable:!0}}},{field:"xlmc",title:"线路名称",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"gxdw",title:"管辖单位",width:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"type",title:"混合/架空/电缆",width:100,editRender:{name:"ElSelect",options:[{label:"混合",value:"混合"},{label:"架空",value:"架空"},{label:"电缆",value:"电缆"}],props:{clearable:!0}}},{field:"xlxz",title:"线路性质",width:100,editRender:{name:"ElSelect",options:[{label:"主线",value:"主线"},{label:"支线",value:"支线"}],props:{clearable:!0}}},{field:"qxfw",title:"全线范围",width:100,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"qxcd",title:"全线长度（km）",width:110,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",3],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"hfgd",title:"划分杆段",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"hfcd",title:"划分长度（km）",minWidth:200,editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"fjd",title:"分界点",minWidth:200,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{field:"bz",title:"备注",minWidth:200,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}},{title:"日志",width:100,fixed:"right",slots:{default:"action"}}]},editRules:()=>({}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"输变电设备管辖单位表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){this.getVersionOptions()},mounted(){},methods:{getVersionOptions(){ee.loadVersionDataService().then(e=>{this.versionOptions=e.data,this.versionOptions.length>0&&(this.searchParams.version=this.versionOptions[0].value)})},refreshData(){this.getVersionOptions()},reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{ee.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){let e={version:this.searchParams.version};this.$refs.xTable.insertAt(e).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];ee.saveTableDataService(r).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");ee.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){u.exportFileService("/sbdGx/export",{exportType:"模板"})},doExport(e){u.exportFileService("/sbdGx/export",{exportType:"数据",...this.searchParams},e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.$nextTick(function(){this.loadTableData()})},doViewLog(e){this.$vxeModal.show(R,{row:e,version:this.searchParams.version,headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots),saveUrl:"/sbdGx/saveNoLog"},{width:1e3,title:"日志",height:800},{close:()=>{this.reloadTableData()}})}}},[["render",function(e,t,a,i,l,u){const y=r("el-option"),v=r("el-select"),k=r("el-input"),C=r("el-button"),T=r("arrow-down"),R=r("el-icon"),D=r("el-dropdown-item"),A=r("el-dropdown-menu"),P=r("el-dropdown"),E=r("upload-http-component"),S=r("vxe-button"),L=r("vxe-grid");return o(),s("div",te,[g("header",null,[g("section",null,[g("div",ae,[t[4]||(t[4]=h(" 版本号： ",-1)),n(v,{modelValue:l.searchParams.version,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParams.version=e),placeholder:"请选择",filterable:""},{default:d(()=>[(o(!0),s(f,null,b(l.versionOptions,e=>(o(),c(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),g("div",ie,[n(k,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchParams.keyword=e),onKeydown:x(u.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),g("div",le,[(o(!0),s(f,null,b(u.defaultLeftButtons,(t,a)=>(o(),c(C,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),g("div",re,[n(P,null,{dropdown:d(()=>[n(A,null,{default:d(()=>[n(D,{onClick:u.doExport},{default:d(()=>[...t[6]||(t[6]=[h("导出当前页",-1)])]),_:1},8,["onClick"]),n(D,{onClick:t[2]||(t[2]=e=>u.doExport(!0))},{default:d(()=>[...t[7]||(t[7]=[h("导出全部",-1)])]),_:1})]),_:1})]),default:d(()=>[n(C,{type:"gradientGreen"},{default:d(()=>[t[5]||(t[5]=h(" 导出",-1)),n(R,{class:"el-icon--right"},{default:d(()=>[n(T)]),_:1})]),_:1})]),_:1})])]),g("section",null,[g("div",oe,[n(E,{"prop-upload-url":"/sbdGx/importData",onLoadTableData:u.refreshData},null,8,["onLoadTableData"])]),g("div",se,[(o(!0),s(f,null,b(u.defaultRightButtons,(t,a)=>(o(),c(C,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),g("article",null,[n(L,m(u.gridOptions,{ref:"xTable",onMenuClick:t[3]||(t[3]=t=>e.menuClickEvent(t,"常用资料"))}),{action:d(({row:e})=>[e.id?(o(),c(S,{key:0,mode:"text",status:"primary",onClick:t=>u.doViewLog(e)},{default:d(()=>[...t[8]||(t[8]=[h("日志",-1)])]),_:1},8,["onClick"])):p("",!0)]),_:1},16)])])}],["__scopeId","data-v-006c308d"]]);let de=i.base;const he={loadExcelDataService:e=>a({url:"".concat(de,"/first/queryFileByGrzl"),method:"post",data:e,showLoading:!0}),loadTableDataService:e=>a({url:"".concat(de,"/first/download-file-by-id"),method:"post",data:e,showLoading:!0}),exportGetIdByParamsService:e=>a({url:"".concat(de,"/first/prepare-export-data"),method:"post",data:e,showLoading:!0})},ce={class:"page_content",id:"grcyzl"},pe={class:"header-item"},me={class:"header-item"},ue={class:"header-item"},ge={class:"header-item"};const fe=l({name:"grcyzl",mixins:[e],components:{UploadHttpComponent:t},data:()=>({excelId:"",excelObj:{},excelOptions:[],tableHeaderList:[],tableData:[]}),watch:{excelId:{handler(e){e&&(this.excelObj=this.excelOptions.filter(t=>t.id===e)[0],this.loadTableData())},immediate:!1}},computed:{defaultLeftButtons:()=>[{type:"gradientRed",name:"删除"}],gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},toolbarConfig:{custom:!0,slots:{buttons:"toolbarButtons"}},customConfig:{allowVisible:!0,allowFixed:!1,allowResizable:!1,allowSort:!1},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",exportConfig:{filename:this.excelObj.fileName,sheetName:"sheet1",type:"xlsx",mode:"all",modes:["all"],message:!1,columns:this.tableHeaderList,exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},columns:this.tableHeaderList,data:this.tableData}}},created(){this.getExcelOptions()},methods:{getExcelOptions(){he.loadExcelDataService({}).then(e=>{this.excelOptions=e.data,this.excelOptions.length>0&&(this.excelId=this.excelOptions[0].id)})},loadTableData(){he.loadTableDataService({fileId:this.excelId}).then(e=>{this.tableHeaderList=e.data.headers,this.tableHeaderList.forEach(t=>{t.sortable=!0,t.minWidth=60,t.filterMultiple=!0;let a=Array.from(new Set(e.data.data.map(e=>e[t.field])));t.filters=a.filter(e=>e).map(e=>({label:e,value:e}))}),console.log(this.tableHeaderList),this.tableData=e.data.data})},doDelete(){this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u.removeFileService({fileId:this.excelId}).then(()=>{this.$message.success("删除成功"),this.getExcelOptions()})})},clearSortEvent(){this.$refs.xTable.clearSort()},clearFilterEvent(){this.$refs.xTable.clearFilter()},doExport(e){he.exportGetIdByParamsService({headers:this.$refs.xTable.getTableColumn().tableColumn,data:this.$refs.xTable.getTableData().tableData}).then(t=>{u.exportFileService("/first/download-export-data",{id:t.data,name:this.excelObj.fileName},e,this.pagerParam)})}}},[["render",function(e,t,a,i,l,p){const u=r("el-option"),x=r("el-select"),y=r("el-button"),v=r("upload-http-component"),k=r("vxe-grid");return o(),s("div",ce,[g("article",null,[n(k,m(p.gridOptions,{ref:"xTable"}),{toolbarButtons:d(()=>[g("header",null,[g("div",pe,[n(x,{modelValue:l.excelId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.excelId=e),placeholder:"请选择",filterable:"",style:{width:"300px"}},{default:d(()=>[(o(!0),s(f,null,b(l.excelOptions,e=>(o(),c(u,{key:e.id,label:e.fileName,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),g("div",me,[n(y,{type:"gradientGreen",onClick:p.clearSortEvent},{default:d(()=>[...t[1]||(t[1]=[h("重置排序",-1)])]),_:1},8,["onClick"]),n(y,{type:"gradientGreen",onClick:p.clearFilterEvent},{default:d(()=>[...t[2]||(t[2]=[h("重置筛选",-1)])]),_:1},8,["onClick"]),n(y,{type:"gradientGreen",onClick:p.doExport},{default:d(()=>[...t[3]||(t[3]=[h("导出",-1)])]),_:1},8,["onClick"])]),g("div",ue,[n(v,{"prop-upload-url":"/first/upload-file-execl","button-name":"上传",onLoadTableData:p.getExcelOptions},null,8,["onLoadTableData"])]),g("div",ge,[(o(!0),s(f,null,b(p.defaultLeftButtons,(t,a)=>(o(),c(y,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),_:1},16)])])}],["__scopeId","data-v-569fd416"]]);let be=i.base;const xe={loadTableDataService:e=>a({url:"".concat(be,"/first/queryBdzGxdw"),method:"post",data:e,showLoading:!0}),saveTableDataService:e=>a({url:"".concat(be,"/first/saveBdzGxdw"),method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>a({url:"".concat(be,"/first/deleteBdzGxdw"),method:"post",data:e,showLoading:!0})},we={class:"page_content"},ye={class:"header-item"},ve={class:"header-item"},ke={class:"header-item"},Ce={class:"header-item"},Te={class:"header-item"},Re={class:"header-item"};const De={class:"page_content"};const Ae=l({name:"cyzl",components:{xltg:_,zydlkhmd:q,xlzllxe_new:Y,xlsbdsbgxdw:ne,bdzsbdsbgxdw:l({name:"bdzsbdsbgxdw",mixins:[e],components:{UploadHttpComponent:t},data:()=>({time:["",""],total:0,searchParams:{lx:"变电运维专业",keyword:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{"searchParams.lx":{handler(e){e&&this.loadTableData()},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50},{type:"seq",width:60},{field:"bdzmc",title:"变电站名称",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"dydj",title:"电压等级",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"gxdw",title:"管辖单位",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"ywbz",title:"运维班组",visible:"变电运维专业"===this.searchParams.lx,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"ycjxbz",title:"一次检修班组",visible:"变电检修专业"===this.searchParams.lx,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"ecjxbz",title:"二次检修班组",visible:"变电检修专业"===this.searchParams.lx,editRender:{name:"ElInput",props:{clearable:!0}}}]},editRules:()=>({bdzmc:[{required:!0,message:"变电站名称不能为空"}],gxdw:[{required:!0,message:"管辖单位不能为空"}]}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,autoLoad:!0,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"输变电设备管辖单位表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientGreen",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},created(){},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{xe.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){this.$refs.xTable.insertAt({lx:this.searchParams.lx}).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:l}=e,r=[...i,...l];xe.saveTableDataService({data:r}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");xe.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doExport(e){u.exportFileService("/first/exportBdzGxdw",this.searchParams,e,this.pagerParam)},beforeEditMethod:({row:e,column:t})=>!0}},[["render",function(e,t,a,i,l,p){const u=r("el-button"),y=r("el-button-group"),v=r("el-input"),k=r("arrow-down"),C=r("el-icon"),T=r("el-dropdown-item"),R=r("el-dropdown-menu"),D=r("el-dropdown"),A=r("upload-http-component"),P=r("vxe-grid");return o(),s("div",we,[g("header",null,[g("section",null,[g("div",ye,[n(y,null,{default:d(()=>[n(u,{type:"变电运维专业"===l.searchParams.lx?"gradientBlue":"",onClick:t[0]||(t[0]=e=>l.searchParams.lx="变电运维专业")},{default:d(()=>[...t[5]||(t[5]=[h("变电运维专业",-1)])]),_:1},8,["type"]),n(u,{type:"变电检修专业"===l.searchParams.lx?"gradientBlue":"",onClick:t[1]||(t[1]=e=>l.searchParams.lx="变电检修专业")},{default:d(()=>[...t[6]||(t[6]=[h("变电检修专业",-1)])]),_:1},8,["type"])]),_:1})]),g("div",ve,[n(v,{placeholder:"请输入关键字",modelValue:l.searchParams.keyword,"onUpdate:modelValue":t[2]||(t[2]=e=>l.searchParams.keyword=e),onKeydown:x(p.loadTableData,["enter"]),title:l.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),g("div",ke,[(o(!0),s(f,null,b(p.defaultLeftButtons,(t,a)=>(o(),c(u,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),g("div",Ce,[n(D,null,{dropdown:d(()=>[n(R,null,{default:d(()=>[n(T,{onClick:p.doExport},{default:d(()=>[...t[8]||(t[8]=[h("导出当前页",-1)])]),_:1},8,["onClick"]),n(T,{onClick:t[3]||(t[3]=e=>p.doExport(!0))},{default:d(()=>[...t[9]||(t[9]=[h("导出全部",-1)])]),_:1})]),_:1})]),default:d(()=>[n(u,{type:"gradientGreen"},{default:d(()=>[t[7]||(t[7]=h(" 导出",-1)),n(C,{class:"el-icon--right"},{default:d(()=>[n(k)]),_:1})]),_:1})]),_:1})])]),g("section",null,[g("div",Te,[n(A,{"prop-upload-url":"/first/importBdzGxdw",onLoadTableData:p.loadTableData},null,8,["onLoadTableData"])]),g("div",Re,[(o(!0),s(f,null,b(p.defaultRightButtons,(t,a)=>(o(),c(u,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:d(()=>[h(w(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),g("article",null,[n(P,m(p.gridOptions,{ref:"xTable",onMenuClick:t[4]||(t[4]=t=>e.menuClickEvent(t,"常用资料"))}),null,16)])])}],["__scopeId","data-v-72c14f9e"]]),grcyzl:fe},computed:{},data:()=>({active:{name:"线路同杆",url:"xltg"},buttonList:[{name:"线路同杆",url:"xltg"},{name:"线路载流量限额",url:"xlzllxe_new"},{name:"重要电力客户名单",url:"zydlkhmd"},{name:"线路输变电设备管辖单位",url:"xlsbdsbgxdw"},{name:"变电站输变电设备管辖单位",url:"bdzsbdsbgxdw"},{name:"个人常用资料",url:"grcyzl"}]})},[["render",function(e,t,a,i,l,p){const m=r("el-button"),u=r("el-button-group");return o(),s("div",De,[g("header",null,[g("section",null,[n(u,null,{default:d(()=>[(o(!0),s(f,null,b(l.buttonList,(e,t)=>(o(),c(m,{key:"buttonList"+t,onClick:t=>l.active=e,type:l.active.url==e.url?"gradientGreen":""},{default:d(()=>[h(w(e.name),1)]),_:2},1032,["onClick","type"]))),128))]),_:1})])]),g("article",null,[(o(),c(v,null,[(o(),c(y(l.active.url)))],1024))])])}],["__scopeId","data-v-cbf0864a"]]);export{Ae as default};
