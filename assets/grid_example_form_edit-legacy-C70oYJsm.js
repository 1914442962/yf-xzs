System.register(["./table_mixin-legacy-D9U6ScmD.js","./table-example-api-legacy-zu5X8LzB.js","./UploadHttpComponent-legacy-DQP0LTpf.js","./dynamic_form-legacy-BJ7GH5Ck.js","./validateRules-legacy-Co865pER.js","./index-legacy-BhBZRkTD.js","./view_file-legacy-B8YEJj9G.js","./zcq-sb-dky-legacy-DHYpiqBX.js","./polyfill-legacy-aWkUxw0k.js"],function(e,t){"use strict";var a,l,i,r,s,o,n,d,m,h,c,u,p,g,f,b,y,x,v,w;return{setters:[e=>{a=e.t},e=>{l=e.e},e=>{i=e.U},e=>{r=e.d},e=>{s=e.v},e=>{o=e.b,n=e.r,d=e.o,m=e.c,h=e.d,c=e.i,u=e.e,p=e.g,g=e.F,f=e.v,b=e.f,y=e.w,x=e.t,v=e.x,w=e.y},null,null,null],execute:function(){const t={class:"page_content"},D={class:"header-item"},k={class:"header-item"},C={class:"header-item"},T={class:"header-item"},R={class:"header-item"};e("default",o({name:"grid_example",mixins:[a],components:{UploadHttpComponent:i},data:()=>({time:["",""],total:0,searchParams:{keyword:"",startTime:"",endTime:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1}},computed:{tableHeaderList(){return[{type:"checkbox",width:50,fixed:"left"},{type:"seq",width:60,fixed:"left"},{field:"name",title:"名字",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"sex",title:"性别",width:100,filters:[{label:"男",value:"男"},{label:"女",value:"女"}],editRender:{name:"ElSelect",options:[{label:"男",value:"男"},{label:"女",value:"女"}],props:{multiple:!0,clearable:!0}}},{field:"money",title:"金钱（元）",minWidth:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1}}},{field:"dydj",title:"电压等级",minWidth:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0],editRender:{name:"ElInput",props:{type:"number",min:0,step:1,clearable:!0}}},{field:"birthday",title:"生日",width:150,editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"remark",title:"备注",minWidth:120,headerAlign:"center",align:"left",editRender:{name:"ElInput",props:{type:"textarea",clearable:!0,autosize:!this.isAutoWrap||{maxRows:1},resize:"none"}}}]},editRules:()=>({name:[{required:!0,message:"名字不能为空"}],sex:[{required:!0,message:"性别不能为空"}],money:[{required:!0,message:"金钱（元）不能为空"},s.positive_number.rule],date:[{required:!0,message:"日期不能为空"},s.date.rule]}),gridOptions(){return{height:"auto",border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0,reserve:!0,showServeStatus:!0,range:!0},columnConfig:{resizable:!0},resizeConfig:{isDblclickAutoWidth:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,editConfig:{},proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"运行方式模版管理表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"},{type:"gradientGreen",name:"导出当前页"},{type:"gradientGreen",name:"导出全部"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"下载导入模版"},{type:"gradientBlue",name:"新增"},{type:"gradientRed",name:"删除"}]},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise(t=>{l.loadTableDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){this.$vxeModal.show(r,{tableHeaderList:this.tableHeaderList,validateRules:this.editRules},{width:800,title:"详情",height:window.innerHeight-100},{doSubmit:e=>{console.log(e)}})},doSave(){this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:r}=e,s=[...i,...r];l.saveTableDataService({data:s}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let i=e.map(e=>e.id).join(",");l.doDelTableDataService({ids:i}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){l.downloadModuleService()},cellDblclick(e){let{row:t}=e;this.openDetail(t)},resetParams(){this.searchParams.keyword="",this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.time=["",""],this.$nextTick(function(){this.loadTableData()})},openDetail(e){this.$vxeModal.show(r,{tableHeaderList:this.tableHeaderList,validateRules:this.editRules,row:e},{width:800,title:"详情",height:window.innerHeight-100},{close:()=>{},doSubmit:e=>{console.log(e)}})}}},[["render",function(e,a,l,i,r,s){const o=n("el-date-picker"),P=n("el-input"),A=n("el-button"),M=n("upload-http-component"),Y=n("vxe-grid");return d(),m("div",t,[h("header",null,[h("section",null,[h("div",D,[a[3]||(a[3]=c(" 日期范围： ",-1)),u(o,{modelValue:r.time,"onUpdate:modelValue":a[0]||(a[0]=e=>r.time=e),type:"daterange",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),h("div",k,[u(P,{placeholder:"请输入关键字",modelValue:r.searchParams.keyword,"onUpdate:modelValue":a[1]||(a[1]=e=>r.searchParams.keyword=e),onKeydown:p(s.loadTableData,["enter"]),title:r.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),h("div",C,[(d(!0),m(g,null,f(s.defaultLeftButtons,(t,a)=>(d(),b(A,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:y(()=>[c(x(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])]),h("section",null,[h("div",T,[u(M,{"prop-upload-url":"",onLoadTableData:a[2]||(a[2]=e=>s.loadTableData(!0))})]),h("div",R,[(d(!0),m(g,null,f(s.defaultRightButtons,(t,a)=>(d(),b(A,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:y(()=>[c(x(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),h("article",null,[u(Y,v(s.gridOptions,{ref:"xTable"},w({cellDblclick:s.cellDblclick})),null,16)])])}],["__scopeId","data-v-dde0254e"]]))}}});
