import{b as t,o as e,c as a,s as r,k as s,m as i}from"./index-0nalUVid.js";import{U as n}from"./url-utils-BnIa3tlD.js";import"./polyfill-lGe4XDVY.js";let h=DispatchHelperClientAPI.DHClientJSAPI;const g=t({name:"autologin",computed:{},data:()=>({}),created(){this.handleAutoLogin()},methods:{...i(["setUserInfo","setToken"]),handleAutoLogin(){let t=n.getUrlHashQueryString("token");t?r.dispatch("setToken","Bearer "+t).then(async()=>{await r.dispatch("getUserInfo");let t=n.getUrlHashQueryString("path");n.getUrlHashQueryString("noHeader")&&await r.dispatch("setNoHeader",!0),n.getUrlHashQueryString("isXzs")&&await r.dispatch("setIsXzs",!0),n.getUrlHashQueryString("tree")&&await r.dispatch("setGztTree",n.getUrlHashQueryString("tree")),await s.push({path:"/".concat(t)})}):h.user.getCurrentUser().then(t=>{r.dispatch("setToken","Bearer "+t.extData).then(async()=>{await r.dispatch("getUserInfo");let t=n.getUrlHashQueryString("path");n.getUrlHashQueryString("noHeader")&&await r.dispatch("setNoHeader",!0),n.getUrlHashQueryString("isXzs")&&await r.dispatch("setIsXzs",!0),n.getUrlHashQueryString("tree")&&await r.dispatch("setGztTree",n.getUrlHashQueryString("tree")),n.getUrlHashQueryString("gztPath")&&await r.dispatch("setGztPath",n.getUrlHashQueryString("gztPath")),await s.push({path:"/".concat(t)})})})}}},[["render",function(t,r,s,i,n,h){return e(),a("div")}]]);export{g as default};
