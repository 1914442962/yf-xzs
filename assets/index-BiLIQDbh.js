import{t as e}from"./table_mixin-BjqIVH_Q.js";import{U as t}from"./UploadHttpComponent-Z9tjjzV3.js";import{z as a,A as s,_ as o,o as r,c as i,b as d,t as l,i as n,n as c,r as A,d as p,f as h,F as g,q as f,e as u,w as m,h as b,v as y}from"./index-CIzN2UtG.js";import{T as B,a as w,P as x,b as k,C as R,c as C,R as G,d as v,_ as U,L as K,e as S,f as E,D as Q,M as V,g as P}from"./index-Cbq3eiDG.js";import{v as M}from"./view_simple_table-DvD_mLL5.js";import"./polyfill-lGe4XDVY.js";let T=s.base;const W={loadTableDataService:e=>a({url:"".concat(T,"/xwb/queryLlt"),method:"post",data:e,showLoading:!0}),saveTableDataService:e=>a({url:"".concat(T,"/xwb/saveLlt"),method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>a({url:"".concat(T,"/xwb/deleteLlt"),method:"post",data:e,showLoading:!0}),loadViewDialogService:e=>a({url:"".concat(T,"/xwb/lltLog"),method:"post",data:e,showLoading:!0})};const F={type:"textRed",view:class extends w{},model:class extends B{getTextStyle(){const e=super.getTextStyle();return e.color=this.properties.fill||"#fff",e.fontSize=15,e}initNodeData(e){e.text=e.text||"1号主变\n有功：30.12MW\n负载率：60.55%\n2号主变\n有功：30.12MW\n负载率：60.55%",super.initNodeData(e)}}};const L={type:"textBlue",view:class extends w{},model:class extends B{getTextStyle(){const e=super.getTextStyle();return e.color=this.properties.fill||"#1500e9",e.fontSize=50,e}}};const D={type:"customEdge",view:class extends k{},model:class extends x{getEdgeStyle(){const e=super.getEdgeStyle();return e.stroke=this.properties.fill||"#23cafb",e.strokeDasharray=this.properties.strokeDasharray||"0 0",e.strokeWidth=3,e}getArrowStyle(){const e=super.getEdgeStyle();return e.stroke="transparent",e}initEdgeData(e){super.initEdgeData(e)}}};const X={type:"smallCircle",view:class extends C{},model:class extends R{getNodeStyle(){const e=super.getNodeStyle();return e.stroke=this.properties.fill||"#23cafb",e.fill="transparent",e}initNodeData(e){super.initNodeData(e),this.r=16}}};const j={type:"smallRect",view:class extends v{},model:class extends G{getNodeStyle(){const e=super.getNodeStyle();return e.stroke=this.properties.fill||"#23cafb",e.fill=this.properties.fill||"#23cafb",e}initNodeData(e){super.initNodeData(e),this.width=13.5,this.height=20}getDefaultAnchor(){return[]}}};const z={type:"smallEmptyRect",view:class extends v{},model:class extends G{getNodeStyle(){const e=super.getNodeStyle();return e.stroke=this.properties.fill||"#23cafb",e.strokeWidth=3,e.fill="#162233",e}initNodeData(e){super.initNodeData(e),this.width=20.5,this.height=13}getDefaultAnchor(){return[]}}};const Y={type:"emptyNode",view:class extends C{getShape(){const{x:e,y:t}=this.props.model;return U("g",{},U("circle",{cx:e,cy:t,r:20,fill:"transparent",stroke:"transparent","stroke-width":2}))}},model:class extends R{getDefaultAnchor(){const{id:e,x:t,y:a}=this,s=[];for(let o=0;o<8;o++){const r=2*Math.PI*o/8,i=t+20*Math.cos(r),d=a+20*Math.sin(r);s.push({x:i,y:d,id:"".concat(e,"_outer_").concat(o),type:"outer"})}return s}}};const J={type:"custtomRectGreen",view:class extends v{},model:class extends G{getNodeStyle(){const e=super.getNodeStyle();return e.stroke="#10c89e",e.strokeWidth=4,e.fill="#03222c",e}getTextStyle(){const e=super.getTextStyle();return e.color="#10c89e",e.fontSize=18,e}initNodeData(e){super.initNodeData(e),e.text=e.text||"深度求索",this.width=250.5,this.height=55}}};const I={type:"custtomRectBlue",view:class extends v{},model:class extends G{getNodeStyle(){const e=super.getNodeStyle();return e.stroke="#00a2ff",e.strokeWidth=4,e.fill="#03222c",e}getTextStyle(){const e=super.getTextStyle();return e.color="#00a2ff",e.fontSize=18,e}initNodeData(e){super.initNodeData(e),e.text=e.text||"220kV霞湾变",this.width=330.5,this.height=55}}};const N={type:"custtomRectRed",view:class extends v{},model:class extends G{getNodeStyle(){const e=super.getNodeStyle();return e.stroke="#ef2a50",e.strokeWidth=4,e.fill="#03222c",e}getTextStyle(){const e=super.getTextStyle();return e.color="#ef2a50",e.fontSize=18,e}initNodeData(e){super.initNodeData(e),e.text=e.text||"110kV广场变",this.width=150.5,this.height=55}}};const Z={type:"custtomRectYellow",view:class extends v{},model:class extends G{getNodeStyle(){const e=super.getNodeStyle();return e.stroke="#e9c451",e.strokeWidth=4,e.fill="#03222c",e}getTextStyle(){const e=super.getTextStyle();return e.color="#e9c451",e.fontSize=18,e}initNodeData(e){super.initNodeData(e),e.text=e.text||"500kV仁和变",this.width=330.5,this.height=55}}};const O={type:"customLineEdge",view:class extends S{},model:class extends K{getEdgeStyle(){const e=super.getEdgeStyle();return e.stroke=this.properties.fill||"#23cafb",e.strokeDasharray=this.properties.strokeDasharray||"0 0",e.strokeWidth=3,e}getArrowStyle(){const e=super.getEdgeStyle();return e.stroke="transparent",e}initEdgeData(e){super.initEdgeData(e)}}};let H=s.base;const q={loadJsonDataService:e=>a({url:"".concat(H,"/xwb/getDwyxdt"),method:"post",data:e,showLoading:!0}),saveJsonDataService1:e=>a({url:"".concat(H,"/xwb/addOrUpdateDwyxdt"),method:"post",data:e,showLoading:!0}),saveJsonDataService2:e=>a({url:"".concat(H,"/xwb/addOrUpdateDwyxdtxl"),method:"post",data:e,showLoading:!0})},_={props:{id:{type:String},disabled:{type:Boolean,default:!1}},data:()=>({lf:null,options:[],toggle:!0,currentNode:{properties:{}}}),watch:{},mounted(){this.initData(this.toggle)},methods:{initData(e=!0){this.lfUpdate(e),this.getData()},triggerJSONUpload(){const e=document.createElement("input");e.type="file",e.accept=".json",e.style.display="none";const t=this;e.addEventListener("change",function(){const e=this.files[0];if(!e)return;const a=new FileReader;a.onload=function(e){try{const a=JSON.parse(e.target.result);t.lf.render(a)}catch(a){}},a.readAsText(e)}),document.body.appendChild(e),e.click(),document.body.removeChild(e)},exportJSONFile(){const e=this.lf.getGraphData(),t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),s=document.createElement("a");s.href=URL.createObjectURL(a),s.download="data.json",s.click(),URL.revokeObjectURL(s.href)},lfUpdate(e){const t=new E({edgeType:"customEdge",container:this.$refs.logic,stopMoveGraph:!0,stopScrollGraph:!0,stopZoomGraph:!0,allowResize:e,allowRotate:!0,background:{backgroundColor:"#041323"},grid:{visible:!1},plugins:[Q,V,P],isSilentMode:this.disabled});this.toggle=!this.toggle,this.lf=t;t.extension.menu.addMenuConfig({edgeMenu:[{text:"设置为完整线条",callback(e){t.setProperties(e.id,{fill:"#3ABCE7",strokeDasharray:"0 0"})}},{text:"设置为间隔线段（大）",callback(e){t.setProperties(e.id,{fill:"#3ABCE7",strokeDasharray:"14 7"})}},{text:"设置为间隔线段（小）",callback(e){t.setProperties(e.id,{fill:"#3ABCE7",strokeDasharray:"8 3"})}},{text:"设置为淡蓝色",callback(e){t.setProperties(e.id,{fill:"#23cafb"})}},{text:"设置为深蓝色",callback(e){t.setProperties(e.id,{fill:"#00a2ff"})}},{text:"设置为黄色",callback(e){t.setProperties(e.id,{fill:"#e9c451"})}},{text:"设置为绿色",callback(e){t.setProperties(e.id,{fill:"#10c89e"})}},{text:"设置为红色",callback(e){t.setProperties(e.id,{fill:"#ef2a50"})}}],nodeMenu:[{text:"设置为透明",callback(e){t.setProperties(e.id,{fill:"transparent"})}},{text:"设置为淡蓝色",callback(e){t.setProperties(e.id,{fill:"#23cafb"})}},{text:"设置为深蓝色",callback(e){t.setProperties(e.id,{fill:"#00a2ff"})}},{text:"设置为黄色",callback(e){t.setProperties(e.id,{fill:"#e9c451"})}},{text:"设置为绿色",callback(e){t.setProperties(e.id,{fill:"#10c89e"})}},{text:"设置为红色",callback(e){t.setProperties(e.id,{fill:"#ef2a50"})}}]}),t.extension.dndPanel.setPatternItems([{type:"custtomRectGreen",label:"绿色框",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"custtomRectRed",label:"红色框",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"custtomRectBlue",label:"蓝色框",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"custtomRectYellow",label:"黄色框",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"emptyNode",label:"占位元素",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"smallCircle",label:"空心小圆",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"smallRect",label:"实心小方块",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"smallEmptyRect",label:"空心小方块",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="},{type:"textRed",label:"文字",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg=="}]),t.register(D),t.register(O),t.register(Y),t.register(L),t.register(F),t.register(X),t.register(j),t.register(z),t.register(J),t.register(I),t.register(N),t.register(Z),t.render([])},setLineType(e){this.lf.setDefaultEdgeType(e),this.$message.success("已切换线条类型")},saveData(){q.saveJsonDataService1({id:this.id,nodes:this.lf.getGraphData().nodes}).then(()=>{this.$message.success("保存节点成功")}),q.saveJsonDataService2({id:this.id,edges:this.lf.getGraphData().edges}).then(()=>{this.$message.success("保存线路成功")})},async getData(){q.loadJsonDataService({id:this.id}).then(e=>{this.lf.render(e.data)})}}},$={ref:"logic",id:"logic"},ee={key:0,class:"btns",style:{position:"fixed",right:"400px",top:"20px","z-index":"9999999999"}};const te=o(_,[["render",function(e,t,a,s,o,A){return r(),i("div",{class:c(["sixDragon",{disabled:a.disabled}])},[d("div",$,null,512),a.disabled?n("",!0):(r(),i("div",ee,[d("div",{class:"el-button",onClick:t[0]||(t[0]=t=>A.saveData(e.logicType))}," 接口保存 "),d("div",{class:"el-button",onClick:t[1]||(t[1]=e=>A.initData(o.toggle))},l(o.toggle?"打开":"关闭")+"可拖拽宽高 ",1),d("div",{class:"el-button",onClick:t[2]||(t[2]=e=>A.setLineType("customLineEdge"))}," 设置线条类型为直线 "),d("div",{class:"el-button",onClick:t[3]||(t[3]=e=>A.setLineType("customEdge"))}," 设置线条类型为自动转弯线条 "),d("div",{class:"el-button",onClick:t[4]||(t[4]=(...e)=>A.triggerJSONUpload&&A.triggerJSONUpload(...e))}," 导入json "),d("div",{class:"el-button",onClick:t[5]||(t[5]=(...e)=>A.exportJSONFile&&A.exportJSONFile(...e))}," 导出json ")]))],2)}],["__scopeId","data-v-39454b48"]]),ae={class:"page_content"},se={class:"header-item"},oe={class:"header-item"},re={class:"header-item"};const ie=o({name:"llt",mixins:[e],components:{UploadHttpComponent:t},data:()=>({time:["",""],total:0,searchParams:{keyword:"",startTime:"",endTime:""},tableData:[],isAutoWrap:!1}),watch:{},computed:{tableHeaderList:()=>[{type:"checkbox",width:50},{type:"seq",width:60},{field:"mc",title:"名称",minWidth:120,editRender:{name:"ElInput",props:{clearable:!0}}},{field:"updateTime",title:"修改时间",width:150,sortable:!0},{title:"操作",width:"150",slots:{default:"action"}}],editRules:()=>({mc:[{required:!0,message:"名称不能为空"}]}),gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,stripe:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"运行方式模版管理表",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editConfig:{trigger:"click",mode:"cell",showStatus:!0,showIcon:!0,beforeEditMethod:this.beforeEditMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"刷新"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"新增"},{type:"gradientBlue",name:"保存"},{type:"gradientRed",name:"删除"}]},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let s=this.getRealParams(this.searchParams,e,t,a);return new Promise((t,a)=>{W.loadTableDataService(s).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},toggleWrap(){this.isAutoWrap?this.isAutoWrap=!1:this.isAutoWrap="tooltip"},doAdd(){this.$refs.xTable.insertAt({}).then(e=>{this.$refs.xTable.setEditRow(e)})},doSave(){const e=this.getUpdateRecords();e&&e.length>0&&this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:s,updateRecords:o}=e,r=[...s,...o];W.saveTableDataService({data:r}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm("确认删除勾选的".concat(e.length,"条数据吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let s=e.map(e=>e.id).join(",");W.doDelTableDataService({ids:s}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},beforeEditMethod:({row:e,column:t})=>!0,resetParams(){this.searchParams.keyword="",this.time=["",""],this.$nextTick(function(){this.loadTableData()})},doOpenIframe(e){this.$vxeModal.show(te,{id:e.id},{width:window.innerWidth-10,title:"绘制",height:window.innerHeight-20},{})},doViewLog(e){W.loadViewDialogService({id:e.id}).then(e=>{this.$vxeModal.show(M,{tableHeaderList:[{type:"seq",width:60},{field:"czr",title:"操作人",width:"100"},{field:"time",title:"操作时间",width:"150"},{field:"nr",title:"内容"}],tableData:e.data},{width:800,title:"日志",height:600},{})})}}},[["render",function(e,t,a,s,o,c){const B=A("el-input"),w=A("el-button"),x=A("vxe-button"),k=A("vxe-grid");return r(),i("div",ae,[d("header",null,[d("section",null,[d("div",se,[p(B,{placeholder:"请输入关键字",modelValue:o.searchParams.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchParams.keyword=e),onKeydown:h(c.loadTableData,["enter"]),title:o.searchParams.keyword,clearable:""},null,8,["modelValue","onKeydown","title"])]),d("div",oe,[(r(!0),i(g,null,f(c.defaultLeftButtons,(t,a)=>(r(),u(w,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:m(()=>[b(l(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])]),d("section",null,[d("div",re,[(r(!0),i(g,null,f(c.defaultRightButtons,(t,a)=>(r(),u(w,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:m(()=>[b(l(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),d("article",null,[p(k,y(c.gridOptions,{ref:"xTable",onMenuClick:t[1]||(t[1]=t=>e.menuClickEvent(t,"接线图"))}),{action:m(({row:e})=>[e.id?(r(),u(x,{key:0,mode:"text",status:"primary",onClick:t=>c.doOpenIframe(e)},{default:m(()=>[...t[2]||(t[2]=[b("绘图",-1)])]),_:1},8,["onClick"])):n("",!0),e.id?(r(),u(x,{key:1,mode:"text",status:"primary",onClick:t=>c.doViewLog(e)},{default:m(()=>[...t[3]||(t[3]=[b("日志",-1)])]),_:1},8,["onClick"])):n("",!0)]),_:1},16)])])}],["__scopeId","data-v-2e0cbf6d"]]);export{ie as default};
