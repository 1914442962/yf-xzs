System.register(["./table_mixin-legacy-D9U6ScmD.js","./ndfs-api-legacy-CWnOT7Lv.js","./index-legacy-BhBZRkTD.js","./DateRangerPickerComponent-legacy-CNev8SyW.js","./polyfill-legacy-aWkUxw0k.js"],function(e,t){"use strict";var a,r,i,l,o,s,n,d,h,c,m,u,f,g,p,b,C,x;return{setters:[e=>{a=e.t},e=>{r=e.n},e=>{i=e.b,l=e.r,o=e.o,s=e.c,n=e.d,d=e.e,h=e.F,c=e.v,m=e.f,u=e.w,f=e.i,g=e.t,p=e.x,b=e.z,C=e.E},e=>{x=e.D},null],execute:function(){const t={class:"page_content"},y={class:"header-item"},P={class:"header-item"},w={class:"header-item"};e("default",i({name:"zbzcz",mixins:[a],components:{DateRangerPickerComponent:x},data:()=>({total:0,searchParams:{sdt:"",edt:"",sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{},computed:{tableHeaderList:()=>[{type:"seq",width:60},{field:"dateTime",title:"日期",width:120,sortable:!0},{field:"deviceName",title:"设备名称",minWidth:120},{field:"voltageName",title:"电压等级",width:120,sortable:!0,headerAlign:"center",align:"right",formatter:["formatterNumber",0]},{field:"ratingValue",title:"额定容量（MVA）",width:160,sortable:!0,headerAlign:"center",align:"right"},{field:"realValue",title:"最大视在功率（MW）",width:200,sortable:!0,headerAlign:"center",align:"right"},{field:"highRate",title:"最大负载率（%）",width:200,sortable:!0,headerAlign:"center",align:"right"},{field:"overloadTime",title:"最大负载率时刻",width:200,sortable:!0,formatter:["formatterTime"]}],gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t)}},exportConfig:{filename:"主变重超载表格",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"}],defaultRightButtons:()=>[]},mounted(){this.searchParams.sdt=b().startOf("month").format("YYYY-MM-DD"),this.searchParams.edt=b().endOf("month").format("YYYY-MM-DD")},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let i=this.getRealParams(this.searchParams,e,t,a);return new Promise(t=>{r.loadZbzczDataService(i).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},doExport(e){C.exportFileService("/ndfs/exportZbzcz",this.searchParams,e,this.pagerParam)},resetParams(){this.searchParams.sdt=b().startOf("month").format("YYYY-MM-DD"),this.searchParams.edt=b().endOf("month").format("YYYY-MM-DD"),this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.$nextTick(function(){this.loadTableData()})}}},[["render",function(e,a,r,i,b,C){const x=l("DateRangerPickerComponent"),k=l("el-button"),T=l("arrow-down"),D=l("el-icon"),M=l("el-dropdown-item"),v=l("el-dropdown-menu"),Y=l("el-dropdown"),A=l("vxe-grid");return o(),s("div",t,[n("header",null,[n("section",null,[d(x,{"start-time":b.searchParams.sdt,"end-time":b.searchParams.edt,updateStartTime:b.searchParams.sdt,"onUpdate:updateStartTime":a[0]||(a[0]=e=>b.searchParams.sdt=e),updateEndTime:b.searchParams.edt,"onUpdate:updateEndTime":a[1]||(a[1]=e=>b.searchParams.edt=e)},null,8,["start-time","end-time","updateStartTime","updateEndTime"]),n("div",y,[(o(!0),s(h,null,c(C.defaultLeftButtons,(t,a)=>(o(),m(k,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:u(()=>[f(g(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),n("div",P,[d(Y,null,{dropdown:u(()=>[d(v,null,{default:u(()=>[d(M,{onClick:C.doExport},{default:u(()=>[...a[5]||(a[5]=[f("导出当前页",-1)])]),_:1},8,["onClick"]),d(M,{onClick:a[2]||(a[2]=e=>C.doExport(!0))},{default:u(()=>[...a[6]||(a[6]=[f("导出全部",-1)])]),_:1})]),_:1})]),default:u(()=>[d(k,{type:"gradientGreen"},{default:u(()=>[a[4]||(a[4]=f(" 导出",-1)),d(D,{class:"el-icon--right"},{default:u(()=>[d(T)]),_:1})]),_:1})]),_:1})])]),n("section",null,[n("div",w,[(o(!0),s(h,null,c(C.defaultRightButtons,(t,a)=>(o(),m(k,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:u(()=>[f(g(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),n("article",null,[d(A,p(C.gridOptions,{ref:"xTable",onMenuClick:a[3]||(a[3]=t=>e.menuClickEvent(t,"年度方式"))}),null,16)])])}],["__scopeId","data-v-e9163013"]]))}}});
