System.register(["./index-legacy-DO0lzRwA.js"],function(e,t){"use strict";var a,s,r,i,o,l,n,d,c,h,g,p;return{setters:[e=>{a=e.A,s=e.B,r=e.b,i=e.r,o=e.o,l=e.c,n=e.d,d=e.t,c=e.j,h=e.e,g=e.w,p=e.i}],execute:function(){let t=s.base;const u=e("g",{addDataService:e=>a({url:`${t}/first/saveGrrj`,method:"post",data:e,showLoading:!0}),deleteDataService:e=>a({url:`${t}/first/deleteGrrj`,method:"post",data:e,showLoading:!0}),loadTabDataService:e=>a({url:`${t}/first/getGrrjTab`,method:"post",data:e,showLoading:!0}),loadTableDataService:e=>a({url:`${t}/first/queryGrrj`,method:"post",data:e,showLoading:!0})}),m={name:"view_prompt",props:{title:{type:String},isRequire:{type:Boolean,default:!0},defaultTextarea:String},data:()=>({textarea:""}),created(){this.defaultTextarea&&(this.textarea=this.defaultTextarea)},methods:{returnData(){!this.isRequire||this.textarea&&""!=this.textarea?(this.$emit("returnData",this.textarea),this.$emit("close")):this.$message.warning("内容不能为空")}}},f={id:"view_prompt"},b={key:0},x=e("v",r(m,[["render",function(e,t,a,s,r,u){const m=i("el-input"),x=i("el-button");return o(),l("div",f,[n("article",null,[a.title?(o(),l("p",b,d(a.title)+"：",1)):c("",!0),h(m,{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入内容",modelValue:r.textarea,"onUpdate:modelValue":t[0]||(t[0]=e=>r.textarea=e)},null,8,["modelValue"])]),n("footer",null,[h(x,{type:"gradientGray",onClick:t[1]||(t[1]=t=>e.$emit("close"))},{default:g(()=>[...t[2]||(t[2]=[p("取消",-1)])]),_:1}),h(x,{type:"gradientGreen",onClick:u.returnData},{default:g(()=>[...t[3]||(t[3]=[p("确定",-1)])]),_:1},8,["onClick"])])])}],["__scopeId","data-v-79fb2537"]])),k=new BroadcastChannel("YFZLQD-channel");e("t",{data:()=>({pagerConfig:{currentPage:1,pageSize:20,layouts:["Home","PrevPage","JumpNumber","NextPage","End","Sizes","FullJump","Total"],size:"small",slots:{total:({total:e})=>h("span",{style:"margin-right:6px;vertical-align:initial"},[" ",p("共")," ",h("span",{style:"font-weight:bold;vertical-align:baseline"},[e])," ",p("条记录")]),left:"pagerLeft"}},pagerParam:{currentPage:1,pageSize:20}}),beforeRouteLeave(e,t,a){if(!this.$store.state.aliveTabs.some(e=>e.url===t.name)){let e=this.$vnode,t=e&&e.parent;if(t&&t.componentInstance&&t.componentInstance.cache){var s=null==e.key?e.componentOptions.Ctor.cid+(e.componentOptions.tag?`::${e.componentOptions.tag}`:""):e.key,r=t.componentInstance.cache,i=t.componentInstance.keys;if(r[s]){if(this.$destroy(),i.length){var o=i.indexOf(s);o>-1&&i.splice(o,1)}r[s]=null}}}a()},methods:{trimSpecial:e=>e.replace(/[`~!@#$%^&*_\-+=<>?:"{}|,.\/;'\\[\]·~！@#¥%……&*——\-+={}|《》？：“”【】、；‘’，。、～]/g,""),btnClick(e){switch(e.name){case"查询":this.loadTableData();break;case"重置":this.resetParams();break;case"确定":this.doConfirm();break;case"刷新":this.reloadTableData();break;case"查看日志":this.doViewDialog();break;case"查看流程图":this.doViewFlow();break;case"新建":case"新增":this.doAdd();break;case"生成":this.doSc();break;case"初始化":this.doInit();break;case"导出":case"导出当前页":this.doExport();break;case"导出全部":this.doExport(!0);break;case"自动换行":this.toggleWrap();break;case"提交":default:this.doOperation(e);break;case"删除":this.doDelete();break;case"保存":this.doSave();break;case"复制":this.doCopy();break;case"同步":this.doSync();break;case"下载导入模版":case"下载":this.downloadModule();break;case"导入":this.doImport();break;case"上传文件":this.readFileEvent();break;case"发送短信":this.doSendMessage();break;case"推送至年度风险":this.doPush()}},getCheckboxRecord(){const e=this.$refs.xTable.getCheckboxRecords();return!e||0===e.length||e.length>1?(this.$message.warning("请选择一条数据！"),[]):e},getRadioRecord(){let e=this.$refs.xTable.getRadioRecord();if(e&&0!==e.length)return e;this.$message.warning("请选择一条数据")},getCheckboxRecords(){const e=this.$refs.xTable.getCheckboxRecords();return e&&0!==e.length?e:(this.$message.warning("请至少选择一条数据！"),[])},getUpdateRecords(){const e=[...this.$refs.xTable.getUpdateRecords(),...this.$refs.xTable.getInsertRecords()];return e&&0!==e.length?e:(this.$message.warning("数据未修改！"),[])},doExport(){this.$refs.xTable.openExport()},filterMethod(e){console.log(e);let{options:t,row:a,column:s}=e;return!s.filterRender||!s.filterRender||"VxeSelect"!=s.filterRender.name||!t[0].data||(t[0].data=t[0].data.filter(e=>e),t[0].data.includes(a[s.field]))},exportMethod({options:e}){const t={filename:e.filename,sheetName:e.sheetName,isHeader:e.isHeader,original:e.original,mode:e.mode,ids:"selected"===e.mode?e.data.map(e=>e.id):[],fields:e.columns.map(e=>({field:e.field,title:e.title}))};return this.$refs.xTable.exportData(t)},afterExportMethod(){this.$message.success("导出成功")},sortChangeEvent(e){let{property:t,order:a}=e;this.searchParams.sortOrder=a||"",this.searchParams.sortColumn=t,this.loadTableData()},menuClickEvent(e,t){const{menu:a}=e;"collect"===a.code&&this.$vxeModal.show(x,{title:"请输入标记原因并将当前数据标记重点，加入个人日记"},{width:420,title:"标记原因",height:260},{returnData:a=>{u.addDataService({type:t,data:[e.row],yy:a,headerList:this.tableHeaderList.filter(e=>!e.type&&!e.slots)}).then(e=>{this.$message.success(e.data),k.postMessage({type:"refresh_grrj",data:{}})})}})},getRealParams(e,t,a,s){let r=JSON.parse(JSON.stringify(e));for(let i=0;i<s.length;i++){let e=s[i].column.filterMultiple&&s[i].column.filters.length>1;r[e?s[i].field+"List":s[i].field]=s[i].column.filterRender?e?s[i].datas:s[i].datas[0]:e?s[i].values:s[i].values[0]}return a[0]&&(r.sortOrder=a[0].order,r.sortColumn=a[0].field),this.pagerParam=t,r.pageIndex=t.currentPage-1,r.pageSize=t.pageSize,r},sumMethod(e,t){let a=0;return e.forEach(e=>{a+=Number(e[t])}),a}}})}}});
