import{t as e}from"./table_mixin-Up91sngm.js";import{n as t}from"./ndfs-api-072m8Mm_.js";import{b as a,r,o as i,c as o,d as s,e as l,F as n,v as d,f as m,w as h,i as c,t as p,x as f,z as u,E as g}from"./index-3VtalNXz.js";import{D as b}from"./DateRangerPickerComponent-C2bPbeCa.js";import"./polyfill-lGe4XDVY.js";const x={class:"page_content"},C={class:"header-item"},k={class:"header-item"},y={class:"header-item"};const P=a({name:"fhqk",mixins:[e],components:{DateRangerPickerComponent:b},data:()=>({total:0,searchParams:{sdt:u().startOf("month").format("YYYY-MM-DD"),edt:u().endOf("month").format("YYYY-MM-DD"),sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{},computed:{tableHeaderList:()=>[{type:"seq",width:60},{field:"dateTime",title:"日期",width:120,sortable:!0},{field:"maxLoad",title:"最高负荷（MW）",width:160,sortable:!0,headerAlign:"center",align:"right"},{field:"maxLoadTime",title:"最高负荷时刻",minWidth:120,sortable:!0,formatter:["formatterTime"]},{field:"zgfhtb",title:"最高负荷同比（%）",minWidth:120,sortable:!0},{field:"minLoad",title:"最低负荷（MW）",minWidth:120,sortable:!0,headerAlign:"center",align:"right"},{field:"dayElectricity",title:"日供电量（万千万时）",minWidth:130,sortable:!0,headerAlign:"center",align:"right"},{field:"rdltb",title:"日电量同比（%）",minWidth:120,sortable:!0,headerAlign:"center",align:"right"}],gridOptions(){return{height:"auto",keepSource:!0,border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},showOverflow:this.isAutoWrap,headerCellClassName:"row-class",pagerConfig:this.pagerConfig,proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t)}},menuConfig:{body:{options:[[{code:"collect",name:"标记重点"}]]}},exportConfig:{filename:"负荷情况表格",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"},{type:"gradientDarkGreen",name:"重置"}],defaultRightButtons:()=>[]},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,a,r){let i=this.getRealParams(this.searchParams,e,a,r);return new Promise(a=>{t.loadFhqkDataService(i).then(t=>{1e5==e.pageSize?(this.total=t.total,a(t.data)):(this.total=t.total,a({result:t.data,page:{total:t.total}}))})})},doExport(e){g.exportFileService("/ndfs/exportFhqk",this.searchParams,e,this.pagerParam)},resetParams(){this.searchParams.sdt=u().startOf("month").format("YYYY-MM-DD"),this.searchParams.edt=u().endOf("month").format("YYYY-MM-DD"),this.searchParams.sortOrder="",this.searchParams.sortColumn="",this.$nextTick(function(){this.loadTableData()})}}},[["render",function(e,t,a,u,g,b){const P=r("DateRangerPickerComponent"),T=r("el-button"),w=r("arrow-down"),D=r("el-icon"),M=r("el-dropdown-item"),Y=r("el-dropdown-menu"),_=r("el-dropdown"),v=r("vxe-grid");return i(),o("div",x,[s("header",null,[s("section",null,[l(P,{"start-time":g.searchParams.sdt,"end-time":g.searchParams.edt,updateStartTime:g.searchParams.sdt,"onUpdate:updateStartTime":t[0]||(t[0]=e=>g.searchParams.sdt=e),updateEndTime:g.searchParams.edt,"onUpdate:updateEndTime":t[1]||(t[1]=e=>g.searchParams.edt=e)},null,8,["start-time","end-time","updateStartTime","updateEndTime"]),s("div",C,[(i(!0),o(n,null,d(b.defaultLeftButtons,(t,a)=>(i(),m(T,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:h(()=>[c(p(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))]),s("div",k,[l(_,null,{dropdown:h(()=>[l(Y,null,{default:h(()=>[l(M,{onClick:b.doExport},{default:h(()=>[...t[5]||(t[5]=[c("导出当前页",-1)])]),_:1},8,["onClick"]),l(M,{onClick:t[2]||(t[2]=e=>b.doExport(!0))},{default:h(()=>[...t[6]||(t[6]=[c("导出全部",-1)])]),_:1})]),_:1})]),default:h(()=>[l(T,{type:"gradientGreen"},{default:h(()=>[t[4]||(t[4]=c(" 导出",-1)),l(D,{class:"el-icon--right"},{default:h(()=>[l(w)]),_:1})]),_:1})]),_:1})])]),s("section",null,[s("div",y,[(i(!0),o(n,null,d(b.defaultRightButtons,(t,a)=>(i(),m(T,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:h(()=>[c(p(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),s("article",null,[l(v,f(b.gridOptions,{ref:"xTable",onMenuClick:t[3]||(t[3]=t=>e.menuClickEvent(t,"年度方式"))}),null,16)])])}],["__scopeId","data-v-17498a2d"]]);export{P as default};
