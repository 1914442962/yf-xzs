!function(){function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function e(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?t(Object(s),!0).forEach(function(t){r(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function r(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}System.register(["./default-setting-mixin-legacy-yEMrJyfl.js","./index-legacy-D5DnMBNv.js","./url-utils-legacy-GQgOb-Hx.js","./polyfill-legacy-aWkUxw0k.js"],function(t,r){"use strict";var n,s,o,i,l,c,u,a,h,d,f,y,g,m,p,_,T,b,w,E,C,B;return{setters:[t=>{n=t.D},t=>{s=t.u,o=t.m,i=t.a,l=t.s,c=t._,u=t.r,a=t.o,h=t.c,d=t.b,f=t.d,y=t.w,g=t.e,m=t.f,p=t.g,_=t.h,T=t.i,b=t.t,w=t.j,E=t.l,C=t.k},t=>{B=t.U},null],execute:function(){let S={data:()=>({sysKey:null,localTicket:null,bind:!1,fullLoading:!1,isError:!1,errorMsg:"",autoToIndex:!1,omsLoading:!1}),computed:e({},i(["token"])),created(){this.handleAutoLogin()},methods:e(e({},o(["setUserInfo","setToken"])),{},{handleAutoLogin(){let t=B.getUrlSearchQueryString("token");t&&(this.fullLoading=!0,this.setToken("Bearer "+t).then(()=>{this.onSetTokenSuccess()}))},onSetTokenSuccess(){return s.getUseInfo().then(t=>{this.setUserInfo(t)}).then(()=>{this.fullLoading=!1,router.push("/index")}).catch(t=>{this.fullLoading=!1,this.onError(t)})},onError(t){this.isError=!0,this.errorMsg=t}})};function P(){this.mode=1,this.isPadding=!0,this.sk=new Array(32)}function O(){this.SM4_ENCRYPT=1,this.SM4_DECRYPT=0;const t=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],e=[2746333894,1453994832,1736282519,2993693404],r=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257];this.GET_ULONG_BE=function(t,e){return(255&t[e])<<24|(255&t[e+1])<<16|(255&t[e+2])<<8|255&t[e+3]},this.PUT_ULONG_BE=function(t,e,r){var n=255&t>>24,s=255&t>>16,o=255&t>>8,i=255&t;e[r]=n>128?n-256:n,e[r+1]=s>128?s-256:s,e[r+2]=o>128?o-256:o,e[r+3]=i>128?i-256:i},this.SHL=function(t,e){return(4294967295&t)<<e},this.ROTL=function(t,e){return this.SHL(t,e)|t>>32-e},this.sm4Lt=function(t){let e,r;const n=new Array(4),s=new Array(4);return this.PUT_ULONG_BE(t,n,0),s[0]=this.sm4Sbox(n[0]),s[1]=this.sm4Sbox(n[1]),s[2]=this.sm4Sbox(n[2]),s[3]=this.sm4Sbox(n[3]),e=this.GET_ULONG_BE(s,0),r=e^this.ROTL(e,2)^this.ROTL(e,10)^this.ROTL(e,18)^this.ROTL(e,24),r},this.sm4F=function(t,e,r,n,s){return t^this.sm4Lt(e^r^n^s)},this.sm4CalciRK=function(t){let e,r;const n=new Array(4),s=new Array(4);return this.PUT_ULONG_BE(t,n,0),s[0]=this.sm4Sbox(n[0]),s[1]=this.sm4Sbox(n[1]),s[2]=this.sm4Sbox(n[2]),s[3]=this.sm4Sbox(n[3]),e=this.GET_ULONG_BE(s,0),r=e^this.ROTL(e,13)^this.ROTL(e,23),r},this.sm4Sbox=function(e){const r=t[255&e];return r>128?r-256:r},this.sm4_setkey_enc=function(t,e){return null==t?(alert("ctx is null!"),!1):null==e||16!==e.length?(alert("key error!"),!1):(t.mode=this.SM4_ENCRYPT,void this.sm4_setkey(t.sk,e))},this.sm4_setkey_dec=function(t,e){null==e||e.length,t.mode=0,this.sm4_setkey(t.sk,e),t.sk=t.sk.reverse()},this.sm4_setkey=function(t,n){const s=new Array(4),o=new Array(36);s[0]=this.GET_ULONG_BE(n,0),s[1]=this.GET_ULONG_BE(n,4),s[2]=this.GET_ULONG_BE(n,8),s[3]=this.GET_ULONG_BE(n,12),o[0]=s[0]^e[0],o[1]=s[1]^e[1],o[2]=s[2]^e[2],o[3]=s[3]^e[3];for(let e=0;e<32;e++)o[e+4]=o[e]^this.sm4CalciRK(o[e+1]^o[e+2]^o[e+3]^r[e]),t[e]=o[e+4]},this.padding=function(t,e){let r;if(null==t)return null;let n=null;if(e===this.SM4_ENCRYPT){r=parseInt(16-t.length%16),n=t.slice(0);for(let e=0;e<r;e++)n[t.length+e]=r}else r=t[t.length-1],n=t.slice(0,t.length-r);return n},this.sm4_one_round=function(t,e,r){let n=0;const s=new Array(36);for(s[0]=this.GET_ULONG_BE(e,0),s[1]=this.GET_ULONG_BE(e,4),s[2]=this.GET_ULONG_BE(e,8),s[3]=this.GET_ULONG_BE(e,12);n<32;)s[n+4]=this.sm4F(s[n],s[n+1],s[n+2],s[n+3],t[n]),n++;this.PUT_ULONG_BE(s[35],r,0),this.PUT_ULONG_BE(s[34],r,4),this.PUT_ULONG_BE(s[33],r,8),this.PUT_ULONG_BE(s[32],r,12)},this.sm4_crypt_ecb=function(t,e){null==e&&alert("input is null!"),t.isPadding&&t.mode===this.SM4_ENCRYPT&&(e=this.padding(e,this.SM4_ENCRYPT));let r=0,n=e.length,s=[];for(;n>0;n-=16){var o=new Array(16),i=e.slice(16*r,16*(r+1));this.sm4_one_round(t.sk,i,o),s=s.concat(o),r++}let l=s;for(t.isPadding&&t.mode===this.SM4_DECRYPT&&(l=this.padding(l,this.SM4_DECRYPT)),r=0;r<l.length;r++)l[r]<0&&(l[r]=l[r]+256);return l},this.sm4_crypt_cbc=function(t,e,r){let n,s,o,i;null!=e&&16===e.length||alert("iv error!"),null==r&&alert("input is null!"),t.isPadding&&t.mode===this.SM4_ENCRYPT&&(r=this.padding(r,this.SM4_ENCRYPT));let l=0,c=r.length,u=[];if(t.mode===this.SM4_ENCRYPT)for(i=0;c>0;c-=16){for(n=new Array(16),o=new Array(16),s=r.slice(16*i,16*(i+1)),l=0;l<16;l++)n[l]=s[l]^e[l];this.sm4_one_round(t.sk,n,o),e=o.slice(0,16),u=u.concat(o),i++}else{let a=[];for(i=0;c>0;c-=16){for(n=new Array(16),o=new Array(16),s=r.slice(16*i,16*(i+1)),a=s.slice(0,16),this.sm4_one_round(t.sk,s,n),l=0;l<16;l++)o[l]=n[l]^e[l];e=a.slice(0,16),u=u.concat(o),i++}}let a=u;for(t.isPadding&&t.mode===this.SM4_DECRYPT&&(a=this.padding(a,this.SM4_DECRYPT)),l=0;l<a.length;l++)a[l]<0&&(a[l]=a[l]+256);return a}}!function(e){if("object"==typeof t&&void 0!==r)r.exports=e();else{let t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.base64js=e()}}(function(){return function t(e,r,n){const s="function"==typeof require&&require;function o(i,l){if(!r[i]){if(!e[i]){const t="function"==typeof require&&require;if(!l&&t)return t(i,!0);if(s)return s(i,!0);const e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}const c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){const r=e[i][1][t];return o(r||t)},c,c.exports,t,e,r,n)}return r[i].exports}for(let i=0;i<n.length;i++)o(n[i]);return o}({"/":[function(t,e,r){r.byteLength=function(t){return 3*t.length/4-c(t)},r.toByteArray=function(t){let e,r,n,i,l;const u=t.length;i=c(t),l=new o(3*u/4-i),r=i>0?u-4:u;let a=0;for(e=0;e<r;e+=4)n=s[t.charCodeAt(e)]<<18|s[t.charCodeAt(e+1)]<<12|s[t.charCodeAt(e+2)]<<6|s[t.charCodeAt(e+3)],l[a++]=n>>16&255,l[a++]=n>>8&255,l[a++]=255&n;2===i?(n=s[t.charCodeAt(e)]<<2|s[t.charCodeAt(e+1)]>>4,l[a++]=255&n):1===i&&(n=s[t.charCodeAt(e)]<<10|s[t.charCodeAt(e+1)]<<4|s[t.charCodeAt(e+2)]>>2,l[a++]=n>>8&255,l[a++]=255&n);return l},r.fromByteArray=function(t){let e;const r=t.length,s=r%3;let o="";const i=[],l=16383;let c=0,u=r-s;for(;c<u;c+=l)i.push(a(t,c,c+l>u?u:c+l));1===s?(e=t[r-1],o+=n[e>>2],o+=n[e<<4&63],o+="=="):2===s&&(e=(t[r-2]<<8)+t[r-1],o+=n[e>>10],o+=n[e>>4&63],o+=n[e<<2&63],o+="=");return i.push(o),i.join("")};const n=[],s=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";let l=0;for(;l<64;++l)n[l]=i[l],s[i.charCodeAt(l)]=l;function c(t){const e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function u(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function a(t,e,r){let n;const s=[];for(let o=e;o<r;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(u(n));return s.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}]},{},[])("/")});const N=function(){this.secretKey="GJwsXX_BzW=gJWJW",this.iv="ZkR_SiNoSOFT=568",this.hexString=!1,this.encryptDefault_ECB=function(t){try{const e=new O,r=new P;r.isPadding=!0,r.mode=e.SM4_ENCRYPT;const n=this.stringToByte(this.secretKey);e.sm4_setkey_enc(r,n);const s=e.sm4_crypt_ecb(r,this.stringToByte(t)),o=base64js.fromByteArray(s);return null!=o&&o.trim().length>0&&o.replace(/(\s*|\t|\r|\n)/g,""),o}catch(e){return console.error(e),null}},this.encryptCustom_ECB=function(t,e){try{const r=new O,n=new P;n.isPadding=!0,n.mode=r.SM4_ENCRYPT;const s=this.stringToByte(e);r.sm4_setkey_enc(n,s);const o=r.sm4_crypt_ecb(n,this.stringToByte(t)),i=base64js.fromByteArray(o);return null!=i&&i.trim().length>0&&i.replace(/(\s*|\t|\r|\n)/g,""),i}catch(r){return console.error(r),null}},this.decryptDefault_ECB=function(t){try{let e=new O,r=new P;r.isPadding=!0,r.mode=e.SM4_ENCRYPT;let n=this.stringToByte(this.secretKey);e.sm4_setkey_dec(r,n);let s=e.sm4_crypt_ecb(r,base64js.toByteArray(t));return this.byteToString(s)}catch(e){return console.error(e),null}},this.decryptCustom_ECB=function(t,e){try{let r=new O,n=new P;n.isPadding=!0,n.mode=r.SM4_ENCRYPT;let s=this.stringToByte(e);r.sm4_setkey_dec(n,s);let o=r.sm4_crypt_ecb(n,base64js.toByteArray(t));return this.byteToString(o)}catch(r){return console.error(r),null}},this.encryptDefault_CBC=function(t){try{const e=new O,r=new P;r.isPadding=!0,r.mode=e.SM4_ENCRYPT;const n=this.stringToByte(this.secretKey),s=this.stringToByte(this.iv);e.sm4_setkey_enc(r,n);const o=e.sm4_crypt_cbc(r,s,this.stringToByte(t)),i=base64js.fromByteArray(o);return null!=i&&i.trim().length>0&&i.replace(/(\s*|\t|\r|\n)/g,""),i}catch(e){return console.error(e),null}},this.encryptCustom_CBC=function(t,e,r){try{const n=new O,s=new P;s.isPadding=!0,s.mode=n.SM4_ENCRYPT;const o=this.stringToByte(r),i=this.stringToByte(e);n.sm4_setkey_enc(s,o);const l=n.sm4_crypt_cbc(s,i,this.stringToByte(t)),c=base64js.fromByteArray(l);return null!=c&&c.trim().length>0&&c.replace(/(\s*|\t|\r|\n)/g,""),c}catch(n){return console.error(n),null}},this.decryptDefault_CBC=function(t){try{let e=new O,r=new P;r.isPadding=!0,r.mode=e.SM4_ENCRYPT;let n=this.stringToByte(this.secretKey),s=this.stringToByte(this.iv);e.sm4_setkey_dec(r,n);let o=e.sm4_crypt_cbc(r,s,base64js.toByteArray(t));return this.byteToString(o)}catch(e){return console.error(e),null}},this.decryptCustom_CBC=function(t,e,r){try{let n=new O,s=new P;s.isPadding=!0,s.mode=n.SM4_ENCRYPT;let o=this.stringToByte(r),i=this.stringToByte(e);n.sm4_setkey_dec(s,o);let l=n.sm4_crypt_cbc(s,i,base64js.toByteArray(t));return this.byteToString(l)}catch(n){return console.error(n),null}},this.stringToByte=function(t){const e=[];let r,n;r=t.length;for(let s=0;s<r;s++)n=t.charCodeAt(s),n>=65536&&n<=1114111?(e.push(n>>18&7|240),e.push(n>>12&63|128),e.push(n>>6&63|128),e.push(63&n|128)):n>=2048&&n<=65535?(e.push(n>>12&15|224),e.push(n>>6&63|128),e.push(63&n|128)):n>=128&&n<=2047?(e.push(n>>6&31|192),e.push(63&n|128)):e.push(255&n);return e},this.byteToString=function(t){if("string"==typeof t)return t;let e="",r=t;for(let n=0;n<r.length;n++){const t=r[n].toString(2),s=t.match(/^1+?(?=0)/);if(s&&8===t.length){const t=s[0].length;let o=r[n].toString(2).slice(7-t);for(let e=1;e<t;e++)o+=r[e+n].toString(2).slice(2);e+=String.fromCharCode(parseInt(o,2)),n+=t-1}else e+=String.fromCharCode(r[n])}return e}},L={class:"login-container"},A={class:"login-form"},k={class:"login-page-name"},U={style:{"font-size":"16px",opacity:"0.8","margin-top":"10px","font-family":"DengXian"}},v={class:"version-info"};t("default",c({name:"login",computed:{User:()=>C,Lock:()=>E},data:()=>({loginForm:{username:"",password:""},loginFormRules:{username:[{required:!0,message:"请输入登录名称",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},sysKey:null,projectEnglishName:"YUN FANG YE WU ZHI LIAN QU DONG PING TAI"}),mixins:[S,n],watch:{$route:{handler:function(t){const e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},mounted(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},methods:{handleLogin(){this.$refs.loginForm.validate(t=>{if(!t)return console.log("error submit!!"),!1;{this.loading=!0;let t=`{sm4c}${(new N).encryptCustom_CBC(this.loginForm.password,"@$binfo-tech%$&*","@#binfo-tech!%$*")}`,r={first:this.loginForm.username,pwd:t};(e=r,new Promise((t,r)=>{s.loginInService(e).then(e=>{l.dispatch("setToken","Bearer "+e.data).then(()=>{t()})}).catch(t=>{r(t)})})).then(()=>{this.loading=!1,w.push("/index")}).catch(()=>{this.loading=!1})}var e})},getOtherQuery:t=>Object.keys(t).reduce((e,r)=>("redirect"!==r&&(e[r]=t[r]),e),{})}},[["render",function(t,e,r,n,s,o){const i=u("el-input"),l=u("el-form-item"),c=u("i-ep-lock"),w=u("el-button"),E=u("el-form"),C=u("el-alert");return a(),h("div",L,[d("div",A,[f(E,{ref:"loginForm",model:s.loginForm,rules:s.loginFormRules,autocomplete:"on",class:"form_div","label-position":"left"},{default:y(()=>[e[3]||(e[3]=d("div",{class:"title-container"},[d("h3",{class:"title"},"欢迎登陆")],-1)),f(l,{prop:"username"},{default:y(()=>[f(i,{size:"large",ref:"username","prefix-icon":o.User,modelValue:s.loginForm.username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.loginForm.username=t),placeholder:"请输入用户名",name:"username",type:"text",tabindex:"1",autocomplete:"on"},null,8,["prefix-icon","modelValue"])]),_:1}),f(l,{prop:"password"},{default:y(()=>[f(c,{class:"mx-2"}),(a(),g(i,{size:"large",key:s.passwordType,ref:"password","prefix-icon":o.Lock,modelValue:s.loginForm.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.loginForm.password=t),type:s.passwordType,placeholder:"请输入密码",name:"password","show-password":"",tabindex:"2",autocomplete:"on",onKeyup:m(o.handleLogin,["enter","native"])},null,8,["prefix-icon","modelValue","type","onKeyup"]))]),_:1}),f(w,{loading:s.loading,type:"primary",class:"login_button",size:"large",onClick:p(o.handleLogin,["prevent"])},{default:y(()=>[...e[2]||(e[2]=[_("登 录 ",-1)])]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])]),t.isError&&!t.autoToIndex?(a(),g(C,{key:0,title:t.errorMsg,type:"error"},null,8,["title"])):T("",!0),e[4]||(e[4]=d("div",{class:"login-page-logo"},null,-1)),d("div",k,[d("p",null,b(t.projectName),1),d("p",U,b(s.projectEnglishName),1)]),d("div",v,b(t.version),1)])}],["__scopeId","data-v-1728c525"]]))}}})}();
