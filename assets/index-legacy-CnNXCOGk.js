System.register(["./table_mixin-legacy-DIG8w3YV.js","./table-example-api-legacy-B5wWo5dz.js","./UploadHttpComponent-legacy-BNj506lX.js","./dynamic_form-legacy-Boj_rN6B.js","./validateRules-legacy-Co865pER.js","./index-legacy-C9R4tdre.js","./view_file-legacy-Bt94_HJw.js","./zcq-sb-dky-legacy-D5iGgNmW.js","./polyfill-legacy-aWkUxw0k.js"],function(e,t){"use strict";var a,l,i,s,d,o,r,n,h,c,g,m,p,u,b,f,x,y,v,w,D,T,R;return{setters:[e=>{a=e.t},e=>{l=e.e},e=>{i=e.U},e=>{s=e.d},e=>{d=e.v},e=>{o=e.z,r=e.A,n=e.B,h=e._,c=e.r,g=e.o,m=e.c,p=e.b,u=e.F,b=e.q,f=e.e,x=e.w,y=e.h,v=e.t,w=e.d,D=e.v,T=e.x,R=e.D},null,null,null],execute:function(){let t=r.base;const C={loadTableDataService:e=>o({url:`${t}/gg/queryGg`,method:"post",data:e,showLoading:!0}),saveTableDataService:e=>o({url:`${t}/gg/saveGgList`,method:"post",data:e,showLoading:!0}),doDelTableDataService:e=>o({url:`${t}/gg/deleteGg`,method:"post",data:e,showLoading:!0}),exportTableDataFileService:(e,a)=>o({url:`${t}/common/deleteById`,method:"post",data:e,responseType:"blob",showLoading:!0}).then(e=>{n(e,a,"xlsx")}),downloadModuleService:e=>o({url:`${t}/common/downLoadModule`,method:"post",data:e,responseType:"blob",showLoading:!0}).then(e=>{n(e,"导入模板","xlsx")})},L={class:"page_content"},$={class:"header-item"},S={class:"header-item"};e("default",h({name:"announcement",mixins:[a],components:{UploadHttpComponent:i},data:()=>({time:["",""],total:0,searchParams:{sortOrder:"",sortColumn:""},tableData:[],isAutoWrap:!1}),watch:{time:{handler(e){e?(this.searchParams.startTime=e[0],this.searchParams.endTime=e[1]):(this.searchParams.startTime="",this.searchParams.endTime="")},immediate:!1}},computed:{tableHeaderList:()=>[{type:"checkbox",width:50},{type:"seq",width:60},{field:"ggbt",title:"公告标题",minWidth:120},{field:"yxq",title:"公告有效期",width:150,sortable:!0},{field:"fbr",title:"发布人",width:120},{field:"fbrq",title:"发布日期",width:150,sortable:!0},{field:"nr",title:"公告内容",type:"html",minWidth:120,headerAlign:"center",align:"left"}],tableDetailHeaderList(){return[{field:"ggbt",title:"公告标题",colWidth:"50%",editRender:{name:"ElInput",props:{clearable:!0}}},{field:"yxq",title:"公告有效期",colWidth:"50%",editRender:{name:"ElDatePicker",props:{type:"date",labelFormat:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"}}},{field:"ggdxIdList",title:"公告对象",colWidth:"50%",editRender:{name:"$ElTreeSelect",data:this.$store.state.selectOptionsObj.ggdx,props:{clearable:!0,filterable:!0,multiple:!0}}},{field:"fbr",title:"发布人",colWidth:"50%",editRender:{}},{field:"fbrq",title:"发布日期",colWidth:"50%",editRender:{}},{field:"fileList",title:"文件",colWidth:"50%",editRender:{name:"vxeUpload",props:{multiple:!0,types:["doc","docx","xls","xlsx","pdf"],type:"gg",limitSize:50}}},{field:"nr",title:"公告内容",editRender:{name:"ElTiptap"}}]},editRules:()=>({ggbt:[{required:!0,message:"公告标题不能为空"}],yxq:[{required:!0,message:"公告有效期不能为空"},d.date.rule],ggdxId:[{required:!0,message:"公告对象不能为空"}]}),gridOptions(){return{height:"auto",border:!0,round:!0,headerAlign:"center",align:"center",loading:!1,rowConfig:{isCurrent:!0,isHover:!0},radioConfig:{highlight:!0},checkboxConfig:{highlight:!0},columnConfig:{resizable:!0},sortConfig:{remote:!0},filterConfig:{remote:!0},headerCellClassName:"row-class",pagerConfig:this.pagerConfig,editConfig:{},proxyConfig:{seq:!0,showResponseMsg:!1,showActionMsg:!1,sort:!0,filter:!0,ajax:{query:({page:e,sorts:t,filters:a})=>this.loadTableApi(e,t,a),queryAll:({sorts:e,filters:t})=>this.loadTableApi({pageSize:1e5,currentPage:1},e,t),delete:({body:e})=>this.doDeleteApi(e.removeRecords),save:({body:e})=>this.doSaveApi(e)}},exportConfig:{filename:"系统公告表格",sheetName:"sheet1",type:"xlsx",mode:"all",modes:["current","selected","all"],message:!1,columns:this.tableHeaderList.filter(e=>"checkbox"!==e.type),exportMethod:this.exportMethod,afterExportMethod:this.afterExportMethod},editRules:this.editRules,columns:this.tableHeaderList}},defaultLeftButtons:()=>[{type:"gradientGreen",name:"查询"}],defaultRightButtons:()=>[{type:"gradientBlue",name:"新增"},{type:"gradientRed",name:"删除"}]},mounted(){},methods:{reloadTableData(){this.$refs.xTable.commitProxy("query")},loadTableData(){this.$refs.xTable.commitProxy("reload")},loadTableApi(e,t,a){let l=this.getRealParams(this.searchParams,e,t,a);return new Promise(t=>{C.loadTableDataService(l).then(a=>{1e5==e.pageSize?(this.total=a.total,t(a.data)):(this.total=a.total,t({result:a.data,page:{total:a.total}}))})})},doAdd(){R.getAddIdService().then(e=>{this.$vxeModal.show(s,{tableHeaderList:this.tableDetailHeaderList,validateRules:this.editRules,row:{id:e.data,fileList:[]},labelWidth:"120px"},{width:1200,title:"新增",height:window.innerHeight-200},{doSubmit:e=>{e.ggdxId=e.ggdxIdList.join(","),C.saveTableDataService({data:[e]}).then(e=>{this.$message.success(e.data),this.$vxeModal.closeAll(),this.loadTableData()})}})})},doSave(){this.$refs.xTable.commitProxy("save")},doSaveApi(e){return new Promise((t,a)=>{let{insertRecords:i,updateRecords:s}=e,d=[...i,...s];l.saveTableDataService({data:d}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},doDelete(){const e=this.getCheckboxRecords();e&&e.length>0&&this.$confirm(`确认删除勾选的${e.length}条数据吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$refs.xTable.commitProxy("delete")})},doDeleteApi(e){return new Promise((t,a)=>{let l=e.map(e=>e.id).join(",");C.doDelTableDataService({ids:l}).then(e=>{this.$message.success(e.data),t()}).catch(()=>{a()})})},downloadModule(){l.downloadModuleService()},resetParams(){this.searchParams.keyword="",this.time=["",""],this.$nextTick(function(){this.loadTableData()})},cellDblclick(e){let{row:t}=e;this.openDetail(t)},openDetail(e){this.$vxeModal.show(s,{tableHeaderList:this.tableDetailHeaderList,validateRules:this.editRules,row:e,labelWidth:"120px"},{width:1200,title:"详情",height:window.innerHeight-200},{close:()=>{},doSubmit:e=>{e.ggdxId=e.ggdxIdList.join(","),C.saveTableDataService({data:[e]}).then(e=>{this.$message.success(e.data),this.$vxeModal.closeAll(),this.loadTableData()})}})}}},[["render",function(e,t,a,l,i,s){const d=c("el-button"),o=c("vxe-grid");return g(),m("div",L,[p("header",null,[p("section",null,[p("div",$,[(g(!0),m(u,null,b(s.defaultLeftButtons,(t,a)=>(g(),f(d,{type:t.type,plain:t.plain,key:a+"defaultLeftButtons",onClick:a=>e.btnClick(t)},{default:x(()=>[y(v(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])]),p("section",null,[p("div",S,[(g(!0),m(u,null,b(s.defaultRightButtons,(t,a)=>(g(),f(d,{type:t.type,plain:t.plain,key:a+"defaultRightButtons",onClick:a=>e.btnClick(t)},{default:x(()=>[y(v(t.name),1)]),_:2},1032,["type","plain","onClick"]))),128))])])]),p("article",null,[w(o,D(s.gridOptions,{ref:"xTable"},T({cellDblclick:s.cellDblclick})),null,16)])])}],["__scopeId","data-v-7cf94585"]]))}}});
